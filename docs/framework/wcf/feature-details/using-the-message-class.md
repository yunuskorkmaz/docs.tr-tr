---
title: "İleti Sınıfını Kullanma"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
ms.assetid: d1d62bfb-2aa3-4170-b6f8-c93d3afdbbed
caps.latest.revision: "14"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 999b0105bf6ab97eb3ab38423efbc31f9b322254
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 12/02/2017
---
# <a name="using-the-message-class"></a><span data-ttu-id="b66fa-102">İleti Sınıfını Kullanma</span><span class="sxs-lookup"><span data-stu-id="b66fa-102">Using the Message Class</span></span>
<span data-ttu-id="b66fa-103"><xref:System.ServiceModel.Channels.Message> Sınıfı için temel [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)].</span><span class="sxs-lookup"><span data-stu-id="b66fa-103">The <xref:System.ServiceModel.Channels.Message> class is fundamental to [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)].</span></span> <span data-ttu-id="b66fa-104">İstemciler ve hizmetler arasındaki tüm iletişimi sonuçta sonuçlanır <xref:System.ServiceModel.Channels.Message> örnekleri gönderilen ve alınan.</span><span class="sxs-lookup"><span data-stu-id="b66fa-104">All communication between clients and services ultimately results in <xref:System.ServiceModel.Channels.Message> instances being sent and received.</span></span>  
  
 <span data-ttu-id="b66fa-105">Genellikle ile etkileşime geçmez <xref:System.ServiceModel.Channels.Message> doğrudan sınıfı.</span><span class="sxs-lookup"><span data-stu-id="b66fa-105">You would not usually interact with the <xref:System.ServiceModel.Channels.Message> class directly.</span></span> <span data-ttu-id="b66fa-106">Bunun yerine, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] hizmet modeli oluşturur, gibi verileri sözleşmeleri, ileti sözleşmeleri ve işlemi sözleşmeleri gelen ve giden iletiler açıklamak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="b66fa-106">Instead, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service model constructs, such as data contracts, message contracts, and operation contracts, are used to describe incoming and outgoing messages.</span></span> <span data-ttu-id="b66fa-107">Ancak, bazı Gelişmiş senaryolar program kullanarak <xref:System.ServiceModel.Channels.Message> doğrudan sınıfı.</span><span class="sxs-lookup"><span data-stu-id="b66fa-107">However, in some advanced scenarios you can program using the <xref:System.ServiceModel.Channels.Message> class directly.</span></span> <span data-ttu-id="b66fa-108">Örneğin, kullanmak isteyebilirsiniz <xref:System.ServiceModel.Channels.Message> sınıfı:</span><span class="sxs-lookup"><span data-stu-id="b66fa-108">For example, you might want to use the <xref:System.ServiceModel.Channels.Message> class:</span></span>  
  
-   <span data-ttu-id="b66fa-109">Seri hale getirme yerine giden ileti içeriği (örneğin, disk üzerindeki bir dosyadan doğrudan bir ileti oluşturma) oluşturma alternatif bir yol gerektiğinde [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] nesneleri.</span><span class="sxs-lookup"><span data-stu-id="b66fa-109">When you need an alternative way of creating outgoing message contents (for example, creating a message directly from a file on disk) instead of serializing [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] objects.</span></span>  
  
-   <span data-ttu-id="b66fa-110">İçine seri durumdan yerine gelen ileti içeriği (örneğin, ham XML içeriği XSLT dönüştürmesi uygulamak istediğinizde) kullanarak, alternatif bir yol gerektiğinde [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] nesneleri.</span><span class="sxs-lookup"><span data-stu-id="b66fa-110">When you need an alternative way of using incoming message contents (for example, when you want to apply an XSLT transformation to the raw XML contents) instead of deserializing into [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] objects.</span></span>  
  
-   <span data-ttu-id="b66fa-111">İleti içeriği ne olursa olsun genel bir şekilde iletilerle dağıtılacak gerektiğinde (örneğin, yönlendirme veya yönlendirici, yük dengeleyici veya bir yayımlama oluştururken İletileri iletirken-sistem abone).</span><span class="sxs-lookup"><span data-stu-id="b66fa-111">When you need to deal with messages in a general way regardless of message contents (for example, when routing or forwarding messages when building a router, load-balancer, or a publish-subscribe system).</span></span>  
  
 <span data-ttu-id="b66fa-112">Kullanmadan önce <xref:System.ServiceModel.Channels.Message> sınıfı, ile öğrenmeniz [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] veri aktarımı mimarisinde [veri aktarımı mimarisine genel bakış](../../../../docs/framework/wcf/feature-details/data-transfer-architectural-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b66fa-112">Before using the <xref:System.ServiceModel.Channels.Message> class, familiarize yourself with the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] data transfer architecture in [Data Transfer Architectural Overview](../../../../docs/framework/wcf/feature-details/data-transfer-architectural-overview.md).</span></span>  
  
 <span data-ttu-id="b66fa-113">A <xref:System.ServiceModel.Channels.Message> veriler için genel amaçlı bir kapsayıcı olmakla birlikte, tasarımı tasarım SOAP protokolü iletinin yakından izler.</span><span class="sxs-lookup"><span data-stu-id="b66fa-113">A <xref:System.ServiceModel.Channels.Message> is a general-purpose container for data, but its design closely follows the design of a message in the SOAP protocol.</span></span> <span data-ttu-id="b66fa-114">Gibi bir ileti gövdesi ve üstbilgileri SOAP içinde bir ileti vardır.</span><span class="sxs-lookup"><span data-stu-id="b66fa-114">Just like in SOAP, a message has both a message body and headers.</span></span> <span data-ttu-id="b66fa-115">Üstbilgileri ek adlandırılmış veri kapsayıcıları içerirken ileti gövdesi gerçek yükü verilerini içerir.</span><span class="sxs-lookup"><span data-stu-id="b66fa-115">The message body contains the actual payload data, while the headers contain additional named data containers.</span></span> <span data-ttu-id="b66fa-116">Gövde ve üst bilgileri okumak ve yazmak için kuralları farklı, örneğin üstbilgileri bellekte her zaman arabelleğe ve içinde erişilebilir gövdesi okuma yalnızca bir kez ve veri akışı ancak zaman, herhangi bir sayıda sipariş.</span><span class="sxs-lookup"><span data-stu-id="b66fa-116">The rules for reading and writing the body and the headers are different, for example, the headers are always buffered in memory and may be accessed in any order any number of times, while the body may be read only once and may be streamed.</span></span> <span data-ttu-id="b66fa-117">Normalde, SOAP kullanırken, ileti gövdesi SOAP gövdesi eşlenen ve ileti üstbilgilerini SOAP üstbilgileri eşlenir.</span><span class="sxs-lookup"><span data-stu-id="b66fa-117">Normally, when using SOAP, the message body is mapped to the SOAP body and the message headers are mapped to the SOAP headers.</span></span>  
  
## <a name="using-the-message-class-in-operations"></a><span data-ttu-id="b66fa-118">İşlemlerinde ileti sınıfını kullanma</span><span class="sxs-lookup"><span data-stu-id="b66fa-118">Using the Message Class in Operations</span></span>  
 <span data-ttu-id="b66fa-119">Kullanabileceğiniz <xref:System.ServiceModel.Channels.Message> sınıfının giriş parametresi olarak bir işlem, bir işlem veya her ikisi de dönüş değeri.</span><span class="sxs-lookup"><span data-stu-id="b66fa-119">You can use the <xref:System.ServiceModel.Channels.Message> class as an input parameter of an operation, the return value of an operation, or both.</span></span> <span data-ttu-id="b66fa-120">Varsa <xref:System.ServiceModel.Channels.Message> kullanılan herhangi bir işlem, aşağıdaki kısıtlamalar geçerlidir:</span><span class="sxs-lookup"><span data-stu-id="b66fa-120">If <xref:System.ServiceModel.Channels.Message> is used anywhere in an operation, the following restrictions apply:</span></span>  
  
-   <span data-ttu-id="b66fa-121">İşlemi içeremez `out` veya `ref` parametreleri.</span><span class="sxs-lookup"><span data-stu-id="b66fa-121">The operation cannot have any `out` or `ref` parameters.</span></span>  
  
-   <span data-ttu-id="b66fa-122">Olamaz birden fazla `input` parametresi.</span><span class="sxs-lookup"><span data-stu-id="b66fa-122">There cannot be more than one `input` parameter.</span></span> <span data-ttu-id="b66fa-123">Parametresi varsa, ileti veya bir ileti sözleşmesi türü olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="b66fa-123">If the parameter is present, it must be either Message or a message contract type.</span></span>  
  
-   <span data-ttu-id="b66fa-124">Dönüş türü ya da olmalıdır `void`, `Message`, veya bir ileti sözleşme türü.</span><span class="sxs-lookup"><span data-stu-id="b66fa-124">The return type must be either `void`, `Message`, or a message contract type.</span></span>  
  
 <span data-ttu-id="b66fa-125">Aşağıdaki kod örneğinde geçerli işlem sözleşme içerir.</span><span class="sxs-lookup"><span data-stu-id="b66fa-125">The following code example contains a valid operation contract.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#1)]
 [!code-vb[C_UsingTheMessageClass#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#1)]  
  
## <a name="creating-basic-messages"></a><span data-ttu-id="b66fa-126">Temel iletileri oluşturuluyor</span><span class="sxs-lookup"><span data-stu-id="b66fa-126">Creating Basic Messages</span></span>  
 <span data-ttu-id="b66fa-127"><xref:System.ServiceModel.Channels.Message> SAX statik `CreateMessage` temel iletileri oluşturmak için kullanabileceğiniz Fabrika yöntemleri.</span><span class="sxs-lookup"><span data-stu-id="b66fa-127">The <xref:System.ServiceModel.Channels.Message> class provides static `CreateMessage` factory methods that you can use to create basic messages.</span></span>  
  
 <span data-ttu-id="b66fa-128">Tüm `CreateMessage` aşırı ele türünde bir sürüm parametresi <xref:System.ServiceModel.Channels.MessageVersion> ileti için kullanılacak SOAP ve WS adresleme sürümleri gösterir.</span><span class="sxs-lookup"><span data-stu-id="b66fa-128">All `CreateMessage` overloads take a version parameter of type <xref:System.ServiceModel.Channels.MessageVersion> that indicates the SOAP and WS-Addressing versions to use for the message.</span></span> <span data-ttu-id="b66fa-129">Aynı protokol sürümleri gelen iletiyi olarak kullanmak istiyorsanız, kullanabileceğiniz <xref:System.ServiceModel.OperationContext.IncomingMessageVersion%2A> özelliği <xref:System.ServiceModel.OperationContext> örneği elde <xref:System.ServiceModel.OperationContext.Current%2A> özelliği.</span><span class="sxs-lookup"><span data-stu-id="b66fa-129">If you want to use the same protocol versions as the incoming message, you can use the <xref:System.ServiceModel.OperationContext.IncomingMessageVersion%2A> property on the <xref:System.ServiceModel.OperationContext> instance obtained from the <xref:System.ServiceModel.OperationContext.Current%2A> property.</span></span> <span data-ttu-id="b66fa-130">Çoğu `CreateMessage` aşırı ileti için kullanılacak SOAP eylemi gösteren bir dize parametresi de vardır.</span><span class="sxs-lookup"><span data-stu-id="b66fa-130">Most `CreateMessage` overloads also have a string parameter that indicates the SOAP action to use for the message.</span></span> <span data-ttu-id="b66fa-131">Sürüm ayarlanabilir `None` SOAP Zarfı oluşturma; devre dışı bırakmak için ileti gövdesi yalnızca oluşur.</span><span class="sxs-lookup"><span data-stu-id="b66fa-131">Version can be set to `None` to disable SOAP envelope generation; the message consists of only the body.</span></span>  
  
## <a name="creating-messages-from-objects"></a><span data-ttu-id="b66fa-132">İletileri nesnelerden oluşturma</span><span class="sxs-lookup"><span data-stu-id="b66fa-132">Creating Messages from Objects</span></span>  
 <span data-ttu-id="b66fa-133">En temel `CreateMessage` yalnızca bir sürümü ve bir eylemi alır aşırı boş bir gövde ile bir ileti oluşturur.</span><span class="sxs-lookup"><span data-stu-id="b66fa-133">The most basic `CreateMessage` overload that takes only a version and an action creates a message with an empty body.</span></span> <span data-ttu-id="b66fa-134">Başka bir aşırı ek bir alan <xref:System.Object> parametresi; bu, gövde belirtilen nesneyi seri hale getirilmiş gösterimini bir ileti oluşturur.</span><span class="sxs-lookup"><span data-stu-id="b66fa-134">Another overload takes an additional <xref:System.Object> parameter; this creates a message whose body is the serialized representation of the given object.</span></span> <span data-ttu-id="b66fa-135">Kullanım <xref:System.Runtime.Serialization.DataContractSerializer> serileştirilmesi için varsayılan ayarlarla.</span><span class="sxs-lookup"><span data-stu-id="b66fa-135">Use the <xref:System.Runtime.Serialization.DataContractSerializer> with default settings for serialization.</span></span> <span data-ttu-id="b66fa-136">Farklı bir seri hale getirici kullanmak istediğiniz veya istediğiniz `DataContractSerializer` farklı şekilde yapılandırılmış kullanmak `CreateMessage` ayrıca alır aşırı bir `XmlObjectSerializer` parametresi.</span><span class="sxs-lookup"><span data-stu-id="b66fa-136">If you want to use a different serializer, or you want the `DataContractSerializer` configured differently, use the `CreateMessage` overload that also takes an `XmlObjectSerializer` parameter.</span></span>  
  
 <span data-ttu-id="b66fa-137">Örneğin, bir nesne bir iletide döndürmek için aşağıdaki kodu kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b66fa-137">For example, to return an object in a message, you can use the following code.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#2)]
 [!code-vb[C_UsingTheMessageClass#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#2)]  
  
## <a name="creating-messages-from-xml-readers"></a><span data-ttu-id="b66fa-138">XML okuyuculardan iletileri oluşturuluyor</span><span class="sxs-lookup"><span data-stu-id="b66fa-138">Creating Messages from XML Readers</span></span>  
 <span data-ttu-id="b66fa-139">Vardır `CreateMessage` overloads süren bir <xref:System.Xml.XmlReader> veya bir <xref:System.Xml.XmlDictionaryReader> bir nesne yerine gövdesi için.</span><span class="sxs-lookup"><span data-stu-id="b66fa-139">There are `CreateMessage` overloads that take an <xref:System.Xml.XmlReader> or an <xref:System.Xml.XmlDictionaryReader> for the body instead of an object.</span></span> <span data-ttu-id="b66fa-140">Bu durumda, ileti gövdesi geçirilen XML okuyucusu okunurken oluşur XML içeriyor.</span><span class="sxs-lookup"><span data-stu-id="b66fa-140">In this case, the body of the message contains the XML that results from reading from the passed XML reader.</span></span> <span data-ttu-id="b66fa-141">Örneğin, aşağıdaki kod içeriği bir XML dosyasından okuma gövdesini içeren bir ileti döndürür.</span><span class="sxs-lookup"><span data-stu-id="b66fa-141">For example, the following code returns a message with body contents read from an XML file.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#3)]
 [!code-vb[C_UsingTheMessageClass#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#3)]  
  
 <span data-ttu-id="b66fa-142">Ayrıca, `CreateMessage` overloads süren bir <xref:System.Xml.XmlReader> veya bir <xref:System.Xml.XmlDictionaryReader> tüm ileti ve yalnızca gövde temsil eder.</span><span class="sxs-lookup"><span data-stu-id="b66fa-142">Additionally, there are `CreateMessage` overloads that take an <xref:System.Xml.XmlReader> or an <xref:System.Xml.XmlDictionaryReader> that represents the entire message and not just the body.</span></span> <span data-ttu-id="b66fa-143">Bu aşırı ayrıca bir tamsayı olması `maxSizeOfHeaders` parametresi.</span><span class="sxs-lookup"><span data-stu-id="b66fa-143">These overloads also take an integer `maxSizeOfHeaders` parameter.</span></span> <span data-ttu-id="b66fa-144">Gerçekleşir iletisi oluşturulur ve bu parametre arabelleğe alma miktarını sınırlar hemen belleğe üstbilgileri her zaman arabelleğe alındı.</span><span class="sxs-lookup"><span data-stu-id="b66fa-144">Headers are always buffered into memory as soon as the message is created, and this parameter limits the amount of buffering that takes place.</span></span> <span data-ttu-id="b66fa-145">XML bir hizmet reddi saldırısına olasılığını azaltmak için güvenilmeyen bir kaynaktan geliyorsa bu parametreyi güvenli bir değere ayarlamak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="b66fa-145">It is important to set this parameter to a safe value if the XML is coming from an untrusted source to mitigate the possibility of a denial of service attack.</span></span> <span data-ttu-id="b66fa-146">XML okuyucuyu temsil eder iletinin SOAP ve WS adresleme sürümleri sürüm parametresi kullanılarak belirtilen sürümleri uyuşmalıdır.</span><span class="sxs-lookup"><span data-stu-id="b66fa-146">The SOAP and WS-Addressing versions of the message the XML reader represents must match the versions indicated using the version parameter.</span></span>  
  
## <a name="creating-messages-with-bodywriter"></a><span data-ttu-id="b66fa-147">İletileri BodyWriter ile oluşturma</span><span class="sxs-lookup"><span data-stu-id="b66fa-147">Creating Messages with BodyWriter</span></span>  
 <span data-ttu-id="b66fa-148">Bir `CreateMessage` alır aşırı bir `BodyWriter` ileti gövdesini açıklamak için örneği.</span><span class="sxs-lookup"><span data-stu-id="b66fa-148">One `CreateMessage` overload takes a `BodyWriter` instance to describe the body of the message.</span></span> <span data-ttu-id="b66fa-149">A `BodyWriter` İleti gövdeleri nasıl oluşturulduğunu özelleştirmek için türetilmiş bir Özet sınıf.</span><span class="sxs-lookup"><span data-stu-id="b66fa-149">A `BodyWriter` is an abstract class that can be derived to customize how message bodies are created.</span></span> <span data-ttu-id="b66fa-150">Kendi oluşturabilirsiniz `BodyWriter` türetilen İleti gövdeleri özel bir biçimde tanımlamak için sınıfı.</span><span class="sxs-lookup"><span data-stu-id="b66fa-150">You can create your own `BodyWriter` derived class to describe message bodies in a custom way.</span></span> <span data-ttu-id="b66fa-151">Geçersiz kılmanız gerekir `BodyWriter.OnWriteBodyContents` yönteminin alan bir <xref:System.Xml.XmlDictionaryWriter>; bu yöntem gövde yazmaktan sorumludur.</span><span class="sxs-lookup"><span data-stu-id="b66fa-151">You must override the `BodyWriter.OnWriteBodyContents` method that takes an <xref:System.Xml.XmlDictionaryWriter>; this method is responsible for writing out the body.</span></span>  
  
 <span data-ttu-id="b66fa-152">Gövde yazıcılarının arabelleğe veya (akışı arabelleğe olmayan).</span><span class="sxs-lookup"><span data-stu-id="b66fa-152">Body writers can be buffered or non-buffered (streamed).</span></span> <span data-ttu-id="b66fa-153">Akış olanları içeriklerini yalnızca bir kez yazabilirsiniz sırada arabelleğe alınan gövde yazıcılarının zaman, herhangi bir sayıda içeriklerini yazabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b66fa-153">Buffered body writers can write out their contents any number of times, while streamed ones can write out their contents only once.</span></span> <span data-ttu-id="b66fa-154">`IsBuffered` Özelliği, Gövde yazıcısı veya arabelleğe alınıp alınmayacağını belirtir.</span><span class="sxs-lookup"><span data-stu-id="b66fa-154">The `IsBuffered` property indicates whether a body writer is buffered or not.</span></span> <span data-ttu-id="b66fa-155">Bu, Gövde yazıcısı için korumalı çağırarak ayarlayabileceğiniz `BodyWriter` alan oluşturucu bir `isBuffered` Boole parametresi.</span><span class="sxs-lookup"><span data-stu-id="b66fa-155">You can set this for your body writer by calling the protected `BodyWriter` constructor that takes an `isBuffered` boolean parameter.</span></span> <span data-ttu-id="b66fa-156">Gövde yazıcılarının arabelleğe gövde yazıcıdan bir arabelleğe alınan Gövde yazıcısı oluşturmayı destekler.</span><span class="sxs-lookup"><span data-stu-id="b66fa-156">Body writers support creating a buffered body writer from a non-buffered body writer.</span></span> <span data-ttu-id="b66fa-157">Geçersiz kılabilirsiniz `OnCreateBufferedCopy` bu işlemi özelleştirmek için yöntem.</span><span class="sxs-lookup"><span data-stu-id="b66fa-157">You can override the `OnCreateBufferedCopy` method to customize this process.</span></span> <span data-ttu-id="b66fa-158">Varsayılan olarak, XML içeren bir bellek içi arabellek tarafından döndürülen `OnWriteBodyContents` kullanılır.</span><span class="sxs-lookup"><span data-stu-id="b66fa-158">By default, an in-memory buffer that contains the XML returned by `OnWriteBodyContents` is used.</span></span> <span data-ttu-id="b66fa-159">`OnCreateBufferedCopy`alan bir `maxBufferSize` tamsayı parametresi; bu yöntemi geçersiz kılarsanız, arabellek bu en yüksek boyuttan büyük oluşturmamalıdır.</span><span class="sxs-lookup"><span data-stu-id="b66fa-159">`OnCreateBufferedCopy` takes a `maxBufferSize` integer parameter; if you override this method, you must not create buffers larger than this maximum size.</span></span>  
  
 <span data-ttu-id="b66fa-160">`BodyWriter` SAX `WriteBodyContents` ve `CreateBufferedCopy` temelde olan yöntemler, geçici sarmalayıcıları ince `OnWriteBodyContents` ve `OnCreateBufferedCopy` yöntemleri, sırasıyla.</span><span class="sxs-lookup"><span data-stu-id="b66fa-160">The `BodyWriter` class provides the `WriteBodyContents` and `CreateBufferedCopy` methods, which are essentially thin wrappers around `OnWriteBodyContents` and `OnCreateBufferedCopy` methods, respectively.</span></span> <span data-ttu-id="b66fa-161">Bu yöntemler bir arabelleğe Gövde yazıcısı birden çok kez erişmediğinden emin olmak için durum denetimi gerçekleştirin.</span><span class="sxs-lookup"><span data-stu-id="b66fa-161">These methods perform state checking to ensure that a non-buffered body writer is not accessed more than once.</span></span> <span data-ttu-id="b66fa-162">Bu yöntemlerin doğrudan yalnızca özel oluşturulurken çağrılır `Message` türetilmiş sınıflar temel `BodyWriters`.</span><span class="sxs-lookup"><span data-stu-id="b66fa-162">These methods are called directly only when creating custom `Message` derived classes based on `BodyWriters`.</span></span>  
  
## <a name="creating-fault-messages"></a><span data-ttu-id="b66fa-163">Hata iletileri oluşturma</span><span class="sxs-lookup"><span data-stu-id="b66fa-163">Creating Fault Messages</span></span>  
 <span data-ttu-id="b66fa-164">Belirli kullanabilirsiniz `CreateMessage` SOAP oluşturmak için aşırı hata iletileri.</span><span class="sxs-lookup"><span data-stu-id="b66fa-164">You can use certain `CreateMessage` overloads to create SOAP fault messages.</span></span> <span data-ttu-id="b66fa-165">En temel bu alır, bir <xref:System.ServiceModel.Channels.MessageFault> hataya tanımlayan nesne.</span><span class="sxs-lookup"><span data-stu-id="b66fa-165">The most basic of these takes a <xref:System.ServiceModel.Channels.MessageFault> object that describes the fault.</span></span> <span data-ttu-id="b66fa-166">Diğer aşırı yüklemeler kolaylık olması için sağlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="b66fa-166">Other overloads are provided for convenience.</span></span> <span data-ttu-id="b66fa-167">İlk gibi aşırı alır bir `FaultCode` ve nedeni dize ve oluşturan bir `MessageFault` kullanarak `MessageFault.CreateFault` bu bilgileri kullanarak.</span><span class="sxs-lookup"><span data-stu-id="b66fa-167">The first such overload takes a `FaultCode` and a reason string and creates a `MessageFault` using `MessageFault.CreateFault` using this information.</span></span> <span data-ttu-id="b66fa-168">Diğer aşırı ayrıntı nesnesini alır ve aynı zamanda buna ileten `CreateFault` hata kodu ve açıklaması ile birlikte.</span><span class="sxs-lookup"><span data-stu-id="b66fa-168">The other overload takes a detail object and also passes it to `CreateFault` together with the fault code and the reason.</span></span> <span data-ttu-id="b66fa-169">Örneğin, aşağıdaki işlemi bir hata döndürür.</span><span class="sxs-lookup"><span data-stu-id="b66fa-169">For example, the following operation returns a fault.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#4)]
 [!code-vb[C_UsingTheMessageClass#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#4)]  
  
## <a name="extracting-message-body-data"></a><span data-ttu-id="b66fa-170">İleti gövdesi veri çıkarma</span><span class="sxs-lookup"><span data-stu-id="b66fa-170">Extracting Message Body Data</span></span>  
 <span data-ttu-id="b66fa-171">`Message` Sınıfı, kendi gövdesinden bilgileri ayıklanıyor birkaç yolu destekler.</span><span class="sxs-lookup"><span data-stu-id="b66fa-171">The `Message` class supports multiple ways of extracting information from its body.</span></span> <span data-ttu-id="b66fa-172">Bunlar aşağıdaki kategorilerde sınıflandırılabilir:</span><span class="sxs-lookup"><span data-stu-id="b66fa-172">These can be classified into the following categories:</span></span>  
  
-   <span data-ttu-id="b66fa-173">Aynı anda bir XML yazıcı yazılan tüm ileti gövdesi alınıyor.</span><span class="sxs-lookup"><span data-stu-id="b66fa-173">Getting the entire message body written out at once to an XML writer.</span></span> <span data-ttu-id="b66fa-174">Bu olarak adlandırılır *ileti yazmayı*.</span><span class="sxs-lookup"><span data-stu-id="b66fa-174">This is referred to as *writing a message*.</span></span>  
  
-   <span data-ttu-id="b66fa-175">Bir XML okuyucusu ileti gövdesi alınıyor.</span><span class="sxs-lookup"><span data-stu-id="b66fa-175">Getting an XML reader over the message body.</span></span> <span data-ttu-id="b66fa-176">Bu, daha sonra erişimi ileti gövdesi parça tarafından-parçası gerektiği gibi sağlar.</span><span class="sxs-lookup"><span data-stu-id="b66fa-176">This enables you to later access the message body piece-by-piece as required.</span></span> <span data-ttu-id="b66fa-177">Bu olarak adlandırılır *bir ileti okunurken*.</span><span class="sxs-lookup"><span data-stu-id="b66fa-177">This is referred to as *reading a message*.</span></span>  
  
-   <span data-ttu-id="b66fa-178">Kendi gövde dahil olmak üzere tüm ileti bir bellek içi arabelleğe kopyalanabilir <xref:System.ServiceModel.Channels.MessageBuffer> türü.</span><span class="sxs-lookup"><span data-stu-id="b66fa-178">The entire message, including its body, can be copied to an in-memory buffer of the <xref:System.ServiceModel.Channels.MessageBuffer> type.</span></span> <span data-ttu-id="b66fa-179">Bu olarak adlandırılır *bir ileti kopyalama*.</span><span class="sxs-lookup"><span data-stu-id="b66fa-179">This is referred to as *copying a message*.</span></span>  
  
 <span data-ttu-id="b66fa-180">Gövdesini erişebileceği bir `Message` nasıl erişilir bağımsız olarak yalnızca bir kez,.</span><span class="sxs-lookup"><span data-stu-id="b66fa-180">You can access the body of a `Message` only once, regardless of how it is accessed.</span></span> <span data-ttu-id="b66fa-181">Bir ileti nesnesi olan bir `State` başlangıçta oluşturuldu olarak ayarlama özelliği.</span><span class="sxs-lookup"><span data-stu-id="b66fa-181">A message object has a `State` property, which is initially set to Created.</span></span> <span data-ttu-id="b66fa-182">Önceki listede açıklanan üç erişim yöntemleri durumu yazılan, okuma ve kopyalandı, sırasıyla ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="b66fa-182">The three access methods described in the preceding list set the state to Written, Read, and Copied, respectively.</span></span> <span data-ttu-id="b66fa-183">Ayrıca, bir `Close` yöntemi ayarlayabilirsiniz durumu kapalı olarak ileti gövdesi içeriği artık gerekli olduğunda.</span><span class="sxs-lookup"><span data-stu-id="b66fa-183">Additionally, a `Close` method can set the state to Closed when the message body contents are no longer required.</span></span> <span data-ttu-id="b66fa-184">İleti gövdesi yalnızca oluşturulan durumda erişilebilir ve durumu değiştikten sonra oluşturulan durumuna geri dönmek için yolu yoktur.</span><span class="sxs-lookup"><span data-stu-id="b66fa-184">The message body can be accessed only in the Created state, and there is no way to go back to the Created state after the state has changed.</span></span>  
  
## <a name="writing-messages"></a><span data-ttu-id="b66fa-185">Yazma iletileri</span><span class="sxs-lookup"><span data-stu-id="b66fa-185">Writing Messages</span></span>  
 <span data-ttu-id="b66fa-186"><xref:System.ServiceModel.Channels.Message.WriteBodyContents%28System.Xml.XmlDictionaryWriter%29> Yöntemi Yazar gövdesi içeriğini bir verilen `Message` verilen XML yazıcıyı örneğine.</span><span class="sxs-lookup"><span data-stu-id="b66fa-186">The <xref:System.ServiceModel.Channels.Message.WriteBodyContents%28System.Xml.XmlDictionaryWriter%29> method writes out the body contents of a given `Message` instance to a given XML writer.</span></span> <span data-ttu-id="b66fa-187"><xref:System.ServiceModel.Channels.Message.WriteBody%2A> Yöntemi yaptığı aynı uygun sarmalayıcı öğesinde gövdesi içeriğini barındırır dışında (örneğin, <`soap:body`>).</span><span class="sxs-lookup"><span data-stu-id="b66fa-187">The <xref:System.ServiceModel.Channels.Message.WriteBody%2A> method does the same, except that it encloses the body contents in the appropriate wrapper element (for example, <`soap:body`>).</span></span> <span data-ttu-id="b66fa-188">Son olarak, <xref:System.ServiceModel.Channels.Message.WriteMessage%2A> kaydırma dahil olmak üzere tüm ileti yazar SOAP zarfını ve üstbilgileri.</span><span class="sxs-lookup"><span data-stu-id="b66fa-188">Finally, <xref:System.ServiceModel.Channels.Message.WriteMessage%2A> writes out the entire message, including the wrapping SOAP envelope and the headers.</span></span> <span data-ttu-id="b66fa-189">SOAP kapalıysa (sürüm `MessageVersion.None`), tüm üç yöntem aynı işlevi görür: ileti gövdesi içeriğini yazma.</span><span class="sxs-lookup"><span data-stu-id="b66fa-189">If SOAP is turned off (Version is `MessageVersion.None`), all three methods do the same thing: they write out the message body contents.</span></span>  
  
 <span data-ttu-id="b66fa-190">Örneğin, bir dosyaya gelen ileti gövdesini çıkışı aşağıdaki kodu yazar.</span><span class="sxs-lookup"><span data-stu-id="b66fa-190">For example, the following code writes out the body of an incoming message to a file.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#5)]
 [!code-vb[C_UsingTheMessageClass#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#5)]  
  
 <span data-ttu-id="b66fa-191">İki ek yardımcı yöntemler belirli SOAP başlangıç öğesi etiketleri yazma.</span><span class="sxs-lookup"><span data-stu-id="b66fa-191">Two additional helper methods write out certain SOAP start element tags.</span></span> <span data-ttu-id="b66fa-192">Bu yöntemler ileti gövdesi erişmemesi ve bu nedenle bunlar ileti durumu değiştirme.</span><span class="sxs-lookup"><span data-stu-id="b66fa-192">These methods do not access the message body and so they do not change the message state.</span></span> <span data-ttu-id="b66fa-193">Bu güncelleştirmeler şunlardır:</span><span class="sxs-lookup"><span data-stu-id="b66fa-193">These include:</span></span>  
  
-   <span data-ttu-id="b66fa-194"><xref:System.ServiceModel.Channels.Message.WriteStartBody%2A>Örneğin, başlangıç body öğesi Yazar `<soap:Body>`.</span><span class="sxs-lookup"><span data-stu-id="b66fa-194"><xref:System.ServiceModel.Channels.Message.WriteStartBody%2A> writes the start body element, for example, `<soap:Body>`.</span></span>  
  
-   <span data-ttu-id="b66fa-195"><xref:System.ServiceModel.Channels.Message.WriteStartEnvelope%2A>Örneğin, başlangıç envelope öğesi Yazar `<soap:Envelope>`.</span><span class="sxs-lookup"><span data-stu-id="b66fa-195"><xref:System.ServiceModel.Channels.Message.WriteStartEnvelope%2A> writes the start envelope element, for example, `<soap:Envelope>`.</span></span>  
  
 <span data-ttu-id="b66fa-196">Öğe etiketleri karşılık gelen son yazmak için arama `WriteEndElement` karşılık gelen XML yazıcıda.</span><span class="sxs-lookup"><span data-stu-id="b66fa-196">To write the corresponding end element tags, call `WriteEndElement` on the corresponding XML writer.</span></span> <span data-ttu-id="b66fa-197">Bu yöntemler nadiren doğrudan denir.</span><span class="sxs-lookup"><span data-stu-id="b66fa-197">These methods are rarely called directly.</span></span>  
  
## <a name="reading-messages"></a><span data-ttu-id="b66fa-198">İletileri okuma</span><span class="sxs-lookup"><span data-stu-id="b66fa-198">Reading Messages</span></span>  
 <span data-ttu-id="b66fa-199">İleti gövdesini okumak için birincil yolu çağırmaktır <xref:System.ServiceModel.Channels.Message.GetReaderAtBodyContents%2A>.</span><span class="sxs-lookup"><span data-stu-id="b66fa-199">The primary way to read a message body is to call <xref:System.ServiceModel.Channels.Message.GetReaderAtBodyContents%2A>.</span></span> <span data-ttu-id="b66fa-200">Geri alma bir <xref:System.Xml.XmlDictionaryReader> ileti gövdesini okumak için kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b66fa-200">You get back an <xref:System.Xml.XmlDictionaryReader> that you can use to read the message body.</span></span> <span data-ttu-id="b66fa-201">Unutmayın <xref:System.ServiceModel.Channels.Message> okuma durumu geçişleri hemen <xref:System.ServiceModel.Channels.Message.GetReaderAtBodyContents%2A> denir ve değil döndürülen XML Okuyucu kullandığınızda.</span><span class="sxs-lookup"><span data-stu-id="b66fa-201">Note that the <xref:System.ServiceModel.Channels.Message> transitions to the Read state as soon as <xref:System.ServiceModel.Channels.Message.GetReaderAtBodyContents%2A> is called, and not when you use the returned XML reader.</span></span>  
  
 <span data-ttu-id="b66fa-202"><xref:System.ServiceModel.Channels.Message.GetBody%2A> Yöntemi de ileti gövdesi yazılmış bir nesne olarak erişmesine olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="b66fa-202">The <xref:System.ServiceModel.Channels.Message.GetBody%2A> method also enables you to access the message body as a typed object.</span></span> <span data-ttu-id="b66fa-203">Dahili olarak, bu yöntemi kullanır `GetReaderAtBodyContents`, ve ayrıca ileti durumu geçişleri <xref:System.ServiceModel.Channels.MessageState.Read> durumu (bkz: <xref:System.ServiceModel.Channels.Message.State%2A> özelliği).</span><span class="sxs-lookup"><span data-stu-id="b66fa-203">Internally, this method uses `GetReaderAtBodyContents`, and so it also transitions the message state to the <xref:System.ServiceModel.Channels.MessageState.Read> state (see the <xref:System.ServiceModel.Channels.Message.State%2A> property).</span></span>  
  
 <span data-ttu-id="b66fa-204">Denetlemek için iyi bir uygulamadır <xref:System.ServiceModel.Channels.Message.IsEmpty%2A> özelliği, içinde olduğu bu durum ileti gövdesi boş ve <xref:System.ServiceModel.Channels.Message.GetReaderAtBodyContents%2A> oluşturur bir <xref:System.InvalidOperationException>.</span><span class="sxs-lookup"><span data-stu-id="b66fa-204">It is good practice to check the <xref:System.ServiceModel.Channels.Message.IsEmpty%2A> property, in which case the message body is empty and <xref:System.ServiceModel.Channels.Message.GetReaderAtBodyContents%2A> throws an <xref:System.InvalidOperationException>.</span></span> <span data-ttu-id="b66fa-205">Alınan ileti (örneğin, yanıt) etkinleştirilmişse, ayrıca, aynı zamanda denetlemek isteyebilirsiniz <xref:System.ServiceModel.Channels.Message.IsFault%2A>, iletinin bir hata içerip içermediğini belirtir.</span><span class="sxs-lookup"><span data-stu-id="b66fa-205">Also, if it is a received message (for example, the reply), you may also want to check <xref:System.ServiceModel.Channels.Message.IsFault%2A>, which indicates whether the message contains a fault.</span></span>  
  
 <span data-ttu-id="b66fa-206">En temel aşırı yüklemesini <xref:System.ServiceModel.Channels.Message.GetBody%2A> türü (genel parametresi tarafından belirtilir) kullanarak bir örneğine ileti gövdesi seri durumdan çıkarır bir <xref:System.Runtime.Serialization.DataContractSerializer> varsayılan ayarlarla ve yapılandırılmış <xref:System.Runtime.Serialization.DataContractSerializer.MaxItemsInObjectGraph%2A> kota devre dışı.</span><span class="sxs-lookup"><span data-stu-id="b66fa-206">The most basic overload of <xref:System.ServiceModel.Channels.Message.GetBody%2A> deserializes the message body into an instance of a type (indicated by the generic parameter) using a <xref:System.Runtime.Serialization.DataContractSerializer> configured with the default settings and with the <xref:System.Runtime.Serialization.DataContractSerializer.MaxItemsInObjectGraph%2A> quota disabled.</span></span> <span data-ttu-id="b66fa-207">Farklı serileştirme motoruna kullanın ya da yapılandırmak isteyip istemediğinizi `DataContractSerializer` bir varsayılan olmayan şekilde kullanma <xref:System.ServiceModel.Channels.Message.GetBody%2A> alan aşırı bir <xref:System.Runtime.Serialization.XmlObjectSerializer>.</span><span class="sxs-lookup"><span data-stu-id="b66fa-207">If you want to use a different serialization engine, or configure the `DataContractSerializer` in a non-default way, use the <xref:System.ServiceModel.Channels.Message.GetBody%2A> overload that takes an <xref:System.Runtime.Serialization.XmlObjectSerializer>.</span></span>  
  
 <span data-ttu-id="b66fa-208">Örneğin, aşağıdaki kodu verileri seri hale getirilmiş bir içeren bir ileti gövdesinden ayıklar `Person` nesne ve kişinin adını yazdırır.</span><span class="sxs-lookup"><span data-stu-id="b66fa-208">For example, the following code extracts data from a message body that contains a serialized `Person` object and prints out the person’s name.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#6)]
 [!code-vb[C_UsingTheMessageClass#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#6)]  
  
## <a name="copying-a-message-into-a-buffer"></a><span data-ttu-id="b66fa-209">Bir ileti bir arabelleğe kopyalama</span><span class="sxs-lookup"><span data-stu-id="b66fa-209">Copying a Message into a Buffer</span></span>  
 <span data-ttu-id="b66fa-210">Bazen ileti gövdesi birden çok kez, örneğin erişmek için bir yayımcı abone sisteminin parçası olarak birden çok varış yeri için aynı iletisini iletmek için gerekli değildir.</span><span class="sxs-lookup"><span data-stu-id="b66fa-210">Sometimes it is necessary to access the message body more than once, for example, to forward the same message to multiple destinations as part of a publisher-subscriber system.</span></span> <span data-ttu-id="b66fa-211">Bu durumda, bellekte (gövdesi dahil) tüm ileti arabellek gereklidir.</span><span class="sxs-lookup"><span data-stu-id="b66fa-211">In this case, it is necessary to buffer the entire message (including the body) in memory.</span></span> <span data-ttu-id="b66fa-212">Bunu çağırarak yapmak <xref:System.ServiceModel.Channels.Message.CreateBufferedCopy%28System.Int32%29>.</span><span class="sxs-lookup"><span data-stu-id="b66fa-212">You can do this by calling <xref:System.ServiceModel.Channels.Message.CreateBufferedCopy%28System.Int32%29>.</span></span> <span data-ttu-id="b66fa-213">Bu yöntem, en büyük arabellek boyutu temsil eder ve bir arabellek bu boyuttan büyük oluşturan bir tamsayı parametresini alır.</span><span class="sxs-lookup"><span data-stu-id="b66fa-213">This method takes an integer parameter that represents the maximum buffer size, and creates a buffer not larger than this size.</span></span> <span data-ttu-id="b66fa-214">İleti güvenilmeyen bir kaynaktan geliyorsa bu güvenli bir değere ayarlamak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="b66fa-214">It is important to set this to a safe value if the message is coming from an untrusted source.</span></span>  
  
 <span data-ttu-id="b66fa-215">Arabellek olarak döndürülür bir <xref:System.ServiceModel.Channels.MessageBuffer> örneği.</span><span class="sxs-lookup"><span data-stu-id="b66fa-215">The buffer is returned as a <xref:System.ServiceModel.Channels.MessageBuffer> instance.</span></span> <span data-ttu-id="b66fa-216">Çeşitli şekillerde arabelleği erişebilir.</span><span class="sxs-lookup"><span data-stu-id="b66fa-216">You can access data in the buffer in several ways.</span></span> <span data-ttu-id="b66fa-217">Birincil yolu çağırmaktır <xref:System.ServiceModel.Channels.Message.CreateMessage%2A> oluşturmak için `Message` arabellekteki örnekleri.</span><span class="sxs-lookup"><span data-stu-id="b66fa-217">The primary way is to call <xref:System.ServiceModel.Channels.Message.CreateMessage%2A> to create `Message` instances from the buffer.</span></span>  
  
 <span data-ttu-id="b66fa-218">Arabellekteki verilere erişmek için bir başka yolu uygulamaktır <xref:System.Xml.XPath.IXPathNavigable> arabirim <xref:System.ServiceModel.Channels.MessageBuffer> sınıf temel alınan XML doğrudan erişmek için uygular.</span><span class="sxs-lookup"><span data-stu-id="b66fa-218">Another way to access the data in the buffer is to implement the <xref:System.Xml.XPath.IXPathNavigable> interface that the <xref:System.ServiceModel.Channels.MessageBuffer> class implements to access the underlying XML directly.</span></span> <span data-ttu-id="b66fa-219">Bazı <xref:System.ServiceModel.Channels.MessageBuffer.CreateNavigator%2A> aşırı oluşturmanıza izin <xref:System.Xml.XPath> bir düğüm kota tarafından korunan gezginlerini ziyaret edilebilir XML düğüm sayısını sınırlandırma.</span><span class="sxs-lookup"><span data-stu-id="b66fa-219">Some <xref:System.ServiceModel.Channels.MessageBuffer.CreateNavigator%2A> overloads allow you to create <xref:System.Xml.XPath> navigators protected by a node quota, limiting the number of XML nodes that can be visited.</span></span> <span data-ttu-id="b66fa-220">Bu, uzun işleme zamanı temel alınarak hizmet reddi saldırılarını önlemeye yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="b66fa-220">This helps prevent denial of service attacks based on lengthy processing time.</span></span> <span data-ttu-id="b66fa-221">Bu teklif, varsayılan olarak devre dışıdır.</span><span class="sxs-lookup"><span data-stu-id="b66fa-221">This quote is disabled by default.</span></span> <span data-ttu-id="b66fa-222">Bazı `CreateNavigator` aşırı boşluk XML'de nasıl işleneceğini belirtmenize olanak tanır kullanarak <xref:System.Xml.XmlSpace> varsayılan olan ile numaralandırma `XmlSpace.None`.</span><span class="sxs-lookup"><span data-stu-id="b66fa-222">Some `CreateNavigator` overloads allow you to specify how white space should be handled in the XML using the <xref:System.Xml.XmlSpace> enumeration, with the default being `XmlSpace.None`.</span></span>  
  
 <span data-ttu-id="b66fa-223">İleti arabelleği içeriğine erişmek için son kullanarak akış içeriğini yazmak için yoludur <xref:System.ServiceModel.Channels.Message.WriteMessage%2A>.</span><span class="sxs-lookup"><span data-stu-id="b66fa-223">A final way to access the contents of a message buffer is to write out its contents to a stream using <xref:System.ServiceModel.Channels.Message.WriteMessage%2A>.</span></span>  
  
 <span data-ttu-id="b66fa-224">Aşağıdaki örnek çalışma sürecini gösterir bir `MessageBuffer`: gelen ileti birden çok alıcıya iletilen ve bir dosyaya oturum.</span><span class="sxs-lookup"><span data-stu-id="b66fa-224">The following example demonstrates the process of working with a `MessageBuffer`: an incoming message is forwarded to multiple recipients, and then logged to a file.</span></span> <span data-ttu-id="b66fa-225">İleti gövdesi sonra yalnızca bir kez erişilebildiğinden arabelleğe alma olmadan bu mümkün değildir.</span><span class="sxs-lookup"><span data-stu-id="b66fa-225">Without buffering, this is not possible, because the message body can then be accessed only once.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#7)]
 [!code-vb[C_UsingTheMessageClass#7](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#7)]  
  
 <span data-ttu-id="b66fa-226">`MessageBuffer` Sınıfı eşitlenmeyeceği diğer üyeleri sahiptir.</span><span class="sxs-lookup"><span data-stu-id="b66fa-226">The `MessageBuffer` class has other members worth noting.</span></span> <span data-ttu-id="b66fa-227"><xref:System.ServiceModel.Channels.MessageBuffer.Close%2A> Yöntemi arabellek içeriği artık gerekli olduğunda kaynakları serbest bırakmak için çağrılabilir.</span><span class="sxs-lookup"><span data-stu-id="b66fa-227">The <xref:System.ServiceModel.Channels.MessageBuffer.Close%2A> method can be called to free resources when the buffer contents are no longer required.</span></span> <span data-ttu-id="b66fa-228"><xref:System.ServiceModel.Channels.MessageBuffer.BufferSize%2A> Özelliği ayrılan arabellek boyutu döndürür.</span><span class="sxs-lookup"><span data-stu-id="b66fa-228">The <xref:System.ServiceModel.Channels.MessageBuffer.BufferSize%2A> property returns the size of the allocated buffer.</span></span> <span data-ttu-id="b66fa-229"><xref:System.ServiceModel.Channels.MessageBuffer.MessageContentType%2A> Özelliği ileti MIME içerik türünü döndürür.</span><span class="sxs-lookup"><span data-stu-id="b66fa-229">The <xref:System.ServiceModel.Channels.MessageBuffer.MessageContentType%2A> property returns the MIME content type of the message.</span></span>  
  
## <a name="accessing-the-message-body-for-debugging"></a><span data-ttu-id="b66fa-230">Hata ayıklama için ileti gövdesi erişme</span><span class="sxs-lookup"><span data-stu-id="b66fa-230">Accessing the Message Body for Debugging</span></span>  
 <span data-ttu-id="b66fa-231">Hata ayıklama amacıyla çağırabilirsiniz <xref:System.ServiceModel.Channels.Message.ToString%2A> iletinin gösterimini bir dize olarak almak için yöntemi.</span><span class="sxs-lookup"><span data-stu-id="b66fa-231">For debugging purposes, you can call the <xref:System.ServiceModel.Channels.Message.ToString%2A> method to get a representation of the message as a string.</span></span> <span data-ttu-id="b66fa-232">Bu gösterim genellikle metin Kodlayıcı ile kodlanmış, XML İnsan okunabilirlik için daha iyi biçimlendirilmiş olması ancak bu bir ileti kablo görünür şekilde eşleşir.</span><span class="sxs-lookup"><span data-stu-id="b66fa-232">This representation generally matches the way a message would look on the wire if it were encoded with the text encoder, except that the XML would be better formatted for human readability.</span></span> <span data-ttu-id="b66fa-233">Bunun tek istisnası, ileti gövdesi ' dir.</span><span class="sxs-lookup"><span data-stu-id="b66fa-233">The one exception to this is the message body.</span></span> <span data-ttu-id="b66fa-234">Gövde yalnızca bir kez okuyabilir ve `ToString` ileti durumu değiştirmez.</span><span class="sxs-lookup"><span data-stu-id="b66fa-234">The body can be read only once, and `ToString` does not change the message state.</span></span> <span data-ttu-id="b66fa-235">Bu nedenle, `ToString` yöntemi gövdesi erişmek kuramamış olabilir ve ileti gövdesi yerine bir yer tutucu (örneğin, "..." veya üç nokta) yerine.</span><span class="sxs-lookup"><span data-stu-id="b66fa-235">Therefore, the `ToString` method might not be able to access the body and might substitute a placeholder (for example, "…" or three dots) instead of the message body.</span></span> <span data-ttu-id="b66fa-236">Bu nedenle, kullanmayın `ToString` ileti gövdesi içeriğini önemliyse iletilerini günlüğe kaydetmek için.</span><span class="sxs-lookup"><span data-stu-id="b66fa-236">Therefore, do not use `ToString` to log messages if the body content of the messages is important.</span></span>  
  
## <a name="accessing-other-message-parts"></a><span data-ttu-id="b66fa-237">Diğer ileti bölümleri erişme</span><span class="sxs-lookup"><span data-stu-id="b66fa-237">Accessing Other Message Parts</span></span>  
 <span data-ttu-id="b66fa-238">Çeşitli özellikler, ileti gövdesi içeriğini dışında hakkında bilgilere erişmek için sağlanır.</span><span class="sxs-lookup"><span data-stu-id="b66fa-238">Various properties are provided to access information about the message other than its body contents.</span></span> <span data-ttu-id="b66fa-239">Ancak, ileti kapatıldıktan sonra bu çağrılamaz:</span><span class="sxs-lookup"><span data-stu-id="b66fa-239">However, these cannot be called once the message has been closed:</span></span>  
  
-   <span data-ttu-id="b66fa-240"><xref:System.ServiceModel.Channels.Message.Headers%2A> Özelliği, ileti üstbilgilerini temsil eder.</span><span class="sxs-lookup"><span data-stu-id="b66fa-240">The <xref:System.ServiceModel.Channels.Message.Headers%2A> property represents the message headers.</span></span> <span data-ttu-id="b66fa-241">Bu konunun devamındaki "Üstbilgileri ile çalışma" bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="b66fa-241">See the section on "Working with Headers" later in this topic.</span></span>  
  
-   <span data-ttu-id="b66fa-242"><xref:System.ServiceModel.Channels.Message.Properties%2A> Özelliği iletisine adlandırılmış veri ileti gönderildiğinde genellikle gösterilen değil parçalarıdır ileti özelliklerini temsil eder.</span><span class="sxs-lookup"><span data-stu-id="b66fa-242">The <xref:System.ServiceModel.Channels.Message.Properties%2A> property represents the message properties, which are pieces of named data attached to the message that do not generally get emitted when the message is sent.</span></span> <span data-ttu-id="b66fa-243">Bu konunun devamındaki "Özellikler ile çalışma" bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="b66fa-243">See the section on "Working with Properties" later in this topic.</span></span>  
  
-   <span data-ttu-id="b66fa-244"><xref:System.ServiceModel.Channels.Message.Version%2A> Özelliği iletiyle ilişkilendirilmiş SOAP ve WS adresleme sürümünü gösterir veya `None` SOAP devre dışı.</span><span class="sxs-lookup"><span data-stu-id="b66fa-244">The <xref:System.ServiceModel.Channels.Message.Version%2A> property indicates the SOAP and WS-Addressing version associated with the message, or `None` if SOAP is disabled.</span></span>  
  
-   <span data-ttu-id="b66fa-245"><xref:System.ServiceModel.Channels.Message.IsFault%2A> Özelliği döndürür `true` ileti bir SOAP hatası iletisi ise.</span><span class="sxs-lookup"><span data-stu-id="b66fa-245">The <xref:System.ServiceModel.Channels.Message.IsFault%2A> property returns `true` if the message is a SOAP fault message.</span></span>  
  
-   <span data-ttu-id="b66fa-246"><xref:System.ServiceModel.Channels.Message.IsEmpty%2A> Özelliği döndürür `true` ileti boşsa.</span><span class="sxs-lookup"><span data-stu-id="b66fa-246">The <xref:System.ServiceModel.Channels.Message.IsEmpty%2A> property returns `true` if the message is empty.</span></span>  
  
 <span data-ttu-id="b66fa-247">Kullanabileceğiniz <xref:System.ServiceModel.Channels.Message.GetBodyAttribute%28System.String%2CSystem.String%29> gövde sarmalayıcı öğe üzerinde belirli bir öznitelik erişmek için yöntem (örneğin, `<soap:Body>`) belirli ad ve ad alanı tarafından tanımlanan.</span><span class="sxs-lookup"><span data-stu-id="b66fa-247">You can use the <xref:System.ServiceModel.Channels.Message.GetBodyAttribute%28System.String%2CSystem.String%29> method to access a particular attribute on the body wrapper element (for example, `<soap:Body>`) identified by a particular name and namespace.</span></span> <span data-ttu-id="b66fa-248">Bu tür bir öznitelik bulunmazsa `null` döndürülür.</span><span class="sxs-lookup"><span data-stu-id="b66fa-248">If such an attribute is not found, `null` is returned.</span></span> <span data-ttu-id="b66fa-249">Bu yöntem yalnızca çağrılabilir `Message` (ileti gövdesi yok henüz erişildikten olduğunda) oluşturulan bir durumda.</span><span class="sxs-lookup"><span data-stu-id="b66fa-249">This method can be called only when the `Message` is in the Created state (when the message body has not yet been accessed).</span></span>  
  
## <a name="working-with-headers"></a><span data-ttu-id="b66fa-250">Üst bilgileri ile çalışma</span><span class="sxs-lookup"><span data-stu-id="b66fa-250">Working with Headers</span></span>  
 <span data-ttu-id="b66fa-251">A `Message` adlı adlandırılmış XML parçaları herhangi bir sayıda içerebilir *üstbilgileri*.</span><span class="sxs-lookup"><span data-stu-id="b66fa-251">A `Message` can contain any number of named XML fragments, called *headers*.</span></span> <span data-ttu-id="b66fa-252">Her parça normalde bir SOAP üstbilgi eşler.</span><span class="sxs-lookup"><span data-stu-id="b66fa-252">Each fragment normally maps to a SOAP header.</span></span> <span data-ttu-id="b66fa-253">Üstbilgiler yoluyla erişilir `Headers` türündeki özelliği <xref:System.ServiceModel.Channels.MessageHeaders>.</span><span class="sxs-lookup"><span data-stu-id="b66fa-253">Headers are accessed through the `Headers` property of type <xref:System.ServiceModel.Channels.MessageHeaders>.</span></span> <span data-ttu-id="b66fa-254"><xref:System.ServiceModel.Channels.MessageHeaders>koleksiyonudur <xref:System.ServiceModel.Channels.MessageHeaderInfo> nesneleri ve tek tek üstbilgileri erişilebilir aracılığıyla kendi <xref:System.Collections.IEnumerable> arabirimi veya kendi dizinleyici aracılığıyla.</span><span class="sxs-lookup"><span data-stu-id="b66fa-254"><xref:System.ServiceModel.Channels.MessageHeaders> is a collection of <xref:System.ServiceModel.Channels.MessageHeaderInfo> objects, and individual headers can be accessed through its <xref:System.Collections.IEnumerable> interface or through its indexer.</span></span> <span data-ttu-id="b66fa-255">Örneğin, aşağıdaki kod tüm üstbilgilerinde adlarını listeler bir `Message`.</span><span class="sxs-lookup"><span data-stu-id="b66fa-255">For example, the following code lists the names of all the headers in a `Message`.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#8)]
 [!code-vb[C_UsingTheMessageClass#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#8)]  
  
#### <a name="adding-removing-finding-headers"></a><span data-ttu-id="b66fa-256">Ekleme, kaldırma, bulma üstbilgileri</span><span class="sxs-lookup"><span data-stu-id="b66fa-256">Adding, Removing, Finding Headers</span></span>  
 <span data-ttu-id="b66fa-257">Yeni bir üstbilgi kullanarak tüm mevcut üstbilgileri sonunda ekleyebilirsiniz <xref:System.ServiceModel.Channels.MessageHeaders.Add%2A> yöntemi.</span><span class="sxs-lookup"><span data-stu-id="b66fa-257">You can add a new header at the end of all existing headers using the <xref:System.ServiceModel.Channels.MessageHeaders.Add%2A> method.</span></span> <span data-ttu-id="b66fa-258">Kullanabileceğiniz <xref:System.ServiceModel.Channels.MessageHeaders.Insert%2A> belirli bir dizinden bir başlık eklemek için yöntem.</span><span class="sxs-lookup"><span data-stu-id="b66fa-258">You can use the <xref:System.ServiceModel.Channels.MessageHeaders.Insert%2A> method to insert a header at a particular index.</span></span> <span data-ttu-id="b66fa-259">Varolan üstbilgileri eklenen öğe için gölgeye.</span><span class="sxs-lookup"><span data-stu-id="b66fa-259">Existing headers are shifted for the inserted item.</span></span> <span data-ttu-id="b66fa-260">Üstbilgiler kendi dizini göre sıralanır ve ilk kullanılabilir dizini 0'dır.</span><span class="sxs-lookup"><span data-stu-id="b66fa-260">Headers are ordered according to their index, and the first available index is 0.</span></span> <span data-ttu-id="b66fa-261">Çeşitli kullanabilirsiniz <xref:System.ServiceModel.Channels.MessageHeaders.CopyHeadersFrom%2A> üstbilgileri farklı bir eklemek için yöntemi aşırı `Message` veya `MessageHeaders` örneği.</span><span class="sxs-lookup"><span data-stu-id="b66fa-261">You can use the various <xref:System.ServiceModel.Channels.MessageHeaders.CopyHeadersFrom%2A> method overloads to add headers from a different `Message` or `MessageHeaders` instance.</span></span> <span data-ttu-id="b66fa-262">Başkalarının bunların tümünün kopyalarken bazı aşırı tek tek tek üstbilgi kopyalayın.</span><span class="sxs-lookup"><span data-stu-id="b66fa-262">Some overloads copy one individual header, while others copy all of them.</span></span> <span data-ttu-id="b66fa-263"><xref:System.ServiceModel.Channels.MessageHeaders.Clear%2A> Yöntemi, tüm üstbilgileri kaldırır.</span><span class="sxs-lookup"><span data-stu-id="b66fa-263">The <xref:System.ServiceModel.Channels.MessageHeaders.Clear%2A> method removes all headers.</span></span> <span data-ttu-id="b66fa-264"><xref:System.ServiceModel.Channels.MessageHeaders.RemoveAt%2A> Yöntemi (tüm üstbilgileri sonra kaydırma) belirli bir dizine üstbilgi kaldırır.</span><span class="sxs-lookup"><span data-stu-id="b66fa-264">The <xref:System.ServiceModel.Channels.MessageHeaders.RemoveAt%2A> method removes a header at a particular index (shifting all headers after it).</span></span> <span data-ttu-id="b66fa-265"><xref:System.ServiceModel.Channels.MessageHeaders.RemoveAll%2A> Yöntemi, bir belirli ve ad alanına sahip tüm başlıkları kaldırır.</span><span class="sxs-lookup"><span data-stu-id="b66fa-265">The <xref:System.ServiceModel.Channels.MessageHeaders.RemoveAll%2A> method removes all headers with a particular name and namespace.</span></span>  
  
 <span data-ttu-id="b66fa-266">Kullanarak bir belirli üst bilgisi almak <xref:System.ServiceModel.Channels.MessageHeaders.FindHeader%2A> yöntemi.</span><span class="sxs-lookup"><span data-stu-id="b66fa-266">Retrieve a particular header using the <xref:System.ServiceModel.Channels.MessageHeaders.FindHeader%2A> method.</span></span> <span data-ttu-id="b66fa-267">Bu yöntem adı ve bulmak için üst bilgisi ad alanını alır ve dizinini döndürür.</span><span class="sxs-lookup"><span data-stu-id="b66fa-267">This method takes the name and namespace of the header to find, and returns its index.</span></span> <span data-ttu-id="b66fa-268">Üstbilgi birden çok kez ortaya çıkarsa, bir özel durum oluşur.</span><span class="sxs-lookup"><span data-stu-id="b66fa-268">If the header occurs more than once, an exception is thrown.</span></span> <span data-ttu-id="b66fa-269">Üstbilgi bulunmazsa -1 döndürür.</span><span class="sxs-lookup"><span data-stu-id="b66fa-269">If the header is not found, it returns -1.</span></span>  
  
 <span data-ttu-id="b66fa-270">SOAP üstbilgi modelinde üstbilgileri olabilir bir `Actor` üstbilgisinin hedeflenen alıcı belirten değer.</span><span class="sxs-lookup"><span data-stu-id="b66fa-270">In the SOAP header model, headers can have an `Actor` value that specifies the intended recipient of the header.</span></span> <span data-ttu-id="b66fa-271">En temel `FindHeader` aşırı yalnızca ileti ultimate alıcısı için hedeflenen üstbilgileri arar.</span><span class="sxs-lookup"><span data-stu-id="b66fa-271">The most basic `FindHeader` overload searches only headers intended for the ultimate receiver of the message.</span></span> <span data-ttu-id="b66fa-272">Ancak, başka bir aşırı, hangi belirtmenize olanak tanır `Actor` değerleri aramada dahil edilir.</span><span class="sxs-lookup"><span data-stu-id="b66fa-272">However, another overload enables you to specify which `Actor` values are included in the search.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="b66fa-273">SOAP belirtimi.</span><span class="sxs-lookup"><span data-stu-id="b66fa-273"> the SOAP specification.</span></span>  
  
 <span data-ttu-id="b66fa-274">A <xref:System.ServiceModel.Channels.MessageHeaders.CopyTo%28System.ServiceModel.Channels.MessageHeaderInfo%5B%5D%2CSystem.Int32%29> yöntemi sağlanan üstbilgileri kopyalamak için bir <xref:System.ServiceModel.Channels.MessageHeaders> bir dizi koleksiyona <xref:System.ServiceModel.Channels.MessageHeaderInfo> nesneleri.</span><span class="sxs-lookup"><span data-stu-id="b66fa-274">A <xref:System.ServiceModel.Channels.MessageHeaders.CopyTo%28System.ServiceModel.Channels.MessageHeaderInfo%5B%5D%2CSystem.Int32%29> method is provided to copy headers from a <xref:System.ServiceModel.Channels.MessageHeaders> collection to an array of <xref:System.ServiceModel.Channels.MessageHeaderInfo> objects.</span></span>  
  
 <span data-ttu-id="b66fa-275">Üstbilgi XML verilerine erişmek için çağırabilirsiniz <xref:System.ServiceModel.Channels.MessageHeaders.GetReaderAtHeader%2A> ve özel üstbilgi dizini için bir XML okuyucu döndür.</span><span class="sxs-lookup"><span data-stu-id="b66fa-275">To access the XML data in a header, you can call <xref:System.ServiceModel.Channels.MessageHeaders.GetReaderAtHeader%2A> and return an XML reader for the specific header index.</span></span> <span data-ttu-id="b66fa-276">Üst bilgi içeriği nesne seri durumdan istiyorsanız kullanın <xref:System.ServiceModel.Channels.MessageHeaders.GetHeader%60%601%28System.Int32%29> veya diğer aşırı yüklemeler biri.</span><span class="sxs-lookup"><span data-stu-id="b66fa-276">If you want to deserialize the header contents into an object, use <xref:System.ServiceModel.Channels.MessageHeaders.GetHeader%60%601%28System.Int32%29> or one of the other overloads.</span></span> <span data-ttu-id="b66fa-277">En temel alan aşırı kullanarak üstbilgileri seri durumdan <xref:System.Runtime.Serialization.DataContractSerializer> varsayılan olarak yapılandırılmış yolu.</span><span class="sxs-lookup"><span data-stu-id="b66fa-277">The most basic overloads deserialize headers using the <xref:System.Runtime.Serialization.DataContractSerializer> configured in the default way.</span></span> <span data-ttu-id="b66fa-278">Farklı bir seri hale getirici veya farklı bir yapılandırmasını kullanmak isteyip istemediğinizi `DataContractSerializer`, ele alan aşırı birini kullanın bir `XmlObjectSerializer`.</span><span class="sxs-lookup"><span data-stu-id="b66fa-278">If you want to use a different serializer or a different configuration of the `DataContractSerializer`, use one of the overloads that take an `XmlObjectSerializer`.</span></span> <span data-ttu-id="b66fa-279">Ayrıca üstbilgi adı, ad ve isteğe bağlı olarak bir listesini alın aşırı olan `Actor` değerleri yerine bir dizin; bu bir birleşimidir `FindHeader` ve `GetHeader`.</span><span class="sxs-lookup"><span data-stu-id="b66fa-279">There are also overloads that take the header name, namespace, and optionally a list of `Actor` values instead of an index; this is a combination of `FindHeader` and `GetHeader`.</span></span>  
  
## <a name="working-with-properties"></a><span data-ttu-id="b66fa-280">Özellikleri ile çalışma</span><span class="sxs-lookup"><span data-stu-id="b66fa-280">Working with Properties</span></span>  
 <span data-ttu-id="b66fa-281">A `Message` örneği rasgele bir rastgele türler adlandırılmış nesnelerin sayısı içerebilir.</span><span class="sxs-lookup"><span data-stu-id="b66fa-281">A `Message` instance can contain an arbitrary number of named objects of arbitrary types.</span></span> <span data-ttu-id="b66fa-282">Bu koleksiyon üzerinden erişilen `Properties` türündeki özelliği `MessageProperties`.</span><span class="sxs-lookup"><span data-stu-id="b66fa-282">This collection is accessed through the `Properties` property of type `MessageProperties`.</span></span> <span data-ttu-id="b66fa-283">Koleksiyon uygulayan <xref:System.Collections.Generic.IDictionary%602> arabirim ve eşlemeyi gibi davranır <xref:System.String> için <xref:System.Object>.</span><span class="sxs-lookup"><span data-stu-id="b66fa-283">The collection implements the <xref:System.Collections.Generic.IDictionary%602> interface and acts as a mapping from <xref:System.String> to <xref:System.Object>.</span></span> <span data-ttu-id="b66fa-284">Genellikle özellik değerlerini doğrudan ileti hattaki herhangi bir kısmını eşlemek değil, ancak bunun yerine çeşitli kanallar için çeşitli ileti işleme ipuçları sağlayan [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] kanal yığın veya <xref:System.ServiceModel.Channels.MessageHeaders.CopyTo%28System.ServiceModel.Channels.MessageHeaderInfo%5B%5D%2CSystem.Int32%29> hizmet çerçevesi.</span><span class="sxs-lookup"><span data-stu-id="b66fa-284">Normally, property values do not map directly to any part of the message on the wire, but rather provide various message processing hints to the various channels in the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] channel stack or to the <xref:System.ServiceModel.Channels.MessageHeaders.CopyTo%28System.ServiceModel.Channels.MessageHeaderInfo%5B%5D%2CSystem.Int32%29> service framework.</span></span> <span data-ttu-id="b66fa-285">Bir örnek için bkz: [veri aktarımına mimari genel bakış](../../../../docs/framework/wcf/feature-details/data-transfer-architectural-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b66fa-285">For an example, see [Data Transfer Architectural Overview](../../../../docs/framework/wcf/feature-details/data-transfer-architectural-overview.md).</span></span>  
  
## <a name="inheriting-from-the-message-class"></a><span data-ttu-id="b66fa-286">İleti sınıfından devralma</span><span class="sxs-lookup"><span data-stu-id="b66fa-286">Inheriting from the Message Class</span></span>  
 <span data-ttu-id="b66fa-287">Yerleşik türler kullanılarak oluşturulan olursa `CreateMessage` değil gereksinimlerinizi karşılayacak, türeyen bir sınıf oluşturun `Message` sınıfı.</span><span class="sxs-lookup"><span data-stu-id="b66fa-287">If the built-in message types created using `CreateMessage` do not meet your requirements, create a class that derives from the `Message` class.</span></span>  
  
### <a name="defining-the-message-body-contents"></a><span data-ttu-id="b66fa-288">İleti gövdesi içeriğini tanımlama</span><span class="sxs-lookup"><span data-stu-id="b66fa-288">Defining the Message Body Contents</span></span>  
 <span data-ttu-id="b66fa-289">Üç birincil teknikleri mevcut bir ileti gövdesi içinde verilerine erişmek için: yazma, okuma ve bir arabelleğine kopyalanıyor.</span><span class="sxs-lookup"><span data-stu-id="b66fa-289">Three primary techniques exist for accessing data within a message body: writing, reading, and copying it to a buffer.</span></span> <span data-ttu-id="b66fa-290">Bu işlemler sonuçta neden <xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%2A>, <xref:System.ServiceModel.Channels.Message.OnGetReaderAtBodyContents%2A>, ve <xref:System.ServiceModel.Channels.Message.OnCreateBufferedCopy%2A> , sırasıyla türetilmiş sınıfınız çağrılan yöntemler `Message`.</span><span class="sxs-lookup"><span data-stu-id="b66fa-290">These operations ultimately result in the <xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%2A>, <xref:System.ServiceModel.Channels.Message.OnGetReaderAtBodyContents%2A>, and <xref:System.ServiceModel.Channels.Message.OnCreateBufferedCopy%2A> methods being called, respectively, on your derived class of `Message`.</span></span> <span data-ttu-id="b66fa-291">Temel `Message` sınıfı garanti bu yöntemlerden sadece birini her biri için çağrılır `Message` örneği ve onu birden çok kez çağrılmaz olduğunu.</span><span class="sxs-lookup"><span data-stu-id="b66fa-291">The base `Message` class guarantees that only one of these methods is called for each `Message` instance, and that it is not called more than once.</span></span> <span data-ttu-id="b66fa-292">Taban sınıfı, aynı zamanda kapatılan bir mesaj yöntemleri adlı değil sağlar.</span><span class="sxs-lookup"><span data-stu-id="b66fa-292">The base class also ensures that the methods are not called on a closed message.</span></span> <span data-ttu-id="b66fa-293">Uygulamanızda ileti durumunu izlemek için gerek yoktur.</span><span class="sxs-lookup"><span data-stu-id="b66fa-293">There is no need to track the message state in your implementation.</span></span>  
  
 <span data-ttu-id="b66fa-294"><xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%2A>soyut bir yöntemdir ve uygulanması gerekir.</span><span class="sxs-lookup"><span data-stu-id="b66fa-294"><xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%2A> is an abstract method and must be implemented.</span></span> <span data-ttu-id="b66fa-295">İleti gövdesi içeriğini tanımlamak için en basit yolu, bu yöntemi kullanarak yazmaktır.</span><span class="sxs-lookup"><span data-stu-id="b66fa-295">The most basic way to define the body contents of your message is to write using this method.</span></span> <span data-ttu-id="b66fa-296">Örneğin, aşağıdaki iletiyi 1'den 100.000 rastgele sayılar 20 içerir.</span><span class="sxs-lookup"><span data-stu-id="b66fa-296">For example, the following message contains 100,000 random numbers from 1 to 20.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#9](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#9)]
 [!code-vb[C_UsingTheMessageClass#9](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#9)]  
  
 <span data-ttu-id="b66fa-297">`OnGetReaderAtBodyContents` Ve `OnCreateBufferedCopy` yöntemleri için çoğu durumda iş varsayılan uygulamaları vardır.</span><span class="sxs-lookup"><span data-stu-id="b66fa-297">The `OnGetReaderAtBodyContents` and `OnCreateBufferedCopy` methods have default implementations that work for most cases.</span></span> <span data-ttu-id="b66fa-298">Varsayılan uygulamaları çağrısı `OnWriteBodyContents`sonuçları arabellek ve iş ile elde edilen arabellek.</span><span class="sxs-lookup"><span data-stu-id="b66fa-298">The default implementations call `OnWriteBodyContents`, buffer the results, and work with the resulting buffer.</span></span> <span data-ttu-id="b66fa-299">Ancak, bazı durumlarda bu yeterli olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="b66fa-299">However, in some cases this may not be enough.</span></span> <span data-ttu-id="b66fa-300">Önceki örnekte arzu olmayabilir arabelleğe alınan 100.000 XML öğelerinin ileti sonuçlarında okunuyor.</span><span class="sxs-lookup"><span data-stu-id="b66fa-300">In the preceding example, reading the message results in 100,000 XML elements being buffered, which might not be desirable.</span></span> <span data-ttu-id="b66fa-301">Geçersiz kılma isteyebilirsiniz `OnGetReaderAtBodyContents` özel döndürülecek `XmlDictionaryReader` türetilen rastgele sayıları yukarı hizmet sınıfı.</span><span class="sxs-lookup"><span data-stu-id="b66fa-301">You might want to override `OnGetReaderAtBodyContents` to return a custom `XmlDictionaryReader` derived class that serves up random numbers.</span></span> <span data-ttu-id="b66fa-302">Daha sonra geçersiz `OnWriteBodyContents` okuyucu kullanmak için `OnGetReaderAtBodyContents` özelliği döndürür, aşağıdaki örnekte gösterildiği gibi.</span><span class="sxs-lookup"><span data-stu-id="b66fa-302">You can then override `OnWriteBodyContents` to use the reader that the `OnGetReaderAtBodyContents` property returns, as shown in the following example.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#10)]
 [!code-vb[C_UsingTheMessageClass#10](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#10)]  
  
 <span data-ttu-id="b66fa-303">Benzer şekilde, geçersiz kılmak istediğiniz durumlarda `OnCreateBufferedCopy` kendi döndürülecek `MessageBuffer` türetilmiş sınıf.</span><span class="sxs-lookup"><span data-stu-id="b66fa-303">Similarly, you might want to override `OnCreateBufferedCopy` to return your own `MessageBuffer` derived class.</span></span>  
  
 <span data-ttu-id="b66fa-304">İleti gövdesi içeriğini sağlamanın yanı sıra, türetilen ileti sınıfı ayrıca geçersiz kılmanız gerekir `Version`, `Headers`, ve `Properties` özellikleri.</span><span class="sxs-lookup"><span data-stu-id="b66fa-304">In addition to providing message body contents, your message derived class must also override the `Version`, `Headers`, and `Properties` properties.</span></span>  
  
 <span data-ttu-id="b66fa-305">Bir iletinin bir kopyasını oluşturursanız, kopya özgün ileti üstbilgileri kullandığına dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="b66fa-305">Note that if you create a copy of a message, the copy uses the message headers from the original.</span></span>  
  
### <a name="other-members-that-can-be-overridden"></a><span data-ttu-id="b66fa-306">Geçersiz kılınabilir diğer üyeleri</span><span class="sxs-lookup"><span data-stu-id="b66fa-306">Other Members that Can Be Overridden</span></span>  
 <span data-ttu-id="b66fa-307">Geçersiz kılabilirsiniz <xref:System.ServiceModel.Channels.Message.OnWriteStartEnvelope%2A>, <xref:System.ServiceModel.Channels.Message.OnWriteStartHeaders%2A>, ve <xref:System.ServiceModel.Channels.Message.OnWriteStartBody%2A> nasıl SOAP Zarfı, SOAP üstbilgileri ve SOAP gövdesi öğesi başlangıç etiketleri belirtmek için yöntemlerini yazılır. Bunlar normalde karşılık `<soap:Envelope>`, `<soap:Header>`, ve `<soap:Body>`.</span><span class="sxs-lookup"><span data-stu-id="b66fa-307">You can override the <xref:System.ServiceModel.Channels.Message.OnWriteStartEnvelope%2A>, <xref:System.ServiceModel.Channels.Message.OnWriteStartHeaders%2A>, and <xref:System.ServiceModel.Channels.Message.OnWriteStartBody%2A> methods to specify how the SOAP envelope, SOAP headers, and SOAP body element start tags are written out. These normally correspond to `<soap:Envelope>`, `<soap:Header>`, and `<soap:Body>`.</span></span> <span data-ttu-id="b66fa-308">Bu yöntemler IF şeyi yazması gerektiğini normalde `Version` özelliği döndürür `MessageVersion.None`.</span><span class="sxs-lookup"><span data-stu-id="b66fa-308">These methods should normally not write anything out if the `Version` property returns `MessageVersion.None`.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b66fa-309">Varsayılan uygulaması `OnGetReaderAtBodyContents` çağrıları `OnWriteStartEnvelope` ve `OnWriteStartBody` çağırmadan önce `OnWriteBodyContents` ve sonuçları arabelleğe alma.</span><span class="sxs-lookup"><span data-stu-id="b66fa-309">The default implementation of `OnGetReaderAtBodyContents` calls `OnWriteStartEnvelope` and `OnWriteStartBody` before calling `OnWriteBodyContents` and buffering the results.</span></span> <span data-ttu-id="b66fa-310">Üstbilgiler yazılmaz.</span><span class="sxs-lookup"><span data-stu-id="b66fa-310">Headers are not written out.</span></span>  
  
 <span data-ttu-id="b66fa-311">Geçersiz kılma <xref:System.ServiceModel.Channels.Message.OnWriteMessage%2A> kendi yapıları tüm ileti yapılandırılmıştır şeklini değiştirmek için yöntem.</span><span class="sxs-lookup"><span data-stu-id="b66fa-311">Override the <xref:System.ServiceModel.Channels.Message.OnWriteMessage%2A> method to change the way the entire message is constructed from its various pieces.</span></span> <span data-ttu-id="b66fa-312">`OnWriteMessage` Yöntemi çağrılır <xref:System.ServiceModel.Channels.Message.WriteMessage%2A> ve varsayılan <xref:System.ServiceModel.Channels.Message.OnCreateBufferedCopy%2A> uygulaması.</span><span class="sxs-lookup"><span data-stu-id="b66fa-312">The `OnWriteMessage` method is called from <xref:System.ServiceModel.Channels.Message.WriteMessage%2A> and from the default <xref:System.ServiceModel.Channels.Message.OnCreateBufferedCopy%2A> implementation.</span></span> <span data-ttu-id="b66fa-313">Bu geçersiz kılma Not <xref:System.ServiceModel.Channels.Message.WriteMessage%2A> en iyi yöntem değildir.</span><span class="sxs-lookup"><span data-stu-id="b66fa-313">Note that overriding <xref:System.ServiceModel.Channels.Message.WriteMessage%2A> is not a best practice.</span></span> <span data-ttu-id="b66fa-314">Uygun geçersiz kılmak iyidir `On` yöntemleri (örneğin, <xref:System.ServiceModel.Channels.Message.OnWriteStartEnvelope%2A>, <xref:System.ServiceModel.Channels.Message.OnWriteStartHeaders%2A>, ve <xref:System.ServiceModel.Channels.BodyWriter.OnWriteBodyContents%2A>.</span><span class="sxs-lookup"><span data-stu-id="b66fa-314">It is better to override the appropriate `On` methods (for example, <xref:System.ServiceModel.Channels.Message.OnWriteStartEnvelope%2A>, <xref:System.ServiceModel.Channels.Message.OnWriteStartHeaders%2A>, and <xref:System.ServiceModel.Channels.BodyWriter.OnWriteBodyContents%2A>.</span></span>  
  
 <span data-ttu-id="b66fa-315">Geçersiz kılma <xref:System.ServiceModel.Channels.Message.OnBodyToString%2A> , ileti gövdesi hata ayıklama sırasında nasıl temsil geçersiz kılmak için.</span><span class="sxs-lookup"><span data-stu-id="b66fa-315">Override <xref:System.ServiceModel.Channels.Message.OnBodyToString%2A> to override how your message body is represented during debugging.</span></span> <span data-ttu-id="b66fa-316">Üç nokta temsil eder ("...") varsayılandır.</span><span class="sxs-lookup"><span data-stu-id="b66fa-316">The default is to represent it as three dots ("…").</span></span> <span data-ttu-id="b66fa-317">İleti durumu kapalı dışında bir şey olduğunda bu yöntem birden çok kez çağrılamaz unutmayın.</span><span class="sxs-lookup"><span data-stu-id="b66fa-317">Note that this method can be called multiple times when the message state is anything other than Closed.</span></span> <span data-ttu-id="b66fa-318">Bu yöntemin bir uygulaması, hiçbir zaman (örneğin, yalnızca ileri akışından okuma) yalnızca bir kez gerçekleştirilmesi gereken herhangi bir eylem neden olmaz.</span><span class="sxs-lookup"><span data-stu-id="b66fa-318">An implementation of this method should never cause any action that must be performed only once (such as reading from a forward-only stream).</span></span>  
  
 <span data-ttu-id="b66fa-319">Geçersiz kılma <xref:System.ServiceModel.Channels.Message.OnGetBodyAttribute%2A> SOAP gövdesi öğede öznitelikleri erişmesine izin vermek için yöntem.</span><span class="sxs-lookup"><span data-stu-id="b66fa-319">Override the <xref:System.ServiceModel.Channels.Message.OnGetBodyAttribute%2A> method to allow access to attributes on the SOAP body element.</span></span> <span data-ttu-id="b66fa-320">Bu yöntem herhangi bir sayıda kez çağrılabilir ancak `Message` temel türü ileti oluşturulan durumda olduğunda, yalnızca çağrıldığından emin güvence altına alır.</span><span class="sxs-lookup"><span data-stu-id="b66fa-320">This method can be called any number of times, but the `Message` base type guarantees that it is only called when the message is in the Created state.</span></span> <span data-ttu-id="b66fa-321">Bir uygulama durumunda denetlemek için gerekli değildir.</span><span class="sxs-lookup"><span data-stu-id="b66fa-321">It is not required to check the state in an implementation.</span></span> <span data-ttu-id="b66fa-322">Varsayılan uygulama her zaman döndürür `null`, gövde öğede özniteliklere olduğunu gösterir.</span><span class="sxs-lookup"><span data-stu-id="b66fa-322">The default implementation always returns `null`, which indicates that there are no attributes on the body element.</span></span>  
  
 <span data-ttu-id="b66fa-323">Varsa, `Message` nesne, tüm özel temizleme gerçekleştirmelisiniz, ileti gövdesi artık gerekli olmadığında, geçersiz kılabilirsiniz <xref:System.ServiceModel.Channels.Message.OnClose%2A>.</span><span class="sxs-lookup"><span data-stu-id="b66fa-323">If your `Message` object must do any special cleanup when the message body is no longer required, you can override <xref:System.ServiceModel.Channels.Message.OnClose%2A>.</span></span> <span data-ttu-id="b66fa-324">Varsayılan uygulama hiçbir şey yapmaz.</span><span class="sxs-lookup"><span data-stu-id="b66fa-324">The default implementation does nothing.</span></span>  
  
 <span data-ttu-id="b66fa-325">`IsEmpty` Ve `IsFault` özellikleri geçersiz.</span><span class="sxs-lookup"><span data-stu-id="b66fa-325">The `IsEmpty` and `IsFault` properties can be overridden.</span></span> <span data-ttu-id="b66fa-326">Varsayılan olarak, her ikisi de dönmek `false`.</span><span class="sxs-lookup"><span data-stu-id="b66fa-326">By default, both return `false`.</span></span>
