---
title: 'Nasıl yapılır: Federe Bir Hizmette Kimlik Bilgilerini Yapılandırma'
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF, federation
- federation
ms.assetid: 149ab165-0ef3-490a-83a9-4322a07bd98a
ms.openlocfilehash: 05f35bbb7dbb34cd4067c407578038cbb4eff70f
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 06/09/2020
ms.locfileid: "84599151"
---
# <a name="how-to-configure-credentials-on-a-federation-service"></a><span data-ttu-id="45c9d-102">Nasıl yapılır: Federe Bir Hizmette Kimlik Bilgilerini Yapılandırma</span><span class="sxs-lookup"><span data-stu-id="45c9d-102">How to: Configure Credentials on a Federation Service</span></span>
<span data-ttu-id="45c9d-103">Windows Communication Foundation (WCF) ' de, Federasyon hizmeti oluşturmak aşağıdaki ana yordamlardan oluşur:</span><span class="sxs-lookup"><span data-stu-id="45c9d-103">In Windows Communication Foundation (WCF), creating a federated service consists of the following main procedures:</span></span>  
  
1. <span data-ttu-id="45c9d-104"><xref:System.ServiceModel.WSFederationHttpBinding>Veya benzer bir özel bağlamayı yapılandırma.</span><span class="sxs-lookup"><span data-stu-id="45c9d-104">Configuring a <xref:System.ServiceModel.WSFederationHttpBinding> or similar custom binding.</span></span> <span data-ttu-id="45c9d-105">Uygun bağlama oluşturma hakkında daha fazla bilgi için bkz. [nasıl yapılır: oluşturma WSFederationHttpBinding](how-to-create-a-wsfederationhttpbinding.md).</span><span class="sxs-lookup"><span data-stu-id="45c9d-105">For more information about creating an appropriate binding, see [How to: Create a WSFederationHttpBinding](how-to-create-a-wsfederationhttpbinding.md).</span></span>  
  
2. <span data-ttu-id="45c9d-106"><xref:System.ServiceModel.Security.IssuedTokenServiceCredential>Hizmet için sunulan verilen belirteçlerin nasıl doğrulandığını denetleyen öğesini yapılandırma.</span><span class="sxs-lookup"><span data-stu-id="45c9d-106">Configuring the <xref:System.ServiceModel.Security.IssuedTokenServiceCredential> that controls how issued tokens presented to the service are authenticated.</span></span>  
  
 <span data-ttu-id="45c9d-107">Bu konu, İkinci adımla ilgili ayrıntıları sağlar.</span><span class="sxs-lookup"><span data-stu-id="45c9d-107">This topic provides details about the second step.</span></span> <span data-ttu-id="45c9d-108">Federe bir hizmetin nasıl çalıştığı hakkında daha fazla bilgi için bkz. [Federasyon](federation.md).</span><span class="sxs-lookup"><span data-stu-id="45c9d-108">For more information about how a federated service works, see [Federation](federation.md).</span></span>  
  
### <a name="to-set-the-properties-of-issuedtokenservicecredential-in-code"></a><span data-ttu-id="45c9d-109">Koddaki IssuedTokenServiceCredential özelliklerini ayarlamak için</span><span class="sxs-lookup"><span data-stu-id="45c9d-109">To set the properties of IssuedTokenServiceCredential in code</span></span>  
  
1. <span data-ttu-id="45c9d-110"><xref:System.ServiceModel.Description.ServiceCredentials.IssuedTokenAuthentication%2A> <xref:System.ServiceModel.Description.ServiceCredentials> Bir örneğe başvuru döndürmek için sınıfının özelliğini kullanın <xref:System.ServiceModel.Security.IssuedTokenServiceCredential> .</span><span class="sxs-lookup"><span data-stu-id="45c9d-110">Use the <xref:System.ServiceModel.Description.ServiceCredentials.IssuedTokenAuthentication%2A> property of the <xref:System.ServiceModel.Description.ServiceCredentials> class to return a reference to an <xref:System.ServiceModel.Security.IssuedTokenServiceCredential> instance.</span></span> <span data-ttu-id="45c9d-111">Özelliğine, <xref:System.ServiceModel.ServiceHostBase.Credentials%2A> sınıfının özelliğinden erişilir <xref:System.ServiceModel.ServiceHostBase> .</span><span class="sxs-lookup"><span data-stu-id="45c9d-111">The property is accessed from the <xref:System.ServiceModel.ServiceHostBase.Credentials%2A> property of the <xref:System.ServiceModel.ServiceHostBase> class.</span></span>  
  
2. <span data-ttu-id="45c9d-112">, <xref:System.ServiceModel.Security.IssuedTokenServiceCredential.AllowUntrustedRsaIssuers%2A> `true` CardSpace kartları gibi kendi kendine verilen belirteçlerin kimlik doğrulamasından geçirilme özelliğini olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="45c9d-112">Set the <xref:System.ServiceModel.Security.IssuedTokenServiceCredential.AllowUntrustedRsaIssuers%2A> property to `true` if self-issued tokens such as CardSpace cards are to be authenticated.</span></span> <span data-ttu-id="45c9d-113">Varsayılan değer: `false`.</span><span class="sxs-lookup"><span data-stu-id="45c9d-113">The default is `false`.</span></span>  
  
3. <span data-ttu-id="45c9d-114">Özelliği tarafından döndürülen koleksiyonu <xref:System.ServiceModel.Security.IssuedTokenServiceCredential.KnownCertificates%2A> sınıfının örnekleriyle doldurun <xref:System.Security.Cryptography.X509Certificates.X509Certificate2> .</span><span class="sxs-lookup"><span data-stu-id="45c9d-114">Populate the collection returned by the <xref:System.ServiceModel.Security.IssuedTokenServiceCredential.KnownCertificates%2A> property with instances of the <xref:System.Security.Cryptography.X509Certificates.X509Certificate2> class.</span></span> <span data-ttu-id="45c9d-115">Her örnek, hizmetin, belirteçlerin kimliğini doğrulayabileceği bir veren temsil eder.</span><span class="sxs-lookup"><span data-stu-id="45c9d-115">Each instance represents an issuer from which the service will authenticate tokens.</span></span>  
  
    > [!NOTE]
    > <span data-ttu-id="45c9d-116">Özelliği tarafından döndürülen istemci tarafı koleksiyonun aksine <xref:System.ServiceModel.Security.X509CertificateRecipientClientCredential.ScopedCertificates%2A> , bilinen sertifikalar koleksiyonu bir anahtarlı koleksiyon değildir.</span><span class="sxs-lookup"><span data-stu-id="45c9d-116">Unlike the client-side collection returned by the <xref:System.ServiceModel.Security.X509CertificateRecipientClientCredential.ScopedCertificates%2A> property, the known certificates collection is not a keyed collection.</span></span> <span data-ttu-id="45c9d-117">Hizmet, verilen belirteci içeren iletiyi gönderen istemcinin adresine bakılmaksızın belirtilen sertifikaların (Bu konunun ilerleyen kısımlarında açıklanan diğer kısıtlamalara bağlı olarak) ilgili belirteçleri kabul eder.</span><span class="sxs-lookup"><span data-stu-id="45c9d-117">The service accepts the tokens that the specified certificates issue regardless of the address of the client that sent the message containing the issued token (subject to the further constraints, which are described later in this topic).</span></span>  
  
4. <span data-ttu-id="45c9d-118"><xref:System.ServiceModel.Security.IssuedTokenServiceCredential.CertificateValidationMode%2A>Özelliğini <xref:System.ServiceModel.Security.X509CertificateValidationMode> sabit listesi değerlerinden birine ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="45c9d-118">Set the <xref:System.ServiceModel.Security.IssuedTokenServiceCredential.CertificateValidationMode%2A> property to one of the <xref:System.ServiceModel.Security.X509CertificateValidationMode> enumeration values.</span></span> <span data-ttu-id="45c9d-119">Bu, yalnızca kodda yapılabilir.</span><span class="sxs-lookup"><span data-stu-id="45c9d-119">This can be done only in code.</span></span> <span data-ttu-id="45c9d-120">Varsayılan değer: <xref:System.IdentityModel.Selectors.X509CertificateValidator.ChainTrust%2A>.</span><span class="sxs-lookup"><span data-stu-id="45c9d-120">The default is <xref:System.IdentityModel.Selectors.X509CertificateValidator.ChainTrust%2A>.</span></span>  
  
5. <span data-ttu-id="45c9d-121"><xref:System.ServiceModel.Security.IssuedTokenServiceCredential.CertificateValidationMode%2A>Özelliği olarak ayarlandıysa <xref:System.ServiceModel.Security.X509CertificateValidationMode.Custom> , özelliğine özel sınıfın bir örneğini atayın <xref:System.IdentityModel.Selectors.X509CertificateValidator> <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication.CustomCertificateValidator%2A> .</span><span class="sxs-lookup"><span data-stu-id="45c9d-121">If the <xref:System.ServiceModel.Security.IssuedTokenServiceCredential.CertificateValidationMode%2A> property is set to <xref:System.ServiceModel.Security.X509CertificateValidationMode.Custom>, then assign an instance of the custom <xref:System.IdentityModel.Selectors.X509CertificateValidator> class to the <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication.CustomCertificateValidator%2A> property.</span></span>  
  
6. <span data-ttu-id="45c9d-122"><xref:System.ServiceModel.Security.IssuedTokenServiceCredential.CertificateValidationMode%2A>Veya olarak ayarlandıysa `ChainTrust` `PeerOrChainTrust` , <xref:System.ServiceModel.Security.IssuedTokenServiceCredential.RevocationMode%2A> özelliği Numaralandırmadaki uygun bir değere ayarlayın <xref:System.Security.Cryptography.X509Certificates.X509RevocationMode> .</span><span class="sxs-lookup"><span data-stu-id="45c9d-122">If the <xref:System.ServiceModel.Security.IssuedTokenServiceCredential.CertificateValidationMode%2A> is set to `ChainTrust` or `PeerOrChainTrust`, set the <xref:System.ServiceModel.Security.IssuedTokenServiceCredential.RevocationMode%2A> property to an appropriate value from the <xref:System.Security.Cryptography.X509Certificates.X509RevocationMode> enumeration.</span></span> <span data-ttu-id="45c9d-123">İptal modunun `PeerTrust` veya doğrulama modlarında kullanılmadığını unutmayın `Custom` .</span><span class="sxs-lookup"><span data-stu-id="45c9d-123">Note that the revocation mode is not used in `PeerTrust` or `Custom` validation modes.</span></span>  
  
7. <span data-ttu-id="45c9d-124">Gerekirse, özelliğe özel bir sınıfın bir örneğini atayın <xref:System.IdentityModel.Tokens.SamlSerializer> <xref:System.ServiceModel.Security.IssuedTokenServiceCredential.SamlSerializer%2A> .</span><span class="sxs-lookup"><span data-stu-id="45c9d-124">If needed, assign an instance of a custom <xref:System.IdentityModel.Tokens.SamlSerializer> class to the <xref:System.ServiceModel.Security.IssuedTokenServiceCredential.SamlSerializer%2A> property.</span></span> <span data-ttu-id="45c9d-125">Özel bir güvenlik onaylama işlemi biçimlendirme dili (SAML) seri hale getirici, örneğin özel SAML onayları ayrıştırılırken gereklidir.</span><span class="sxs-lookup"><span data-stu-id="45c9d-125">A custom Security Assertions Markup Language (SAML) serializer is needed, for example, for parsing custom SAML assertions.</span></span>  
  
### <a name="to-set-the-properties-of-issuedtokenservicecredential-in-configuration"></a><span data-ttu-id="45c9d-126">Yapılandırmada IssuedTokenServiceCredential özelliklerini ayarlamak için</span><span class="sxs-lookup"><span data-stu-id="45c9d-126">To set the properties of IssuedTokenServiceCredential in configuration</span></span>  
  
1. <span data-ttu-id="45c9d-127">Bir `<issuedTokenAuthentication>` <> öğesinin alt öğesi olarak bir öğe oluşturun `serviceCredentials` .</span><span class="sxs-lookup"><span data-stu-id="45c9d-127">Create an `<issuedTokenAuthentication>` element as a child of a <`serviceCredentials`> element.</span></span>  
  
2. <span data-ttu-id="45c9d-128">`allowUntrustedRsaIssuers` `<issuedTokenAuthentication>` `true` Bir CardSpace kartı gibi bir otomatik olarak verilen belirtecin kimliği doğrulanmışsa, öğesinin özniteliğini olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="45c9d-128">Set the `allowUntrustedRsaIssuers` attribute of the `<issuedTokenAuthentication>` element to `true` if authenticating a self-issued token, such as a CardSpace card.</span></span>  
  
3. <span data-ttu-id="45c9d-129">Öğesinin `<knownCertificates>` alt öğesi olarak bir öğe oluşturun `<issuedTokenAuthentication>` .</span><span class="sxs-lookup"><span data-stu-id="45c9d-129">Create a `<knownCertificates>` element as a child of the `<issuedTokenAuthentication>` element.</span></span>  
  
4. <span data-ttu-id="45c9d-130">`<add>`Öğesinin alt öğesi olarak sıfır veya daha fazla öğe oluşturun `<knownCertificates>` ve,,, `storeLocation` `storeName` `x509FindType` ve `findValue` özniteliklerini kullanarak sertifikayı bulmayı belirtin.</span><span class="sxs-lookup"><span data-stu-id="45c9d-130">Create zero or more `<add>` elements as children of the `<knownCertificates>` element, and specify how to locate the certificate using the `storeLocation`, `storeName`, `x509FindType`, and `findValue` attributes.</span></span>  
  
5. <span data-ttu-id="45c9d-131">Gerekirse, `samlSerializer` <`issuedTokenAuthentication`> öğesinin özniteliğini özel sınıfın tür adı olarak ayarlayın <xref:System.IdentityModel.Tokens.SamlSerializer> .</span><span class="sxs-lookup"><span data-stu-id="45c9d-131">If necessary, set the `samlSerializer` attribute of the <`issuedTokenAuthentication`> element to the type name of the custom <xref:System.IdentityModel.Tokens.SamlSerializer> class.</span></span>  
  
## <a name="example"></a><span data-ttu-id="45c9d-132">Örnek</span><span class="sxs-lookup"><span data-stu-id="45c9d-132">Example</span></span>  
 <span data-ttu-id="45c9d-133">Aşağıdaki örnek, bir içinde kodunun özelliklerini ayarlar <xref:System.ServiceModel.Security.IssuedTokenServiceCredential> .</span><span class="sxs-lookup"><span data-stu-id="45c9d-133">The following example sets the properties of an <xref:System.ServiceModel.Security.IssuedTokenServiceCredential> in code.</span></span>  
  
 [!code-csharp[C_FederatedService#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_federatedservice/cs/source.cs#2)]
 [!code-vb[C_FederatedService#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_federatedservice/vb/source.vb#2)]  
  
 <span data-ttu-id="45c9d-134">Bir Federasyon hizmetinin bir istemcinin kimliğini doğrulayabilmesi için, verilen belirteç ile ilgili olarak aşağıdakilerin doğru olması gerekir:</span><span class="sxs-lookup"><span data-stu-id="45c9d-134">In order for a federated service to authenticate a client, the following must be true about the issued token:</span></span>  
  
- <span data-ttu-id="45c9d-135">Verilen belirtecin dijital imzası bir RSA güvenlik anahtarı tanımlayıcısı kullandığında, <xref:System.ServiceModel.Security.IssuedTokenServiceCredential.AllowUntrustedRsaIssuers%2A> özelliği olmalıdır `true` .</span><span class="sxs-lookup"><span data-stu-id="45c9d-135">When the issued token’s digital signature uses an RSA security key identifier, the <xref:System.ServiceModel.Security.IssuedTokenServiceCredential.AllowUntrustedRsaIssuers%2A> property must be `true`.</span></span>  
  
- <span data-ttu-id="45c9d-136">Verilen belirtecin imzası bir X. 509.952 Issuer seri numarası, X. 509.952 konu anahtarı tanımlayıcısı veya X. 509.952 parmak izi güvenlik tanımlayıcısı kullandığında, verilen belirtecin, sınıfının özelliği tarafından döndürülen koleksiyondaki bir sertifika tarafından imzalanması gerekir <xref:System.ServiceModel.Security.IssuedTokenServiceCredential.KnownCertificates%2A> <xref:System.ServiceModel.Security.IssuedTokenServiceCredential> .</span><span class="sxs-lookup"><span data-stu-id="45c9d-136">When the issued token’s signature uses an X.509 issuer serial number, X.509 subject key identifier, or X.509 thumbprint security identifier, the issued token must be signed by a certificate in the collection returned by the <xref:System.ServiceModel.Security.IssuedTokenServiceCredential.KnownCertificates%2A> property of the <xref:System.ServiceModel.Security.IssuedTokenServiceCredential> class.</span></span>  
  
- <span data-ttu-id="45c9d-137">Verilen belirteç bir X. 509.952 sertifikası kullanılarak imzalanmışsa, sertifikanın <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication.CertificateValidationMode%2A> bağlı olan tarafa bir <xref:System.IdentityModel.Tokens.X509RawDataKeyIdentifierClause> veya özelliğinden alınmış olmasına bakılmaksızın, sertifikanın, özelliğin değeri ile belirtilen semantiğe göre doğrulanması gerekir <xref:System.ServiceModel.Security.IssuedTokenServiceCredential.KnownCertificates%2A> .</span><span class="sxs-lookup"><span data-stu-id="45c9d-137">When the issued token is signed using an X.509 certificate, the certificate must validate per the semantics specified by the value of the <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication.CertificateValidationMode%2A> property, regardless of whether the certificate was sent to the relying party as a <xref:System.IdentityModel.Tokens.X509RawDataKeyIdentifierClause> or was obtained from the <xref:System.ServiceModel.Security.IssuedTokenServiceCredential.KnownCertificates%2A> property.</span></span> <span data-ttu-id="45c9d-138">X. 509.440 sertifika doğrulaması hakkında daha fazla bilgi için bkz. [sertifikalarla çalışma](working-with-certificates.md).</span><span class="sxs-lookup"><span data-stu-id="45c9d-138">For more information about X.509 certificate validation, see [Working with Certificates](working-with-certificates.md).</span></span>  
  
 <span data-ttu-id="45c9d-139">Örneğin, öğesini olarak ayarlamak <xref:System.ServiceModel.Security.IssuedTokenServiceCredential.CertificateValidationMode%2A> , <xref:System.ServiceModel.Security.X509CertificateValidationMode.PeerTrust> imza sertifikası sertifika deposunda olan verilen belirtecin kimliğini doğrular `TrustedPeople` .</span><span class="sxs-lookup"><span data-stu-id="45c9d-139">For example, setting the <xref:System.ServiceModel.Security.IssuedTokenServiceCredential.CertificateValidationMode%2A> to <xref:System.ServiceModel.Security.X509CertificateValidationMode.PeerTrust> would authenticate any issued token whose signing certificate is in the `TrustedPeople` certificate store.</span></span> <span data-ttu-id="45c9d-140">Bu durumda, <xref:System.ServiceModel.Security.IssuedTokenServiceCredential.TrustedStoreLocation%2A> özelliğini ya da olarak ayarlayın <xref:System.Security.Cryptography.X509Certificates.StoreLocation.CurrentUser> <xref:System.Security.Cryptography.X509Certificates.StoreLocation.LocalMachine> .</span><span class="sxs-lookup"><span data-stu-id="45c9d-140">In that case, set the <xref:System.ServiceModel.Security.IssuedTokenServiceCredential.TrustedStoreLocation%2A> property to either <xref:System.Security.Cryptography.X509Certificates.StoreLocation.CurrentUser> or <xref:System.Security.Cryptography.X509Certificates.StoreLocation.LocalMachine>.</span></span> <span data-ttu-id="45c9d-141">Dahil olmak üzere diğer modları seçebilirsiniz <xref:System.ServiceModel.Security.X509CertificateValidationMode.Custom> .</span><span class="sxs-lookup"><span data-stu-id="45c9d-141">You can select other modes, including <xref:System.ServiceModel.Security.X509CertificateValidationMode.Custom>.</span></span> <span data-ttu-id="45c9d-142">Seçildiğinde `Custom` , özelliğine sınıfının bir örneğini atamanız gerekir <xref:System.IdentityModel.Selectors.X509CertificateValidator> <xref:System.ServiceModel.Security.IssuedTokenServiceCredential.CustomCertificateValidator%2A> .</span><span class="sxs-lookup"><span data-stu-id="45c9d-142">When `Custom` is selected, you must assign an instance of the <xref:System.IdentityModel.Selectors.X509CertificateValidator> class to the <xref:System.ServiceModel.Security.IssuedTokenServiceCredential.CustomCertificateValidator%2A> property.</span></span> <span data-ttu-id="45c9d-143">Özel Doğrulayıcı, beğendiğini herhangi bir ölçüt kullanarak sertifikaları doğrulayabilir.</span><span class="sxs-lookup"><span data-stu-id="45c9d-143">The custom validator can validate certificates using any criteria it likes.</span></span> <span data-ttu-id="45c9d-144">Daha fazla bilgi için bkz. [nasıl yapılır: özel bir sertifika Doğrulayıcı kullanan bir hizmet oluşturma](../extending/how-to-create-a-service-that-employs-a-custom-certificate-validator.md).</span><span class="sxs-lookup"><span data-stu-id="45c9d-144">For more information, see [How to: Create a Service that Employs a Custom Certificate Validator](../extending/how-to-create-a-service-that-employs-a-custom-certificate-validator.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="45c9d-145">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="45c9d-145">See also</span></span>

- [<span data-ttu-id="45c9d-146">Federasyon</span><span class="sxs-lookup"><span data-stu-id="45c9d-146">Federation</span></span>](federation.md)
- [<span data-ttu-id="45c9d-147">Federasyon ve Güven</span><span class="sxs-lookup"><span data-stu-id="45c9d-147">Federation and Trust</span></span>](federation-and-trust.md)
- [<span data-ttu-id="45c9d-148">Federasyon Örneği</span><span class="sxs-lookup"><span data-stu-id="45c9d-148">Federation Sample</span></span>](../samples/federation-sample.md)
- [<span data-ttu-id="45c9d-149">Nasıl yapılır: WSFederationHttpBinding Güvenli Oturumlarını Devre Dışı Bırakma</span><span class="sxs-lookup"><span data-stu-id="45c9d-149">How to: Disable Secure Sessions on a WSFederationHttpBinding</span></span>](how-to-disable-secure-sessions-on-a-wsfederationhttpbinding.md)
- [<span data-ttu-id="45c9d-150">Nasıl yapılır: WSFederationHttpBinding Oluşturma</span><span class="sxs-lookup"><span data-stu-id="45c9d-150">How to: Create a WSFederationHttpBinding</span></span>](how-to-create-a-wsfederationhttpbinding.md)
- [<span data-ttu-id="45c9d-151">Nasıl yapılır: Federe İstemci Oluşturma</span><span class="sxs-lookup"><span data-stu-id="45c9d-151">How to: Create a Federated Client</span></span>](how-to-create-a-federated-client.md)
- [<span data-ttu-id="45c9d-152">Sertifikalarla Çalışma</span><span class="sxs-lookup"><span data-stu-id="45c9d-152">Working with Certificates</span></span>](working-with-certificates.md)
- [<span data-ttu-id="45c9d-153">SecurityBindingElement Kimlik Doğrulama Modları</span><span class="sxs-lookup"><span data-stu-id="45c9d-153">SecurityBindingElement Authentication Modes</span></span>](securitybindingelement-authentication-modes.md)
