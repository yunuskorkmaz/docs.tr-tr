---
title: Bir ListenUri için Birden Fazla Belirteç
ms.date: 03/30/2017
ms.assetid: 911ffad4-4d47-4430-b7c2-79192ce6bcbd
ms.openlocfilehash: 91220c6631db2f283b6571fbc32af2211feeaa35
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 06/09/2020
ms.locfileid: "84602498"
---
# <a name="multiple-endpoints-at-a-single-listenuri"></a><span data-ttu-id="7e9c0-102">Bir ListenUri için Birden Fazla Belirteç</span><span class="sxs-lookup"><span data-stu-id="7e9c0-102">Multiple Endpoints at a Single ListenUri</span></span>
<span data-ttu-id="7e9c0-103">Bu örnek tek seferde birden çok uç noktayı barındıran bir hizmeti gösterir `ListenUri` .</span><span class="sxs-lookup"><span data-stu-id="7e9c0-103">This sample demonstrates a service that hosts multiple endpoints at a single `ListenUri`.</span></span> <span data-ttu-id="7e9c0-104">Bu örnek, bir Hesaplayıcı hizmeti uygulayan [kullanmaya](getting-started-sample.md) Başlarken hizmetini temel alır.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-104">This sample is based on the [Getting Started](getting-started-sample.md) that implements a calculator service.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="7e9c0-105">Bu örneğe ilişkin Kurulum yordamı ve derleme yönergeleri bu konunun sonunda bulunur.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-105">The setup procedure and build instructions for this sample are located at the end of this topic.</span></span>  
  
 <span data-ttu-id="7e9c0-106">[Birden çok uç nokta](multiple-endpoints.md) örneğinde gösterildiği gibi, bir hizmet, her biri farklı adreslere ve muhtemelen farklı bağlamalara sahip birden fazla uç nokta barındırabilir.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-106">As demonstrated in the [Multiple Endpoints](multiple-endpoints.md) sample, a service can host multiple endpoints, each with different addresses and possibly also different bindings.</span></span> <span data-ttu-id="7e9c0-107">Bu örnek, aynı adreste birden çok uç noktanın barındırmada mümkün olduğunu gösterir.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-107">This sample shows that it is possible to host multiple endpoints at the same address.</span></span> <span data-ttu-id="7e9c0-108">Bu örnek ayrıca, bir hizmet uç noktasının sahip olduğu iki tür adres arasındaki farklılıkları gösterir: `EndpointAddress` ve `ListenUri` .</span><span class="sxs-lookup"><span data-stu-id="7e9c0-108">This sample also demonstrates the differences between the two kinds of addresses that a service endpoint has: `EndpointAddress` and `ListenUri`.</span></span>  
  
 <span data-ttu-id="7e9c0-109">, `EndpointAddress` Bir hizmetin mantıksal adresidir.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-109">The `EndpointAddress` is the logical address of a service.</span></span> <span data-ttu-id="7e9c0-110">SOAP iletilerinin adreslendiği adrestir.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-110">It is the address that SOAP messages are addressed to.</span></span> <span data-ttu-id="7e9c0-111">`ListenUri`Hizmetin fiziksel adresidir.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-111">The `ListenUri` is the physical address of the service.</span></span> <span data-ttu-id="7e9c0-112">Hizmet uç noktasının geçerli makinedeki iletileri gerçekten dinlediği bağlantı noktası ve adres bilgileri bulunur.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-112">It has the port and address information where the service endpoint actually listens for messages on the current machine.</span></span> <span data-ttu-id="7e9c0-113">Çoğu durumda, bu adreslerin farklı olması gerekmez; açık bir `ListenUri` şekilde belirtilmediğinde, varsayılan olarak `EndpointAddress` uç noktanın URI 'sidir.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-113">In most cases, there is no need for these addresses to differ; when a `ListenUri` is not explicitly specified, it defaults to the URI of the `EndpointAddress` of the endpoint.</span></span> <span data-ttu-id="7e9c0-114">Birkaç durumda, bir yönlendiriciyi yapılandırırken olduğu gibi farklı hizmetlere yönelik iletileri kabul edebilecek şekilde ayırt etmek yararlı olur.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-114">In a few cases, it is useful to distinguish them, such as when configuring a router, which might accept messages addressed to a number of different services.</span></span>  
  
## <a name="service"></a><span data-ttu-id="7e9c0-115">Hizmet</span><span class="sxs-lookup"><span data-stu-id="7e9c0-115">Service</span></span>  
 <span data-ttu-id="7e9c0-116">Bu örnekteki hizmette iki sözleşme vardır `ICalculator` ve `IEcho` .</span><span class="sxs-lookup"><span data-stu-id="7e9c0-116">The service in this sample has two contracts, `ICalculator` and `IEcho`.</span></span> <span data-ttu-id="7e9c0-117">Normal uç noktasına ek olarak, `IMetadataExchange` aşağıdaki kodda gösterildiği gibi üç uygulama uç noktası vardır.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-117">In addition to the customary `IMetadataExchange` endpoint, there are three application endpoints, as shown in the following code.</span></span>  
  
```xml  
<endpoint address="urn:Stuff"  
        binding="wsHttpBinding"  
        contract="Microsoft.ServiceModel.Samples.ICalculator"
        listenUri="http://localhost/servicemodelsamples/service.svc" />  
<endpoint address="urn:Stuff"  
        binding="wsHttpBinding"  
        contract="Microsoft.ServiceModel.Samples.IEcho"
        listenUri="http://localhost/servicemodelsamples/service.svc" />  
<endpoint address="urn:OtherEcho"  
        binding="wsHttpBinding"  
        contract="Microsoft.ServiceModel.Samples.IEcho"
        listenUri="http://localhost/servicemodelsamples/service.svc" />  
```  
  
 <span data-ttu-id="7e9c0-118">Üç uç noktanın hepsi aynı anda barındırılır `ListenUri` ve aynı `binding` bağlantı noktalarından aynı `ListenUri` olmalıdır, çünkü makinede o fiziksel adresteki iletileri dinleyen tek bir kanal yığınını paylaşıyor.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-118">All three endpoints are hosted at the same `ListenUri` and use the same `binding` - endpoints at the same `ListenUri` must have the same binding, because they are sharing a single channel stack that listens for messages at that physical address on the machine.</span></span> <span data-ttu-id="7e9c0-119">`address`Her uç noktanın BIR urn olması gerekir; ancak genellikle adresler fiziksel konumları temsil ediyorsa, aslında bu örnekte gösterildiği gibi eşleştirme ve filtreleme amaçları için kullanıldığından adres herhangi bir tür URI olabilir.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-119">The `address` of each endpoint is a URN; though typically addresses represent physical locations, in fact the address can be any kind of URI, because the address is used for matching and filtering purposes as is demonstrated in this sample.</span></span>  
  
 <span data-ttu-id="7e9c0-120">Üç uç noktanın hepsi aynı şekilde paylaştığı için, `ListenUri` bir ileti buraya ulaştığında Windows Communication Foundation (WCF) iletinin hangi uç noktaya ait olduğunu karar vermelidir.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-120">Because all three endpoints share the same `ListenUri`, when a message arrives there, Windows Communication Foundation (WCF) must decide which endpoint the message is destined for.</span></span> <span data-ttu-id="7e9c0-121">Her uç noktanın iki bölümden oluşan bir ileti filtresi vardır: adres filtresi ve sözleşme filtresi.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-121">Each endpoint has a message filter that is comprised of two parts: the address filter and the contract filter.</span></span> <span data-ttu-id="7e9c0-122">Adres filtresi, `To` SOAP iletisi ile hizmet uç noktasının adresiyle eşleşir.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-122">The address filter matches the `To` of the SOAP message to the address of the service endpoint.</span></span> <span data-ttu-id="7e9c0-123">Örneğin, yalnızca belirtilen mesajlar `To "Urn:OtherEcho"` Bu hizmetin üçüncü uç noktası için adaylardır.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-123">For example, only messages addressed `To "Urn:OtherEcho"` are candidates for the third endpoint of this service.</span></span> <span data-ttu-id="7e9c0-124">Sözleşme filtresi, belirli bir sözleşmenin işlemleriyle ilişkili eylemlerle eşleşir.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-124">The contract filter matches the Actions associated with the operations of a particular contract.</span></span> <span data-ttu-id="7e9c0-125">Örneğin, eylemine sahip mesajlar `IEcho` .</span><span class="sxs-lookup"><span data-stu-id="7e9c0-125">For example, messages with the action of `IEcho`.</span></span> <span data-ttu-id="7e9c0-126">`Echo`Bu uç noktaların her ikisi de sözleşmeyi barındırdığından, bu hizmetin ikinci ve üçüncü uç noktalarının sözleşme filtreleriyle eşleşir `IEcho` .</span><span class="sxs-lookup"><span data-stu-id="7e9c0-126">`Echo` matches the contract filters of both the second and third endpoints of this service, because both of those endpoints host the `IEcho` contract.</span></span>  
  
 <span data-ttu-id="7e9c0-127">Bu nedenle, adres filtresi ve sözleşme filtresi birleşimi, bu hizmete ulaşan her iletiyi `ListenUri` doğru uç noktaya yönlendirmeye olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-127">Thus the combination of address filter and contract filter makes it possible to route each message that arrives at this service's `ListenUri` to the correct endpoint.</span></span> <span data-ttu-id="7e9c0-128">Diğer uç noktalardan farklı bir adrese gönderilen iletileri kabul ettiğinden, üçüncü uç nokta diğer iki sunucudan farklılaştırılabilir.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-128">The third endpoint is differentiated from the other two because it accepts messages sent to a different address from the other endpoints.</span></span> <span data-ttu-id="7e9c0-129">Birinci ve ikinci uç noktalar, sözleşmeleri (gelen ileti eylemi) temel alınarak birbirinden farklılaştırılır.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-129">The first and second endpoints are differentiated from each other based on their contracts (the Action of the incoming message).</span></span>  
  
## <a name="client"></a><span data-ttu-id="7e9c0-130">İstemci</span><span class="sxs-lookup"><span data-stu-id="7e9c0-130">Client</span></span>  
 <span data-ttu-id="7e9c0-131">Sunucudaki uç noktaların iki farklı adresi olduğu gibi, istemci uç noktalarında da iki adres vardır.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-131">Just as endpoints on the server have two different addresses, client endpoints also have two addresses.</span></span> <span data-ttu-id="7e9c0-132">Hem sunucu hem de istemcide, mantıksal adres olarak adlandırılır `EndpointAddress` .</span><span class="sxs-lookup"><span data-stu-id="7e9c0-132">On both server and client, the logical address is called the `EndpointAddress`.</span></span> <span data-ttu-id="7e9c0-133">Ancak fiziksel adres `ListenUri` sunucuda, istemci üzerinde, fiziksel adrese olarak adlandırılır `Via` .</span><span class="sxs-lookup"><span data-stu-id="7e9c0-133">But whereas the physical address is called the `ListenUri` on the server, on the client, the physical address is called the `Via`.</span></span>  
  
 <span data-ttu-id="7e9c0-134">Sunucuda olduğu gibi, varsayılan olarak bu iki adres aynıdır.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-134">As on the server, by default, these two addresses are the same.</span></span> <span data-ttu-id="7e9c0-135">`Via`Uç noktanın adresinden farklı bir istemcide belirtmek için `ClientViaBehavior` kullanılır:</span><span class="sxs-lookup"><span data-stu-id="7e9c0-135">To specify a `Via` on the client that is different from the endpoint's address, `ClientViaBehavior` is used:</span></span>  
  
```csharp  
Uri via = new Uri("http://localhost/ServiceModelSamples/service.svc");  
CalculatorClient calcClient = new CalculatorClient();  
calcClient.ChannelFactory.Endpoint.Behaviors.Add(  
        new ClientViaBehavior(via));  
```  
  
 <span data-ttu-id="7e9c0-136">Her zamanki gibi, adres, Svcutil. exe tarafından oluşturulan istemci yapılandırma dosyasından gelir.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-136">As usual, the address comes from the client configuration file, which was generated by Svcutil.exe.</span></span> <span data-ttu-id="7e9c0-137">`Via`(Hizmetin bu öğesine karşılık gelen `ListenUri` ), hizmetin meta verilerinde görünmez ve bu nedenle bu bilgilerin istemciye bant dışı iletilmesi gerekir (tıpkı hizmetin meta veri adresine benzer).</span><span class="sxs-lookup"><span data-stu-id="7e9c0-137">The `Via` (which corresponds to the `ListenUri` of the service) does not appear in the service's metadata and so this information must be communicated to the client out-of-band (just like the service's metadata address).</span></span>  
  
 <span data-ttu-id="7e9c0-138">Bu örnekteki istemci her bir sunucunun üç uygulama uç noktasına ileti gönderir ve bunların hepsi aynı olsa da üç uç noktanın tümünü ayırt edebildiğini gösterir `Via` .</span><span class="sxs-lookup"><span data-stu-id="7e9c0-138">The client in this sample sends messages to each of the server's three application endpoints, to demonstrate that it can communicate with (and differentiate) all three endpoints, even though they all have the same `Via`.</span></span>  
  
#### <a name="to-set-up-build-and-run-the-sample"></a><span data-ttu-id="7e9c0-139">Örneği ayarlamak, derlemek ve çalıştırmak için</span><span class="sxs-lookup"><span data-stu-id="7e9c0-139">To set up, build, and run the sample</span></span>  
  
1. <span data-ttu-id="7e9c0-140">[Windows Communication Foundation Örnekleri Için tek seferlik Kurulum yordamını](one-time-setup-procedure-for-the-wcf-samples.md)gerçekleştirdiğinizden emin olun.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-140">Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](one-time-setup-procedure-for-the-wcf-samples.md).</span></span>  
  
2. <span data-ttu-id="7e9c0-141">Çözümün C# veya Visual Basic .NET sürümünü oluşturmak için [Windows Communication Foundation örnekleri oluşturma](building-the-samples.md)konusundaki yönergeleri izleyin.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-141">To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](building-the-samples.md).</span></span>  
  
3. <span data-ttu-id="7e9c0-142">Örneği tek veya bir çapraz makine yapılandırmasında çalıştırmak için [Windows Communication Foundation Örnekleri çalıştırma](running-the-samples.md)bölümündeki yönergeleri izleyin.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-142">To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](running-the-samples.md).</span></span>  
  
    > [!NOTE]
    > <span data-ttu-id="7e9c0-143">Çapraz makine için, Client.cs dosyasındaki localhost 'u hizmet makinesinin adıyla değiştirmelisiniz.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-143">For cross-machine, you must replace localhost in the Client.cs file with the name of the service machine.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="7e9c0-144">Örnekler makinenizde zaten yüklü olabilir.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-144">The samples may already be installed on your machine.</span></span> <span data-ttu-id="7e9c0-145">Devam etmeden önce aşağıdaki (varsayılan) dizini denetleyin.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-145">Check for the following (default) directory before continuing.</span></span>  
>
> `<InstallDrive>:\WF_WCF_Samples`  
>
> <span data-ttu-id="7e9c0-146">Bu dizin yoksa, tüm Windows Communication Foundation (WCF) ve örnekleri indirmek için [Windows Communication Foundation (WCF) ve Windows Workflow Foundation (WF) örneklerine .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=21459) ' e gidin [!INCLUDE[wf1](../../../../includes/wf1-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="7e9c0-146">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=21459) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="7e9c0-147">Bu örnek, aşağıdaki dizinde bulunur.</span><span class="sxs-lookup"><span data-stu-id="7e9c0-147">This sample is located in the following directory.</span></span>  
>
> `<InstallDrive>:\WF_WCF_Samples\WCF\Basic\Services\MultipleEndpointsSingleUri`  
