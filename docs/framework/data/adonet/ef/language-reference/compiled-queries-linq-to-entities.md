---
title: Derlenmiş sorgular (LINQ to Entities)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: 8025ba1d-29c7-4407-841b-d5a3bed40b7a
ms.openlocfilehash: 362ba0000c739c8fc216186514a63531e603c637
ms.sourcegitcommit: 2eceb05f1a5bb261291a1f6a91c5153727ac1c19
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 09/04/2018
ms.locfileid: "43502027"
---
# <a name="compiled-queries--linq-to-entities"></a><span data-ttu-id="802d1-102">Derlenmiş sorgular (LINQ to Entities)</span><span class="sxs-lookup"><span data-stu-id="802d1-102">Compiled Queries  (LINQ to Entities)</span></span>
<span data-ttu-id="802d1-103">Birden çok kez varlık Çerçevesi'nde yapısal olarak benzer sorguları yürüten bir uygulamanız varsa, sorgu bir kez derleyerek ve birkaç kez farklı parametrelerle yürütme sık performansı artırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="802d1-103">When you have an application that executes structurally similar queries many times in the Entity Framework, you can frequently increase performance by compiling the query one time and executing it several times with different parameters.</span></span> <span data-ttu-id="802d1-104">Örneğin, bir uygulama belirli bir şehirdeki tüm müşterileri alma gerekebilir; Şehir, çalışma zamanında bir forma kullanıcı tarafından belirtilir.</span><span class="sxs-lookup"><span data-stu-id="802d1-104">For example, an application might have to retrieve all the customers in a particular city; the city is specified at runtime by the user in a form.</span></span> <span data-ttu-id="802d1-105">LINQ to Entities, bu amaç için derlenmiş sorgular kullanmayı destekler.</span><span class="sxs-lookup"><span data-stu-id="802d1-105">LINQ to Entities supports using compiled queries for this purpose.</span></span>  
  
 <span data-ttu-id="802d1-106">.NET Framework 4.5 ile başlayarak, LINQ sorguları otomatik olarak önbelleğe.</span><span class="sxs-lookup"><span data-stu-id="802d1-106">Starting with the .NET Framework 4.5, LINQ queries are cached automatically.</span></span> <span data-ttu-id="802d1-107">Ancak, bu sonraki yürütme sayısı maliyeti azaltmak için derlenmiş LINQ sorguları kullanmaya devam edebilirsiniz ve derlenmiş sorgular otomatik olarak önbelleğe LINQ sorguları daha verimli olabilir.</span><span class="sxs-lookup"><span data-stu-id="802d1-107">However, you can still use compiled LINQ queries to reduce this cost in later executions and compiled queries can be more efficient than LINQ queries that are automatically cached.</span></span> <span data-ttu-id="802d1-108">LINQ to Entities sorguları Not geçerli `Enumerable.Contains` işleci bellek içi koleksiyonlara otomatik olarak önbelleğe alınmaz.</span><span class="sxs-lookup"><span data-stu-id="802d1-108">Note that LINQ to Entities queries that apply the `Enumerable.Contains` operator to in-memory collections are not automatically cached.</span></span> <span data-ttu-id="802d1-109">Bellek içi koleksiyonları derlenmiş LINQ sorgularında ayrıca kümesini parametreleştirme izin verilmez.</span><span class="sxs-lookup"><span data-stu-id="802d1-109">Also parameterizing in-memory collections in compiled LINQ queries is not allowed.</span></span>  
  
 <span data-ttu-id="802d1-110"><xref:System.Data.Objects.CompiledQuery> Sınıfı, derleme ve sorguları yeniden kullanım için önbelleğe alınmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="802d1-110">The <xref:System.Data.Objects.CompiledQuery> class provides compilation and caching of queries for reuse.</span></span> <span data-ttu-id="802d1-111">Kavramsal olarak, bu sınıf içeren bir <xref:System.Data.Objects.CompiledQuery>'s `Compile` yöntemi ile çeşitli aşırı yükler.</span><span class="sxs-lookup"><span data-stu-id="802d1-111">Conceptually, this class contains a <xref:System.Data.Objects.CompiledQuery>'s `Compile` method with several overloads.</span></span> <span data-ttu-id="802d1-112">Çağrı `Compile` derlenmiş sorguyu temsil etmek için yeni bir temsilci oluşturmak için yöntemi.</span><span class="sxs-lookup"><span data-stu-id="802d1-112">Call the `Compile` method to create a new delegate to represent the compiled query.</span></span> <span data-ttu-id="802d1-113">`Compile` İle sağlanan yöntemleri, bir <xref:System.Data.Objects.ObjectContext> ve bazı sonucu üreten bir temsilci dönüş parametresi değerleri (gibi bir <xref:System.Linq.IQueryable%601> örnek).</span><span class="sxs-lookup"><span data-stu-id="802d1-113">The `Compile` methods, provided with a <xref:System.Data.Objects.ObjectContext> and parameter values, return a delegate that produces some result (such as an <xref:System.Linq.IQueryable%601> instance).</span></span> <span data-ttu-id="802d1-114">Sorgu bir kez yalnızca ilk yürütme sırasında derler.</span><span class="sxs-lookup"><span data-stu-id="802d1-114">The query compiles once during only the first execution.</span></span> <span data-ttu-id="802d1-115">Sorgu için derleme ayarlarken birleştirme seçeneklerini daha sonra değiştirilemez.</span><span class="sxs-lookup"><span data-stu-id="802d1-115">The merge options set for the query at the time of the compilation cannot be changed later.</span></span> <span data-ttu-id="802d1-116">Sorgu derlenmiş sonra yalnızca ilkel tür parametrelerinin sağlayabilirsiniz, ancak oluşturulan SQL değiştirirsiniz sorgunun bölümlerini değiştirilemiyor.</span><span class="sxs-lookup"><span data-stu-id="802d1-116">Once the query is compiled you can only supply parameters of primitive type but you cannot replace parts of the query that would change the generated SQL.</span></span> <span data-ttu-id="802d1-117">Daha fazla bilgi için [Entity Framework birleştirme seçeneklerini ve derlenmiş sorgular](https://go.microsoft.com/fwlink/?LinkId=199591)</span><span class="sxs-lookup"><span data-stu-id="802d1-117">For more information, see [Entity Framework Merge Options and Compiled Queries](https://go.microsoft.com/fwlink/?LinkId=199591)</span></span>  
  
 <span data-ttu-id="802d1-118">[!INCLUDE[linq_entities](../../../../../../includes/linq-entities-md.md)] Sorgu ifadesi, <xref:System.Data.Objects.CompiledQuery>'s `Compile` yöntemi derler genel biri tarafından temsil edilir `Func` gibi Temsilciler <xref:System.Func%605>.</span><span class="sxs-lookup"><span data-stu-id="802d1-118">The [!INCLUDE[linq_entities](../../../../../../includes/linq-entities-md.md)] query expression that the <xref:System.Data.Objects.CompiledQuery>'s `Compile` method compiles is represented by one of the generic `Func` delegates, such as <xref:System.Func%605>.</span></span> <span data-ttu-id="802d1-119">En fazla sorgu ifadesi kapsülleyebilir bir `ObjectContext` parametre, dönüş parametresi ve 16 sorgu parametreleri.</span><span class="sxs-lookup"><span data-stu-id="802d1-119">At most, the query expression can encapsulate an `ObjectContext` parameter, a return parameter, and 16 query parameters.</span></span> <span data-ttu-id="802d1-120">16'dan fazla sorgu parametreleri gerekiyorsa, sorgu parametreleri özelliklerini temsil eden bir yapı oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="802d1-120">If more than 16 query parameters are required, you can create a structure whose properties represent query parameters.</span></span> <span data-ttu-id="802d1-121">Özellikler ayarlandıktan sonra sorgu ifadesinde yapısına özelliklerini kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="802d1-121">You can then use the properties on the structure in the query expression after you set the properties.</span></span>  
  
## <a name="example"></a><span data-ttu-id="802d1-122">Örnek</span><span class="sxs-lookup"><span data-stu-id="802d1-122">Example</span></span>  
 <span data-ttu-id="802d1-123">Aşağıdaki örnek, derler ve ardından kabul eden bir sorguyu çağırır bir <xref:System.Decimal> giriş parametresi ve toplam süre değerinden büyük veya eşittir $200,00 olduğu siparişler bir dizi döndürür:</span><span class="sxs-lookup"><span data-stu-id="802d1-123">The following example compiles and then invokes a query that accepts a <xref:System.Decimal> input parameter and returns a sequence of orders where the total due is greater than or equal to $200.00:</span></span>  
  
 [!code-csharp[DP L2E Conceptual Examples#CompiledQuery2](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DP L2E Conceptual Examples/CS/Program.cs#compiledquery2)]
 [!code-vb[DP L2E Conceptual Examples#CompiledQuery2](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DP L2E Conceptual Examples/VB/Module1.vb#compiledquery2)]  
  
## <a name="example"></a><span data-ttu-id="802d1-124">Örnek</span><span class="sxs-lookup"><span data-stu-id="802d1-124">Example</span></span>  
 <span data-ttu-id="802d1-125">Aşağıdaki örnek derler ve ardından döndüren bir sorgu çağıran bir <xref:System.Data.Objects.ObjectQuery%601> örneği:</span><span class="sxs-lookup"><span data-stu-id="802d1-125">The following example compiles and then invokes a query that returns an <xref:System.Data.Objects.ObjectQuery%601> instance:</span></span>  
  
 [!code-csharp[DP L2E Conceptual Examples#CompiledQuery1_MQ](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DP L2E Conceptual Examples/CS/Program.cs#compiledquery1_mq)]
 [!code-vb[DP L2E Conceptual Examples#CompiledQuery1_MQ](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DP L2E Conceptual Examples/VB/Module1.vb#compiledquery1_mq)]  
  
## <a name="example"></a><span data-ttu-id="802d1-126">Örnek</span><span class="sxs-lookup"><span data-stu-id="802d1-126">Example</span></span>  
 <span data-ttu-id="802d1-127">Aşağıdaki örnek, derler ve daha sonra ürün listesi fiyatlar ortalamasını döndüren bir sorgu çalıştırır bir <xref:System.Decimal> değeri:</span><span class="sxs-lookup"><span data-stu-id="802d1-127">The following example compiles and then invokes a query that returns the average of the product list prices as a <xref:System.Decimal> value:</span></span>  
  
 [!code-csharp[DP L2E Conceptual Examples#CompiledQuery3_MQ](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DP L2E Conceptual Examples/CS/Program.cs#compiledquery3_mq)]
 [!code-vb[DP L2E Conceptual Examples#CompiledQuery3_MQ](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DP L2E Conceptual Examples/VB/Module1.vb#compiledquery3_mq)]  
  
## <a name="example"></a><span data-ttu-id="802d1-128">Örnek</span><span class="sxs-lookup"><span data-stu-id="802d1-128">Example</span></span>  
 <span data-ttu-id="802d1-129">Aşağıdaki örnek, derler ve ardından kabul eden bir sorguyu çağırır bir <xref:System.String> giriş parametresi ve döndürür bir `Contact` , e-posta adresi belirtilen dize ile başlar:</span><span class="sxs-lookup"><span data-stu-id="802d1-129">The following example compiles and then invokes a query that accepts a <xref:System.String> input parameter and then returns a `Contact` whose email address starts with the specified string:</span></span>  
  
 [!code-csharp[DP L2E Conceptual Examples#CompiledQuery4_MQ](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DP L2E Conceptual Examples/CS/Program.cs#compiledquery4_mq)]
 [!code-vb[DP L2E Conceptual Examples#CompiledQuery4_MQ](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DP L2E Conceptual Examples/VB/Module1.vb#compiledquery4_mq)]  
  
## <a name="example"></a><span data-ttu-id="802d1-130">Örnek</span><span class="sxs-lookup"><span data-stu-id="802d1-130">Example</span></span>  
 <span data-ttu-id="802d1-131">Aşağıdaki örnek, derler ve ardından kabul eden bir sorguyu çağırır <xref:System.DateTime> ve <xref:System.Decimal> küçüktür $300.00 olan giriş parametreleri ve bir dizi, sipariş tarihi 8 Mart 2003'ten daha sonra olduğu ve son toplam siparişleri döndürür:</span><span class="sxs-lookup"><span data-stu-id="802d1-131">The following example compiles and then invokes a query that accepts <xref:System.DateTime> and <xref:System.Decimal> input parameters and returns a sequence of orders where the order date is later than March 8, 2003, and the total due is less than $300.00:</span></span>  
  
 [!code-csharp[DP L2E Conceptual Examples#CompiledQuery5](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DP L2E Conceptual Examples/CS/Program.cs#compiledquery5)]
 [!code-vb[DP L2E Conceptual Examples#CompiledQuery5](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DP L2E Conceptual Examples/VB/Module1.vb#compiledquery5)]  
  
## <a name="example"></a><span data-ttu-id="802d1-132">Örnek</span><span class="sxs-lookup"><span data-stu-id="802d1-132">Example</span></span>  
 <span data-ttu-id="802d1-133">Aşağıdaki örnek, derler ve ardından kabul eden bir sorguyu çağırır bir <xref:System.DateTime> giriş parametresi ve sipariş tarihi 8 Mart 2004 ' sonraki olduğu siparişler bir dizisini döndürür.</span><span class="sxs-lookup"><span data-stu-id="802d1-133">The following example compiles and then invokes a query that accepts a <xref:System.DateTime> input parameter and returns a sequence of orders where the order date is later than March 8, 2004.</span></span> <span data-ttu-id="802d1-134">Bu sorgu, anonim türdeki sipariş bilgileri bir dizisi olarak döndürür.</span><span class="sxs-lookup"><span data-stu-id="802d1-134">This query returns the order information as a sequence of anonymous types.</span></span> <span data-ttu-id="802d1-135">Anonim türler tür parametrelerinde belirtemezsiniz derleyici tarafından çıkarılan <xref:System.Data.Objects.CompiledQuery>'s `Compile` yöntemi ve türü sorguda tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="802d1-135">Anonymous types are inferred by the compiler, so you cannot specify type parameters in the <xref:System.Data.Objects.CompiledQuery>'s `Compile` method and the type is defined in the query itself.</span></span>  
  
 [!code-csharp[DP L2E Conceptual Examples#CompiledQuery6](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DP L2E Conceptual Examples/CS/Program.cs#compiledquery6)]
 [!code-vb[DP L2E Conceptual Examples#CompiledQuery6](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DP L2E Conceptual Examples/VB/Module1.vb#compiledquery6)]  
  
## <a name="example"></a><span data-ttu-id="802d1-136">Örnek</span><span class="sxs-lookup"><span data-stu-id="802d1-136">Example</span></span>  
 <span data-ttu-id="802d1-137">Aşağıdaki örnek, derler ve ardından, kullanıcı tanımlı yapısı giriş parametresi kabul eden ve siparişlerinin bir dizi döndürür bir sorgu çalıştırır.</span><span class="sxs-lookup"><span data-stu-id="802d1-137">The following example compiles and then invokes a query that accepts a user-defined structure input parameter and returns a sequence of orders.</span></span> <span data-ttu-id="802d1-138">Başlangıç tarihi, bitiş tarihi ve toplam sorgu parametreleri nedeniyle yapısını tanımlar ve Mart 3 ve 8 Mart 2003 toplam $700.00 büyüktür son siparişlere sorguyu döndürür.</span><span class="sxs-lookup"><span data-stu-id="802d1-138">The structure defines start date, end date, and total due query parameters, and the query returns orders shipped between March 3 and March 8, 2003 with a total due greater than $700.00.</span></span>  
  
 [!code-csharp[DP L2E Conceptual Examples#CompiledQuery7](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DP L2E Conceptual Examples/CS/Program.cs#compiledquery7)]
 [!code-vb[DP L2E Conceptual Examples#CompiledQuery7](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DP L2E Conceptual Examples/VB/Module1.vb#compiledquery7)]  
  
 <span data-ttu-id="802d1-139">Sorgu parametrelerini tanımlayan yapısı:</span><span class="sxs-lookup"><span data-stu-id="802d1-139">The structure that defines the query parameters:</span></span>  
  
 [!code-csharp[DP L2E Conceptual Examples#MyParamsStruct](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DP L2E Conceptual Examples/CS/Program.cs#myparamsstruct)]
 [!code-vb[DP L2E Conceptual Examples#MyParamsStruct](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DP L2E Conceptual Examples/VB/Module1.vb#myparamsstruct)]  
  
## <a name="see-also"></a><span data-ttu-id="802d1-140">Ayrıca Bkz.</span><span class="sxs-lookup"><span data-stu-id="802d1-140">See Also</span></span>  
 [<span data-ttu-id="802d1-141">ADO.NET Entity Framework</span><span class="sxs-lookup"><span data-stu-id="802d1-141">ADO.NET Entity Framework</span></span>](../../../../../../docs/framework/data/adonet/ef/index.md)  
 [<span data-ttu-id="802d1-142">LINQ to Entities</span><span class="sxs-lookup"><span data-stu-id="802d1-142">LINQ to Entities</span></span>](../../../../../../docs/framework/data/adonet/ef/language-reference/linq-to-entities.md)  
 [<span data-ttu-id="802d1-143">Entity Framework birleştirme seçeneklerini ve derlenmiş sorgular</span><span class="sxs-lookup"><span data-stu-id="802d1-143">Entity Framework Merge Options and Compiled Queries</span></span>](https://go.microsoft.com/fwlink/?LinkId=199591)
