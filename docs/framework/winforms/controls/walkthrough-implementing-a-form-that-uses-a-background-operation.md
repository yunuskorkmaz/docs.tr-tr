---
title: 'İzlenecek yol: Arka Plan İşlemi Kullanan Bir Form Uygulama'
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
- cpp
helpviewer_keywords:
- threading [Windows Forms], forms
- BackgroundWorker component
- background tasks
- forms [Windows Forms], multithreading
- threading [Windows Forms], walkthroughs
- forms [Windows Forms], background operations
- threading [Windows Forms], background operations
- background operations
ms.assetid: 4691b796-9200-471a-89c3-ba4c7cc78c03
ms.openlocfilehash: 435bc1c04bfd2f9b8a94ff8151369b5ef2fae6f8
ms.sourcegitcommit: efff8f331fd9467f093f8ab8d23a203d6ecb5b60
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 09/01/2018
ms.locfileid: "43385878"
---
# <a name="walkthrough-implementing-a-form-that-uses-a-background-operation"></a><span data-ttu-id="d487b-102">İzlenecek yol: Arka Plan İşlemi Kullanan Bir Form Uygulama</span><span class="sxs-lookup"><span data-stu-id="d487b-102">Walkthrough: Implementing a Form That Uses a Background Operation</span></span>
<span data-ttu-id="d487b-103">Sahip olduğunuz işleminin tamamlanması uzun sürer ve yanıt vermemesine, kullanıcı arabirimi (UI) istemediğiniz veya kullanabileceğiniz "askıda," <xref:System.ComponentModel.BackgroundWorker> başka bir iş parçacığı üzerindeki işlemi yürütmek için sınıf.</span><span class="sxs-lookup"><span data-stu-id="d487b-103">If you have an operation that will take a long time to complete, and you do not want your user interface (UI) to stop responding or "hang," you can use the <xref:System.ComponentModel.BackgroundWorker> class to execute the operation on another thread.</span></span>  
  
 <span data-ttu-id="d487b-104">Bu izlenecek yol nasıl kullanılacağını gösterir <xref:System.ComponentModel.BackgroundWorker> sınıfının "arka planda" zaman hesaplamalar gerçekleştirmek için kullanıcı arabirimi yanıt kalırken.</span><span class="sxs-lookup"><span data-stu-id="d487b-104">This walkthrough illustrates how to use the <xref:System.ComponentModel.BackgroundWorker> class to perform time-consuming computations "in the background," while the user interface remains responsive.</span></span>  <span data-ttu-id="d487b-105">Aracılığıyla işiniz Fibonacci numaraları zaman uyumsuz olarak hesaplayan bir uygulamaya sahip olursunuz.</span><span class="sxs-lookup"><span data-stu-id="d487b-105">When you are through, you will have an application that computes Fibonacci numbers asynchronously.</span></span> <span data-ttu-id="d487b-106">Fibonacci sayıda belirgin bir süre alabilir bilgisayar olsa da, ana UI iş parçacığı tarafından bu gecikme kesilmez ve form hesaplama sırasında hızlı olacaktır.</span><span class="sxs-lookup"><span data-stu-id="d487b-106">Even though computing a large Fibonacci number can take a noticeable amount of time, the main UI thread will not be interrupted by this delay, and the form will be responsive during the calculation.</span></span>  
  
 <span data-ttu-id="d487b-107">Bu kılavuzda gösterilen görevler aşağıdakileri içerir:</span><span class="sxs-lookup"><span data-stu-id="d487b-107">Tasks illustrated in this walkthrough include:</span></span>  
  
-   <span data-ttu-id="d487b-108">Windows tabanlı bir uygulama oluşturma</span><span class="sxs-lookup"><span data-stu-id="d487b-108">Creating a Windows-based Application</span></span>  
  
-   <span data-ttu-id="d487b-109">Oluşturma bir <xref:System.ComponentModel.BackgroundWorker> formunuza</span><span class="sxs-lookup"><span data-stu-id="d487b-109">Creating a <xref:System.ComponentModel.BackgroundWorker> in Your Form</span></span>  
  
-   <span data-ttu-id="d487b-110">Zaman uyumsuz olay işleyicileri ekleme</span><span class="sxs-lookup"><span data-stu-id="d487b-110">Adding Asynchronous Event Handlers</span></span>  
  
-   <span data-ttu-id="d487b-111">İlerleme durumunu raporlama ve iptal için destek ekleme</span><span class="sxs-lookup"><span data-stu-id="d487b-111">Adding Progress Reporting and Support for Cancellation</span></span>  
  
 <span data-ttu-id="d487b-112">Bu örnekte kullanılan kod tam listesi için bkz. [nasıl yapılır: arka plan işlemi kullanan bir Form uygulama](../../../../docs/framework/winforms/controls/how-to-implement-a-form-that-uses-a-background-operation.md).</span><span class="sxs-lookup"><span data-stu-id="d487b-112">For a complete listing of the code used in this example, see [How to: Implement a Form That Uses a Background Operation](../../../../docs/framework/winforms/controls/how-to-implement-a-form-that-uses-a-background-operation.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d487b-113">Gördüğünüz iletişim kutuları ve menü komutları, etkin ayarlarınıza ve ürün sürümüne bağlı olarak Yardım menüsünde açıklanana göre farklılık gösterebilir.</span><span class="sxs-lookup"><span data-stu-id="d487b-113">The dialog boxes and menu commands you see might differ from those described in Help depending on your active settings or edition.</span></span> <span data-ttu-id="d487b-114">Ayarlarınızı değiştirmek için seçin **içeri ve dışarı aktarma ayarları** üzerinde **Araçları** menüsü.</span><span class="sxs-lookup"><span data-stu-id="d487b-114">To change your settings, choose **Import and Export Settings** on the **Tools** menu.</span></span> <span data-ttu-id="d487b-115">Daha fazla bilgi için [Visual Studio IDE'yi kişiselleştirme](/visualstudio/ide/personalizing-the-visual-studio-ide).</span><span class="sxs-lookup"><span data-stu-id="d487b-115">For more information, see [Personalize the Visual Studio IDE](/visualstudio/ide/personalizing-the-visual-studio-ide).</span></span>  
  
## <a name="creating-the-project"></a><span data-ttu-id="d487b-116">Projeyi Oluşturma</span><span class="sxs-lookup"><span data-stu-id="d487b-116">Creating the Project</span></span>  
 <span data-ttu-id="d487b-117">İlk adım projeyi oluşturmak ve formu ayarlamak için ' dir.</span><span class="sxs-lookup"><span data-stu-id="d487b-117">The first step is to create the project and to set up the form.</span></span>  
  
#### <a name="to-create-a-form-that-uses-a-background-operation"></a><span data-ttu-id="d487b-118">Arka plan işlemi kullanan bir form oluşturma</span><span class="sxs-lookup"><span data-stu-id="d487b-118">To create a form that uses a background operation</span></span>  
  
1.  <span data-ttu-id="d487b-119">Adlı bir Windows tabanlı uygulama projesi oluşturma `BackgroundWorkerExample` (**dosya** > **yeni** > **proje**  >  **Visual C#** veya **Visual Basic** > **Klasik Masaüstü** > **Windows Forms uygulamalarındaki**).</span><span class="sxs-lookup"><span data-stu-id="d487b-119">Create a Windows-based application project called `BackgroundWorkerExample` (**File** > **New** > **Project** > **Visual C#** or **Visual Basic** > **Classic Desktop** > **Windows Forms Application**).</span></span>  
  
2.  <span data-ttu-id="d487b-120">İçinde **Çözüm Gezgini**, sağ **Form1** seçip **Yeniden Adlandır** kısayol menüsünden.</span><span class="sxs-lookup"><span data-stu-id="d487b-120">In **Solution Explorer**, right-click **Form1** and select **Rename** from the shortcut menu.</span></span> <span data-ttu-id="d487b-121">İçin dosya adını değiştirerek `FibonacciCalculator`.</span><span class="sxs-lookup"><span data-stu-id="d487b-121">Change the file name to `FibonacciCalculator`.</span></span> <span data-ttu-id="d487b-122">Tıklayın **Evet** düğmesini yaptığınız kod öğesi için tüm başvuruları yeniden adlandırmak isteyip istemediğiniz sorulduğunda '`Form1`'.</span><span class="sxs-lookup"><span data-stu-id="d487b-122">Click the **Yes** button when you are asked if you want to rename all references to the code element '`Form1`'.</span></span>  
  
3.  <span data-ttu-id="d487b-123">Sürükleme bir <xref:System.Windows.Forms.NumericUpDown> denetimi **araç kutusu** forma.</span><span class="sxs-lookup"><span data-stu-id="d487b-123">Drag a <xref:System.Windows.Forms.NumericUpDown> control from the **Toolbox** onto the form.</span></span> <span data-ttu-id="d487b-124">Ayarlama <xref:System.Windows.Forms.NumericUpDown.Minimum%2A> özelliğini `1` ve <xref:System.Windows.Forms.NumericUpDown.Maximum%2A> özelliğini `91`.</span><span class="sxs-lookup"><span data-stu-id="d487b-124">Set the <xref:System.Windows.Forms.NumericUpDown.Minimum%2A> property to `1` and the <xref:System.Windows.Forms.NumericUpDown.Maximum%2A> property to `91`.</span></span>  
  
4.  <span data-ttu-id="d487b-125">İki ekleme <xref:System.Windows.Forms.Button> formu için denetimler.</span><span class="sxs-lookup"><span data-stu-id="d487b-125">Add two <xref:System.Windows.Forms.Button> controls to the form.</span></span>  
  
5.  <span data-ttu-id="d487b-126">İlk Yeniden Adlandır <xref:System.Windows.Forms.Button> denetimi `startAsyncButton` ayarlayıp <xref:System.Windows.Forms.Control.Text%2A> özelliğini `Start Async`.</span><span class="sxs-lookup"><span data-stu-id="d487b-126">Rename the first <xref:System.Windows.Forms.Button> control `startAsyncButton` and set the <xref:System.Windows.Forms.Control.Text%2A> property to `Start Async`.</span></span> <span data-ttu-id="d487b-127">İkinci <xref:System.Windows.Forms.Button> denetimi `cancelAsyncButton`, ayarlayıp <xref:System.Windows.Forms.Control.Text%2A> özelliğini `Cancel Async`.</span><span class="sxs-lookup"><span data-stu-id="d487b-127">Rename the second <xref:System.Windows.Forms.Button> control `cancelAsyncButton`, and set the <xref:System.Windows.Forms.Control.Text%2A> property to `Cancel Async`.</span></span> <span data-ttu-id="d487b-128">Ayarlama, <xref:System.Windows.Forms.Control.Enabled%2A> özelliğini `false`.</span><span class="sxs-lookup"><span data-stu-id="d487b-128">Set its <xref:System.Windows.Forms.Control.Enabled%2A> property to `false`.</span></span>  
  
6.  <span data-ttu-id="d487b-129">Her iki için bir olay işleyicisi oluşturun <xref:System.Windows.Forms.Button> denetimleri <xref:System.Windows.Forms.Control.Click> olayları.</span><span class="sxs-lookup"><span data-stu-id="d487b-129">Create an event handler for both of the <xref:System.Windows.Forms.Button> controls' <xref:System.Windows.Forms.Control.Click> events.</span></span> <span data-ttu-id="d487b-130">Ayrıntılar için bkz [nasıl yapılır: olay işleyicileri kullanarak Tasarımcı](https://msdn.microsoft.com/library/8461e9b8-14e8-406f-936e-3726732b23d2).</span><span class="sxs-lookup"><span data-stu-id="d487b-130">For details, see [How to: Create Event Handlers Using the Designer](https://msdn.microsoft.com/library/8461e9b8-14e8-406f-936e-3726732b23d2).</span></span>  
  
7.  <span data-ttu-id="d487b-131">Sürükleme bir <xref:System.Windows.Forms.Label> denetimi **araç kutusu** forma ve yeniden adlandırmak `resultLabel`.</span><span class="sxs-lookup"><span data-stu-id="d487b-131">Drag a <xref:System.Windows.Forms.Label> control from the **Toolbox** onto the form and rename it `resultLabel`.</span></span>  
  
8.  <span data-ttu-id="d487b-132">Sürükleme bir <xref:System.Windows.Forms.ProgressBar> denetimi **araç kutusu** forma.</span><span class="sxs-lookup"><span data-stu-id="d487b-132">Drag a <xref:System.Windows.Forms.ProgressBar> control from the **Toolbox** onto the form.</span></span>  
  
## <a name="creating-a-backgroundworker-in-your-form"></a><span data-ttu-id="d487b-133">Formunuza bir BackgroundWorker oluşturma</span><span class="sxs-lookup"><span data-stu-id="d487b-133">Creating a BackgroundWorker in Your Form</span></span>  
 <span data-ttu-id="d487b-134">Oluşturabileceğiniz <xref:System.ComponentModel.BackgroundWorker> kullanarak zaman uyumsuz işlem için **Windows** **Form Tasarımcısı**.</span><span class="sxs-lookup"><span data-stu-id="d487b-134">You can create the <xref:System.ComponentModel.BackgroundWorker> for your asynchronous operation using the **Windows** **Forms Designer**.</span></span>  
  
#### <a name="to-create-a-backgroundworker-with-the-designer"></a><span data-ttu-id="d487b-135">Bir BackgroundWorker tasarımcı ile oluşturma</span><span class="sxs-lookup"><span data-stu-id="d487b-135">To create a BackgroundWorker with the Designer</span></span>  
  
-   <span data-ttu-id="d487b-136">Gelen **bileşenleri** sekmesinde **araç kutusu**, sürükleyin bir <xref:System.ComponentModel.BackgroundWorker> forma.</span><span class="sxs-lookup"><span data-stu-id="d487b-136">From the **Components** tab of the **Toolbox**, drag a <xref:System.ComponentModel.BackgroundWorker> onto the form.</span></span>  
  
## <a name="adding-asynchronous-event-handlers"></a><span data-ttu-id="d487b-137">Zaman uyumsuz olay işleyicileri ekleme</span><span class="sxs-lookup"><span data-stu-id="d487b-137">Adding Asynchronous Event Handlers</span></span>  
 <span data-ttu-id="d487b-138">Olay işleyicileri eklemek artık hazırsınız <xref:System.ComponentModel.BackgroundWorker> bileşenin zaman uyumsuz olayları.</span><span class="sxs-lookup"><span data-stu-id="d487b-138">You are now ready to add event handlers for the <xref:System.ComponentModel.BackgroundWorker> component's asynchronous events.</span></span> <span data-ttu-id="d487b-139">Fibonacci numaraları hesaplar, arka planda çalıştırılacak zaman alıcı bir işlem olay işleyicilere biri tarafından çağrılır.</span><span class="sxs-lookup"><span data-stu-id="d487b-139">The time-consuming operation that will run in the background, which computes Fibonacci numbers, is called by one of these event handlers.</span></span>  
  
#### <a name="to-implement-asynchronous-event-handlers"></a><span data-ttu-id="d487b-140">Zaman uyumsuz olay işleyicileri uygulamak için</span><span class="sxs-lookup"><span data-stu-id="d487b-140">To implement asynchronous event handlers</span></span>  
  
1.  <span data-ttu-id="d487b-141">İçinde **özellikleri** penceresinde ile <xref:System.ComponentModel.BackgroundWorker> halen seçiliyken, bileşene tıklayın **olayları** düğmesi.</span><span class="sxs-lookup"><span data-stu-id="d487b-141">In the **Properties** window, with the <xref:System.ComponentModel.BackgroundWorker> component still selected, click the **Events** button.</span></span> <span data-ttu-id="d487b-142">Çift <xref:System.ComponentModel.BackgroundWorker.DoWork> ve <xref:System.ComponentModel.BackgroundWorker.RunWorkerCompleted> olayları olay işleyicileri oluşturun.</span><span class="sxs-lookup"><span data-stu-id="d487b-142">Double-click the <xref:System.ComponentModel.BackgroundWorker.DoWork> and <xref:System.ComponentModel.BackgroundWorker.RunWorkerCompleted> events to create event handlers.</span></span> <span data-ttu-id="d487b-143">Olay işleyicileri kullanma hakkında daha fazla bilgi için bkz. [nasıl yapılır: olay işleyicileri kullanarak Tasarımcı](https://msdn.microsoft.com/library/8461e9b8-14e8-406f-936e-3726732b23d2).</span><span class="sxs-lookup"><span data-stu-id="d487b-143">For more information about how to use event handlers, see [How to: Create Event Handlers Using the Designer](https://msdn.microsoft.com/library/8461e9b8-14e8-406f-936e-3726732b23d2).</span></span>  
  
2.  <span data-ttu-id="d487b-144">Adlı yeni bir yöntem oluşturma `ComputeFibonacci`, formunuzda.</span><span class="sxs-lookup"><span data-stu-id="d487b-144">Create a new method, called `ComputeFibonacci`, in your form.</span></span> <span data-ttu-id="d487b-145">Bu yöntem asıl işi yapan ve arka planda çalışır.</span><span class="sxs-lookup"><span data-stu-id="d487b-145">This method does the actual work, and it will run in the background.</span></span> <span data-ttu-id="d487b-146">Bu kod, daha büyük sayılar için tamamlamak için katlanarak uzun zaman ayırdığınız özellikle verimsiz Fibonacci algoritma özyinelemeli uygulamasını gösterir.</span><span class="sxs-lookup"><span data-stu-id="d487b-146">This code demonstrates the recursive implementation of the Fibonacci algorithm, which is notably inefficient, taking exponentially longer time to complete for larger numbers.</span></span> <span data-ttu-id="d487b-147">Uygulamanızdaki gecikmelere neden olabilir bir işlem göstermek için yalnızca tanım amaçlıdır için burada kullanılır.</span><span class="sxs-lookup"><span data-stu-id="d487b-147">It is used here for illustrative purposes, to show an operation that can introduce long delays in your application.</span></span>  
  
     [!code-cpp[System.ComponentModel.BackgroundWorker#10](../../../../samples/snippets/cpp/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/CPP/fibonacciform.cpp#10)]
     [!code-csharp[System.ComponentModel.BackgroundWorker#10](../../../../samples/snippets/csharp/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/CS/fibonacciform.cs#10)]
     [!code-vb[System.ComponentModel.BackgroundWorker#10](../../../../samples/snippets/visualbasic/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/VB/fibonacciform.vb#10)]  
  
3.  <span data-ttu-id="d487b-148">İçinde <xref:System.ComponentModel.BackgroundWorker.DoWork> olay işleyicisi, bir çağrı ekleyin `ComputeFibonacci` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="d487b-148">In the <xref:System.ComponentModel.BackgroundWorker.DoWork> event handler, add a call to the `ComputeFibonacci` method.</span></span> <span data-ttu-id="d487b-149">İlk parametre alması `ComputeFibonacci` gelen <xref:System.ComponentModel.DoWorkEventArgs.Argument%2A> özelliği <xref:System.ComponentModel.DoWorkEventArgs>.</span><span class="sxs-lookup"><span data-stu-id="d487b-149">Take the first parameter for `ComputeFibonacci` from the <xref:System.ComponentModel.DoWorkEventArgs.Argument%2A> property of the <xref:System.ComponentModel.DoWorkEventArgs>.</span></span> <span data-ttu-id="d487b-150"><xref:System.ComponentModel.BackgroundWorker> Ve <xref:System.ComponentModel.DoWorkEventArgs> parametreleri kullanılacak daha sonra ilerleme durumunu raporlama ve iptal için destek.</span><span class="sxs-lookup"><span data-stu-id="d487b-150">The <xref:System.ComponentModel.BackgroundWorker> and <xref:System.ComponentModel.DoWorkEventArgs> parameters will be used later for progress reporting and cancellation support.</span></span> <span data-ttu-id="d487b-151">Dönüş değeri atamak `ComputeFibonacci` için <xref:System.ComponentModel.DoWorkEventArgs.Result%2A> özelliği <xref:System.ComponentModel.DoWorkEventArgs>.</span><span class="sxs-lookup"><span data-stu-id="d487b-151">Assign the return value from `ComputeFibonacci` to the <xref:System.ComponentModel.DoWorkEventArgs.Result%2A> property of the <xref:System.ComponentModel.DoWorkEventArgs>.</span></span> <span data-ttu-id="d487b-152">Bu sonuç için kullanılabilecek <xref:System.ComponentModel.BackgroundWorker.RunWorkerCompleted> olay işleyicisi.</span><span class="sxs-lookup"><span data-stu-id="d487b-152">This result will be available to the <xref:System.ComponentModel.BackgroundWorker.RunWorkerCompleted> event handler.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="d487b-153"><xref:System.ComponentModel.BackgroundWorker.DoWork> Olay işleyicisi başvurmuyor `backgroundWorker1` örnek değişkeni, doğrudan bu belirli bir örneği için bu olay işleyicisi eşleştiği gibi <xref:System.ComponentModel.BackgroundWorker>.</span><span class="sxs-lookup"><span data-stu-id="d487b-153">The <xref:System.ComponentModel.BackgroundWorker.DoWork> event handler does not reference the `backgroundWorker1` instance variable directly, as this would couple this event handler to a specific instance of <xref:System.ComponentModel.BackgroundWorker>.</span></span> <span data-ttu-id="d487b-154">Bunun yerine, bir başvuru <xref:System.ComponentModel.BackgroundWorker> , oluşturulan bu olay kurtarılan `sender` parametresi.</span><span class="sxs-lookup"><span data-stu-id="d487b-154">Instead, a reference to the <xref:System.ComponentModel.BackgroundWorker> that raised this event is recovered from the `sender` parameter.</span></span> <span data-ttu-id="d487b-155">Formun birden fazla barındırdığında, bu önemlidir, <xref:System.ComponentModel.BackgroundWorker>.</span><span class="sxs-lookup"><span data-stu-id="d487b-155">This is important when the form hosts more than one <xref:System.ComponentModel.BackgroundWorker>.</span></span> <span data-ttu-id="d487b-156">Tüm kullanıcı arabirimi nesneleri değiştiremez önemlidir, <xref:System.ComponentModel.BackgroundWorker.DoWork> olay işleyicisi.</span><span class="sxs-lookup"><span data-stu-id="d487b-156">It is also important not to manipulate any user-interface objects in your <xref:System.ComponentModel.BackgroundWorker.DoWork> event handler.</span></span> <span data-ttu-id="d487b-157">Bunun yerine, kullanıcı arabirimi aracılığıyla iletişim kurmak <xref:System.ComponentModel.BackgroundWorker> olayları.</span><span class="sxs-lookup"><span data-stu-id="d487b-157">Instead, communicate to the user interface through the <xref:System.ComponentModel.BackgroundWorker> events.</span></span>  
  
     [!code-cpp[System.ComponentModel.BackgroundWorker#5](../../../../samples/snippets/cpp/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/CPP/fibonacciform.cpp#5)]
     [!code-csharp[System.ComponentModel.BackgroundWorker#5](../../../../samples/snippets/csharp/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/CS/fibonacciform.cs#5)]
     [!code-vb[System.ComponentModel.BackgroundWorker#5](../../../../samples/snippets/visualbasic/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/VB/fibonacciform.vb#5)]  
  
4.  <span data-ttu-id="d487b-158">İçinde `startAsyncButton` denetimin <xref:System.Windows.Forms.Control.Click> olay işleyicisi, zaman uyumsuz işlemi başlatan kodu ekleyin.</span><span class="sxs-lookup"><span data-stu-id="d487b-158">In the `startAsyncButton` control's <xref:System.Windows.Forms.Control.Click> event handler, add the code that starts the asynchronous operation.</span></span>  
  
     [!code-cpp[System.ComponentModel.BackgroundWorker#13](../../../../samples/snippets/cpp/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/CPP/fibonacciform.cpp#13)]
     [!code-csharp[System.ComponentModel.BackgroundWorker#13](../../../../samples/snippets/csharp/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/CS/fibonacciform.cs#13)]
     [!code-vb[System.ComponentModel.BackgroundWorker#13](../../../../samples/snippets/visualbasic/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/VB/fibonacciform.vb#13)]  
  
5.  <span data-ttu-id="d487b-159">İçinde <xref:System.ComponentModel.BackgroundWorker.RunWorkerCompleted> olay işleyicisi hesaplama sonucu atama `resultLabel` denetimi.</span><span class="sxs-lookup"><span data-stu-id="d487b-159">In the <xref:System.ComponentModel.BackgroundWorker.RunWorkerCompleted> event handler, assign the result of the calculation to the `resultLabel` control.</span></span>  
  
     [!code-cpp[System.ComponentModel.BackgroundWorker#6](../../../../samples/snippets/cpp/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/CPP/fibonacciform.cpp#6)]
     [!code-csharp[System.ComponentModel.BackgroundWorker#6](../../../../samples/snippets/csharp/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/CS/fibonacciform.cs#6)]
     [!code-vb[System.ComponentModel.BackgroundWorker#6](../../../../samples/snippets/visualbasic/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/VB/fibonacciform.vb#6)]  
  
## <a name="adding-progress-reporting-and-support-for-cancellation"></a><span data-ttu-id="d487b-160">İlerleme durumunu raporlama ve iptal için destek ekleme</span><span class="sxs-lookup"><span data-stu-id="d487b-160">Adding Progress Reporting and Support for Cancellation</span></span>  
 <span data-ttu-id="d487b-161">Uzun sürmesi zaman uyumsuz işlemler için çoğunlukla rapor ilerleme kullanıcıya ve kullanıcı işlemi iptal etmek izin vermek için tercih edilir.</span><span class="sxs-lookup"><span data-stu-id="d487b-161">For asynchronous operations that will take a long time, it is often desirable to report progress to the user and to allow the user to cancel the operation.</span></span> <span data-ttu-id="d487b-162"><xref:System.ComponentModel.BackgroundWorker> Sınıf, arka plan işlemi işlemi ilerleme durumu göndermeye izin veren bir olayı sağlar.</span><span class="sxs-lookup"><span data-stu-id="d487b-162">The <xref:System.ComponentModel.BackgroundWorker> class provides an event that allows you to post progress as your background operation proceeds.</span></span> <span data-ttu-id="d487b-163">Ayrıca, bir çağrı algılamak çalışan kod sağlayan bir bayrak sağlar <xref:System.ComponentModel.BackgroundWorker.CancelAsync%2A> ve kendisini kesme.</span><span class="sxs-lookup"><span data-stu-id="d487b-163">It also provides a flag that allows your worker code to detect a call to <xref:System.ComponentModel.BackgroundWorker.CancelAsync%2A> and interrupt itself.</span></span>  
  
#### <a name="to-implement-progress-reporting"></a><span data-ttu-id="d487b-164">İlerleme durumunu bildirme uygulamak için</span><span class="sxs-lookup"><span data-stu-id="d487b-164">To implement progress reporting</span></span>  
  
1.  <span data-ttu-id="d487b-165">İçinde **özellikleri**, penceresinde `backgroundWorker1`.</span><span class="sxs-lookup"><span data-stu-id="d487b-165">In the **Properties**, window, select `backgroundWorker1`.</span></span> <span data-ttu-id="d487b-166"><xref:System.ComponentModel.BackgroundWorker.WorkerReportsProgress%2A> ve <xref:System.ComponentModel.BackgroundWorker.WorkerSupportsCancellation%2A> özelliklerini `true` olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="d487b-166">Set the <xref:System.ComponentModel.BackgroundWorker.WorkerReportsProgress%2A> and <xref:System.ComponentModel.BackgroundWorker.WorkerSupportsCancellation%2A> properties to `true`.</span></span>  
  
2.  <span data-ttu-id="d487b-167">İki değişken bildirin `FibonacciCalculator` formu.</span><span class="sxs-lookup"><span data-stu-id="d487b-167">Declare two variables in the `FibonacciCalculator` form.</span></span> <span data-ttu-id="d487b-168">Bu ilerleme durumunu izlemek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="d487b-168">These will be used to track progress.</span></span>  
  
     [!code-cpp[System.ComponentModel.BackgroundWorker#14](../../../../samples/snippets/cpp/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/CPP/fibonacciform.cpp#14)]
     [!code-csharp[System.ComponentModel.BackgroundWorker#14](../../../../samples/snippets/csharp/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/CS/fibonacciform.cs#14)]
     [!code-vb[System.ComponentModel.BackgroundWorker#14](../../../../samples/snippets/visualbasic/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/VB/fibonacciform.vb#14)]  
  
3.  <span data-ttu-id="d487b-169">İçin bir olay işleyicisi ekleme <xref:System.ComponentModel.BackgroundWorker.ProgressChanged> olay.</span><span class="sxs-lookup"><span data-stu-id="d487b-169">Add an event handler for the <xref:System.ComponentModel.BackgroundWorker.ProgressChanged> event.</span></span> <span data-ttu-id="d487b-170">İçinde <xref:System.ComponentModel.BackgroundWorker.ProgressChanged> olay işleyicisi, güncelleştirme <xref:System.Windows.Forms.ProgressBar> ile <xref:System.ComponentModel.ProgressChangedEventArgs.ProgressPercentage%2A> özelliği <xref:System.ComponentModel.ProgressChangedEventArgs> parametresi.</span><span class="sxs-lookup"><span data-stu-id="d487b-170">In the <xref:System.ComponentModel.BackgroundWorker.ProgressChanged> event handler, update the <xref:System.Windows.Forms.ProgressBar> with the <xref:System.ComponentModel.ProgressChangedEventArgs.ProgressPercentage%2A> property of the <xref:System.ComponentModel.ProgressChangedEventArgs> parameter.</span></span>  
  
     [!code-cpp[System.ComponentModel.BackgroundWorker#7](../../../../samples/snippets/cpp/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/CPP/fibonacciform.cpp#7)]
     [!code-csharp[System.ComponentModel.BackgroundWorker#7](../../../../samples/snippets/csharp/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/CS/fibonacciform.cs#7)]
     [!code-vb[System.ComponentModel.BackgroundWorker#7](../../../../samples/snippets/visualbasic/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/VB/fibonacciform.vb#7)]  
  
#### <a name="to-implement-support-for-cancellation"></a><span data-ttu-id="d487b-171">İptal için destek uygulamak için</span><span class="sxs-lookup"><span data-stu-id="d487b-171">To implement support for cancellation</span></span>  
  
1.  <span data-ttu-id="d487b-172">İçinde `cancelAsyncButton` denetimin <xref:System.Windows.Forms.Control.Click> olay işleyicisi, zaman uyumsuz işlemi iptal eden kodu ekleyin.</span><span class="sxs-lookup"><span data-stu-id="d487b-172">In the `cancelAsyncButton` control's <xref:System.Windows.Forms.Control.Click> event handler, add the code that cancels the asynchronous operation.</span></span>  
  
     [!code-cpp[System.ComponentModel.BackgroundWorker#4](../../../../samples/snippets/cpp/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/CPP/fibonacciform.cpp#4)]
     [!code-csharp[System.ComponentModel.BackgroundWorker#4](../../../../samples/snippets/csharp/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/CS/fibonacciform.cs#4)]
     [!code-vb[System.ComponentModel.BackgroundWorker#4](../../../../samples/snippets/visualbasic/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/VB/fibonacciform.vb#4)]  
  
2.  <span data-ttu-id="d487b-173">Aşağıdaki kod parça içinde `ComputeFibonacci` yöntemi rapor ilerleme durumu ve Destek iptali.</span><span class="sxs-lookup"><span data-stu-id="d487b-173">The following code fragments in the `ComputeFibonacci` method report progress and support cancellation.</span></span>  
  
     [!code-cpp[System.ComponentModel.BackgroundWorker#11](../../../../samples/snippets/cpp/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/CPP/fibonacciform.cpp#11)]
     [!code-csharp[System.ComponentModel.BackgroundWorker#11](../../../../samples/snippets/csharp/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/CS/fibonacciform.cs#11)]
     [!code-vb[System.ComponentModel.BackgroundWorker#11](../../../../samples/snippets/visualbasic/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/VB/fibonacciform.vb#11)]  
    [!code-cpp[System.ComponentModel.BackgroundWorker#12](../../../../samples/snippets/cpp/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/CPP/fibonacciform.cpp#12)]
    [!code-csharp[System.ComponentModel.BackgroundWorker#12](../../../../samples/snippets/csharp/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/CS/fibonacciform.cs#12)]
    [!code-vb[System.ComponentModel.BackgroundWorker#12](../../../../samples/snippets/visualbasic/VS_Snippets_Winforms/System.ComponentModel.BackgroundWorker/VB/fibonacciform.vb#12)]  
  
## <a name="checkpoint"></a><span data-ttu-id="d487b-174">Denetim noktası</span><span class="sxs-lookup"><span data-stu-id="d487b-174">Checkpoint</span></span>  
 <span data-ttu-id="d487b-175">Bu noktada, derleyin ve Fibonacci hesaplayıcı uygulamayı çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="d487b-175">At this point, you can compile and run the Fibonacci Calculator application.</span></span>  
  
#### <a name="to-test-your-project"></a><span data-ttu-id="d487b-176">Projenizi test etmek için</span><span class="sxs-lookup"><span data-stu-id="d487b-176">To test your project</span></span>  
  
-   <span data-ttu-id="d487b-177">Derlemek ve uygulamayı çalıştırmak için F5 tuşuna basın.</span><span class="sxs-lookup"><span data-stu-id="d487b-177">Press F5 to compile and run the application.</span></span>  
  
     <span data-ttu-id="d487b-178">Hesaplama arka planda çalışırken göreceğiniz <xref:System.Windows.Forms.ProgressBar> hesaplamanın tamamlanma yönelik ilerleme durumunu görüntüleme.</span><span class="sxs-lookup"><span data-stu-id="d487b-178">While the calculation is running in the background, you will see the <xref:System.Windows.Forms.ProgressBar> displaying the progress of the calculation toward completion.</span></span> <span data-ttu-id="d487b-179">Ayrıca, bekleyen işlemi iptal edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d487b-179">You can also cancel the pending operation.</span></span>  
  
     <span data-ttu-id="d487b-180">Küçük sayılar için hesaplama çok hızlı olması gerekir, ancak daha büyük sayılar için fark edilebilir bir gecikme görmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="d487b-180">For small numbers, the calculation should be very fast, but for larger numbers, you should see a noticeable delay.</span></span> <span data-ttu-id="d487b-181">30 veya daha büyük bir değer girerseniz, bilgisayarınızın hızına bağlı olarak birkaç saniye cinsinden gecikme görmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="d487b-181">If you enter a value of 30 or greater, you should see a delay of several seconds, depending on the speed of your computer.</span></span> <span data-ttu-id="d487b-182">40 büyük değerler için dakikalar ya da hesaplama tamamlanması saatler sürebilir.</span><span class="sxs-lookup"><span data-stu-id="d487b-182">For values greater than 40, it may take minutes or hours to finish the calculation.</span></span> <span data-ttu-id="d487b-183">Hesaplayıcı Fibonacci sayıda bilgi işlem yoğun olsa da, serbestçe form taşımak, en aza indirmek, en üst düzeye çıkarmak ve bile Kapat olduğuna dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="d487b-183">While the calculator is busy computing a large Fibonacci number, notice that you can freely move the form around, minimize, maximize, and even dismiss it.</span></span> <span data-ttu-id="d487b-184">Ana kullanıcı Arabirimi iş parçacığı, hesaplama için beklenmiyor olmasıdır.</span><span class="sxs-lookup"><span data-stu-id="d487b-184">This is because the main UI thread is not waiting for the calculation to finish.</span></span>  
  
## <a name="next-steps"></a><span data-ttu-id="d487b-185">Sonraki Adımlar</span><span class="sxs-lookup"><span data-stu-id="d487b-185">Next Steps</span></span>  
 <span data-ttu-id="d487b-186">Kullanan bir form uyguladıysanız göre bir <xref:System.ComponentModel.BackgroundWorker> arka planda bir hesaplama yürütmek için bileşen diğer zaman uyumsuz işlemler olasılıklarını keşfedebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="d487b-186">Now that you have implemented a form that uses a <xref:System.ComponentModel.BackgroundWorker> component to execute a computation in the background, you can explore other possibilities for asynchronous operations:</span></span>  
  
-   <span data-ttu-id="d487b-187">Birden çok kullanın <xref:System.ComponentModel.BackgroundWorker> birkaç eşzamanlı operasyonlar için nesneleri.</span><span class="sxs-lookup"><span data-stu-id="d487b-187">Use multiple <xref:System.ComponentModel.BackgroundWorker> objects for several simultaneous operations.</span></span>  
  
-   <span data-ttu-id="d487b-188">Çok iş parçacıklı uygulamanızda hata ayıklamak için bkz: [nasıl yapılır: iş parçacıkları penceresini kullanma](/visualstudio/debugger/how-to-use-the-threads-window).</span><span class="sxs-lookup"><span data-stu-id="d487b-188">To debug your multithreaded application, see [How to: Use the Threads Window](/visualstudio/debugger/how-to-use-the-threads-window).</span></span>  
  
-   <span data-ttu-id="d487b-189">Zaman uyumsuz programlama modelini destekleyen kendi bileşeni uygulayın.</span><span class="sxs-lookup"><span data-stu-id="d487b-189">Implement your own component that supports the asynchronous programming model.</span></span> <span data-ttu-id="d487b-190">Daha fazla bilgi için [olay tabanlı zaman uyumsuz desene genel bakış](../../../../docs/standard/asynchronous-programming-patterns/event-based-asynchronous-pattern-overview.md).</span><span class="sxs-lookup"><span data-stu-id="d487b-190">For more information, see [Event-based Asynchronous Pattern Overview](../../../../docs/standard/asynchronous-programming-patterns/event-based-asynchronous-pattern-overview.md).</span></span>  
  
    > [!CAUTION]
    >  <span data-ttu-id="d487b-191">Her türlü çoklu iş parçacığı kullanırken, büyük olasılıkla kendiniz çok önemli ve karmaşık hataları ortaya çıkarır.</span><span class="sxs-lookup"><span data-stu-id="d487b-191">When using multithreading of any sort, you potentially expose yourself to very serious and complex bugs.</span></span> <span data-ttu-id="d487b-192">Başvurun [yönetilen iş parçacığı oluşturma en iyi yöntemler](../../../../docs/standard/threading/managed-threading-best-practices.md) kullanan herhangi bir çözümü uygulamadan önce çoklu iş parçacığı kullanımı.</span><span class="sxs-lookup"><span data-stu-id="d487b-192">Consult the [Managed Threading Best Practices](../../../../docs/standard/threading/managed-threading-best-practices.md) before implementing any solution that uses multithreading.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d487b-193">Ayrıca Bkz.</span><span class="sxs-lookup"><span data-stu-id="d487b-193">See Also</span></span>  
 <xref:System.ComponentModel.BackgroundWorker>  
 [<span data-ttu-id="d487b-194">Yönetilen İş Parçacığı Oluşturma En İyi Yöntemleri</span><span class="sxs-lookup"><span data-stu-id="d487b-194">Managed Threading Best Practices</span></span>](../../../../docs/standard/threading/managed-threading-best-practices.md)  
 [<span data-ttu-id="d487b-195">Bileşenlerinde çoklu iş parçacığı kullanımı</span><span class="sxs-lookup"><span data-stu-id="d487b-195">Multithreading in Components</span></span>](https://msdn.microsoft.com/library/2fc31e68-fb71-4544-b654-0ce720478779)  
 [<span data-ttu-id="d487b-196">IN derleme değil: Visual Basic'te çoklu iş parçacığı kullanımı</span><span class="sxs-lookup"><span data-stu-id="d487b-196">NOT IN BUILD: Multithreading in Visual Basic</span></span>](https://msdn.microsoft.com/library/c731a50c-09c1-4468-9646-54c86b75d269)  
 [<span data-ttu-id="d487b-197">Nasıl yapılır: Arka Plan İşlemi Kullanan Bir Form Uygulama</span><span class="sxs-lookup"><span data-stu-id="d487b-197">How to: Implement a Form That Uses a Background Operation</span></span>](../../../../docs/framework/winforms/controls/how-to-implement-a-form-that-uses-a-background-operation.md)  
 [<span data-ttu-id="d487b-198">İzlenecek yol: Arka Planda İşlem Çalıştırma</span><span class="sxs-lookup"><span data-stu-id="d487b-198">Walkthrough: Running an Operation in the Background</span></span>](../../../../docs/framework/winforms/controls/walkthrough-running-an-operation-in-the-background.md)  
 [<span data-ttu-id="d487b-199">BackgroundWorker Bileşeni</span><span class="sxs-lookup"><span data-stu-id="d487b-199">BackgroundWorker Component</span></span>](../../../../docs/framework/winforms/controls/backgroundworker-component.md)
