---
title: Bulut için hazır olan dayanıklı hizmetler oluşturun. Bulutta geçici hataları benimseyin
description: Azure Bulut ve Windows kapsayıcıları ile mevcut .NET uygulamalarını modernleştirme | Bulut için hazır olan dayanıklı hizmetler oluşturun. Bulutta geçici hataları benimseyin
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 04/30/2018
ms.openlocfilehash: 16228321cc788b381603513213130415eb73a95c
ms.sourcegitcommit: ccd8c36b0d74d99291d41aceb14cf98d74dc9d2b
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 12/10/2018
ms.locfileid: "53128862"
---
# <a name="build-resilient-services-ready-for-the-cloud-embrace-transient-failures-in-the-cloud"></a><span data-ttu-id="1b1af-105">Bulut için hazır olan dayanıklı hizmetler derleme: Bulutta geçici hataları benimseyin</span><span class="sxs-lookup"><span data-stu-id="1b1af-105">Build resilient services ready for the cloud: Embrace transient failures in the cloud</span></span>

<span data-ttu-id="1b1af-106">Dayanıklılık, hatalardan kurtularak çalışmaya devam yeteneğidir.</span><span class="sxs-lookup"><span data-stu-id="1b1af-106">Resiliency is the ability to recover from failures and continue to function.</span></span> <span data-ttu-id="1b1af-107">Dayanıklılık hakkında hatalarını önleme ancak hataları meydana gelir gerçeğini kabul eden ve ardından bunları kapalı kalma süresi veya veri kaybı engelleyen bir şekilde yanıt değil.</span><span class="sxs-lookup"><span data-stu-id="1b1af-107">Resiliency is not about avoiding failures, but accepting the fact that failures will occur, and then responding to them in a way that avoids downtime or data loss.</span></span> <span data-ttu-id="1b1af-108">Dayanıklılığın hedefi, bir hatadan sonra uygulamayı tam çalışır duruma getirmektir.</span><span class="sxs-lookup"><span data-stu-id="1b1af-108">The goal of resiliency is to return the application to a fully functioning state after a failure.</span></span>

<span data-ttu-id="1b1af-109">En az bir yazılım tabanlı modeli dayanıklılık yerine bir donanım tabanlı modeli uygular, uygulamanızın bulut için hazır olur.</span><span class="sxs-lookup"><span data-stu-id="1b1af-109">Your application is ready for the cloud when, at a minimum, it implements a software-based model of resiliency, rather than a hardware-based model.</span></span> <span data-ttu-id="1b1af-110">Bulut uygulamanızın kesinlikle oluşacak kısmi hataları benimseyin gerekir.</span><span class="sxs-lookup"><span data-stu-id="1b1af-110">Your cloud application must embrace the partial failures that will certainly occur.</span></span> <span data-ttu-id="1b1af-111">Tasarım veya kısmen beklenen kısmi hatalarıyla dayanıklılığı sağlamak için uygulamanızı yeniden düzenleyin.</span><span class="sxs-lookup"><span data-stu-id="1b1af-111">Design or partially refactor your application to achieve resiliency with expected partial failures.</span></span> <span data-ttu-id="1b1af-112">Geçici ağ kesintileri ve düğümleri ya da bulutta kilitlenen VM'ler gibi kısmi hataları olan başa çıkacak şekilde tasarlanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="1b1af-112">It should be designed to cope with partial failures, like transient network outages and nodes, or VMs crashing in the cloud.</span></span> <span data-ttu-id="1b1af-113">Bir orchestrator kümedeki farklı bir düğüme taşınmasını bile kapsayıcıları, uygulama içinde aralıklı kısa hatalarına neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="1b1af-113">Even containers being moved to a different node within an orchestrator cluster can cause intermittent short failures within the application.</span></span>

## <a name="handling-partial-failure"></a><span data-ttu-id="1b1af-114">Kısmi hata işleme</span><span class="sxs-lookup"><span data-stu-id="1b1af-114">Handling partial failure</span></span>

<span data-ttu-id="1b1af-115">Bulut tabanlı bir uygulama içinde bir ardı arkası kısmi hata riskini yoktur.</span><span class="sxs-lookup"><span data-stu-id="1b1af-115">In a cloud-based application, there's an ever-present risk of partial failure.</span></span> <span data-ttu-id="1b1af-116">Örneğin, bir tek bir Web sitesi örneği veya bir kapsayıcı başarısız olabilir veya kullanılamıyor veya kısa bir süre için yanıt vermiyor olabilir.</span><span class="sxs-lookup"><span data-stu-id="1b1af-116">For instance, a single website instance or a container might fail, or it might be unavailable or unresponsive for a short time.</span></span> <span data-ttu-id="1b1af-117">Alternatif olarak, tek bir VM veya sunucusuna kilitlenmesine neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="1b1af-117">Or, a single VM or server might crash.</span></span>

<span data-ttu-id="1b1af-118">Bir hizmet, istemciler ve hizmetler ayrı işlemler olduğundan, bir istemcinin isteğine zamanında yanıt vermek mümkün olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="1b1af-118">Because clients and services are separate processes, a service might not be able to respond in a timely manner to a client's request.</span></span> <span data-ttu-id="1b1af-119">Hizmet aşırı yüklenmiş ve yavaş isteklere yanıt ya da onu ağ sorunları nedeniyle kısa bir süre için erişilebilir olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="1b1af-119">The service might be overloaded and respond slowly to requests, or it might not be accessible for a short time because of network issues.</span></span>

<span data-ttu-id="1b1af-120">Örneğin, bir veritabanını Azure SQL veritabanı'nda erişen tek parça bir .NET uygulaması göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="1b1af-120">For example, consider a monolithic .NET application that accesses a database in Azure SQL Database.</span></span> <span data-ttu-id="1b1af-121">Azure SQL veritabanı veya başka bir üçüncü taraf hizmet için kısa bir yanıt vermiyorsa (bir Azure SQL veritabanı farklı bir düğüme veya sunucuya taşınması ve birkaç saniye süreyle yanıt vermiyor) zaman, herhangi bir işlem yapmak kullanıcı denediğinde, uygulama kilitlenebilir ve Göster w aynı anda bir özel durum.</span><span class="sxs-lookup"><span data-stu-id="1b1af-121">If the Azure SQL database or any other third-party service is unresponsive for a brief time (an Azure SQL database might be moved to a different node or server, and be unresponsive for a few seconds), when the user tries to do any action, the application might crash and show an exception at the same moment.</span></span>

<span data-ttu-id="1b1af-122">Benzer bir senaryo, HTTP Hizmetleri kullanan bir uygulama ortaya çıkabilir.</span><span class="sxs-lookup"><span data-stu-id="1b1af-122">A similar scenario might occur in an app that consumes HTTP services.</span></span> <span data-ttu-id="1b1af-123">Bulutta sırasında kısa, geçici bir hata, ağ veya hizmet kullanılabilir olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="1b1af-123">The network or the service itself might not be available in the cloud during a short, transient failure.</span></span>

<span data-ttu-id="1b1af-124">Şekil 4-9'da gösterildiği gibi dayanıklı bir uygulama, uygulama kaynaklarında geçici hataları işlemek için bir fırsat vermek için "üstel geri alma ile yeniden" tekniklerle uygulamalıdır.</span><span class="sxs-lookup"><span data-stu-id="1b1af-124">A resilient application like the one shown in Figure 4-9 should implement techniques like "retries with exponential backoff" to give the application an opportunity to handle transient failures in resources.</span></span> <span data-ttu-id="1b1af-125">Ayrıca, uygulamalarınızda "devre Kesiciler" kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="1b1af-125">You also should use "circuit breakers" in your applications.</span></span> <span data-ttu-id="1b1af-126">Devre kesici uzun vadeli bir hataya gerçekten olduğunda, bir kaynağa erişmeye çalışırken uygulamanın durdurur.</span><span class="sxs-lookup"><span data-stu-id="1b1af-126">A circuit breaker stops an application from trying to access a resource when it's actually a long-term failure.</span></span> <span data-ttu-id="1b1af-127">Devre kesici kullanarak, uygulamanın kendisi için hizmet reddine provoking önler.</span><span class="sxs-lookup"><span data-stu-id="1b1af-127">By using a circuit breaker, the application avoids provoking a denial of service to itself.</span></span>

![Üstel geri alma ile yeniden tarafından işlenen kısmi hataları](./media/image9.png)

> <span data-ttu-id="1b1af-129">**Şekil 4-9.**</span><span class="sxs-lookup"><span data-stu-id="1b1af-129">**Figure 4-9.**</span></span> <span data-ttu-id="1b1af-130">Üstel geri alma ile yeniden tarafından işlenen kısmi hataları</span><span class="sxs-lookup"><span data-stu-id="1b1af-130">Partial failures handled by retries with exponential backoff</span></span>

<span data-ttu-id="1b1af-131">Bu teknikler HTTP kaynağı hem de veritabanı kaynaklarını kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="1b1af-131">You can use these techniques both in HTTP resources and in database resources.</span></span> <span data-ttu-id="1b1af-132">Böylece, bu teknikler Hizmetleri düzeyinde (HTTP) ve veri katmanı düzeyinde (TCP) Şekil 4-9'da uygulama 3 katmanlı mimarisini temel alır.</span><span class="sxs-lookup"><span data-stu-id="1b1af-132">In Figure 4-9, the application is based on a 3-tier architecture, so you need these techniques at the services level (HTTP) and at the data tier level (TCP).</span></span> <span data-ttu-id="1b1af-133">Yalnızca bir tek uygulama katmanına ek (ek hizmet veya mikro hizmetler) veritabanı olarak kullanan tek parçalı bir uygulamada, veritabanı bağlantı düzeyinde geçici hataları işleme yeterli olabilir.</span><span class="sxs-lookup"><span data-stu-id="1b1af-133">In a monolithic application that uses only a single app tier in addition to the database (no additional services or microservices), handling transient failures at the database connection level might be enough.</span></span> <span data-ttu-id="1b1af-134">Bu senaryoda, yalnızca belirli bir yapılandırma veritabanı bağlantısı gereklidir.</span><span class="sxs-lookup"><span data-stu-id="1b1af-134">In that scenario, just a particular configuration of the database connection is required.</span></span>

<span data-ttu-id="1b1af-135">Kullanmakta olduğunuz, .NET sürümüne bağlı olarak veritabanına erişen dayanıklı iletişimleri uygularken basit olabilir (örneğin, [Entity Framework 6 veya sonrası](https://msdn.microsoft.com/library/dn456835(v=vs.113).aspx), bu yapılandırma adımlarından oluşur Veritabanı bağlantısı).</span><span class="sxs-lookup"><span data-stu-id="1b1af-135">When implementing resilient communications that access the database, depending on the version of .NET you are using, it can be straightforward (for example, [with Entity Framework 6 or later](https://msdn.microsoft.com/library/dn456835(v=vs.113).aspx), it's just a matter of configuring the database connection).</span></span> <span data-ttu-id="1b1af-136">Veya ek kitaplıklar gibi kullanmanız gerekebilir [geçici hata işleme uygulama bloğu](https://msdn.microsoft.com/library/hh680934(v=pandp.50).aspx) (önceki sürümlerine yönelik .NET), veya hatta kendi kitaplığı uygulayın.</span><span class="sxs-lookup"><span data-stu-id="1b1af-136">Or, you might need to use additional libraries like the [Transient Fault Handling Application Block](https://msdn.microsoft.com/library/hh680934(v=pandp.50).aspx) (for earlier versions of .NET), or even implement your own library.</span></span>

<span data-ttu-id="1b1af-137">HTTP yeniden deneme ve devre Kesiciler uygularken, .NET için zamanlayıcısının [Polly](https://github.com/App-vNext/Polly) .NET Framework 4.0, .NET Framework 4.5 ve .NET standart, .NET Core desteği içeren 1.1 kitaplığı.</span><span class="sxs-lookup"><span data-stu-id="1b1af-137">When implementing HTTP retries and circuit breakers, the recommendation for .NET is to use the [Polly](https://github.com/App-vNext/Polly) library, which targets .NET Framework 4.0, .NET Framework 4.5, and .NET Standard 1.1, which includes .NET Core support.</span></span>

<span data-ttu-id="1b1af-138">Bulutta kısmi hata işleme stratejileri uygulama hakkında bilgi edinmek için aşağıdaki kaynaklara bakın.</span><span class="sxs-lookup"><span data-stu-id="1b1af-138">To learn how to implement strategies for handling partial failures in the cloud, see the following references.</span></span>

### <a name="additional-resources"></a><span data-ttu-id="1b1af-139">Ek kaynaklar</span><span class="sxs-lookup"><span data-stu-id="1b1af-139">Additional resources</span></span>

-   <span data-ttu-id="1b1af-140">**Kısmi hata işleme için dayanıklı iletişim uygulama**</span><span class="sxs-lookup"><span data-stu-id="1b1af-140">**Implementing resilient communication to handle partial failure**</span></span>

    [https://docs.microsoft.com/dotnet/standard/microservices-architecture/implement-resilient-applications/partial-failure-strategies](../../microservices-architecture/implement-resilient-applications/partial-failure-strategies.md)

-   <span data-ttu-id="1b1af-141">**Varlık çerçevesi bağlantı dayanıklılığı ve yeniden deneme mantığı (sürüm 6 ve üzeri)**</span><span class="sxs-lookup"><span data-stu-id="1b1af-141">**Entity Framework connection resiliency and retry logic (version 6 and later)**</span></span>

    [https://msdn.microsoft.com/library/dn456835(v=vs.113).aspx](https://msdn.microsoft.com/library/dn456835(v=vs.113).aspx)

-   <span data-ttu-id="1b1af-142">**Geçici hata işleme uygulama bloğu**</span><span class="sxs-lookup"><span data-stu-id="1b1af-142">**The Transient Fault Handling Application Block**</span></span>

-   [https://msdn.microsoft.com/library/hh680934(v=pandp.50).aspx](https://msdn.microsoft.com/library/hh680934(v=pandp.50).aspx)

-   <span data-ttu-id="1b1af-143">**Polly kitaplığını dayanıklı HTTP iletişimi**</span><span class="sxs-lookup"><span data-stu-id="1b1af-143">**Polly library for resilient HTTP communication**</span></span>

    https://github.com/App-vNext/Polly

>[!div class="step-by-step"]
><span data-ttu-id="1b1af-144">[Önceki](when-to-deploy-windows-containers-to-azure-container-service-kubernetes.md)
>[İleri](modernize-your-apps-with-monitoring-and-telemetry.md)</span><span class="sxs-lookup"><span data-stu-id="1b1af-144">[Previous](when-to-deploy-windows-containers-to-azure-container-service-kubernetes.md)
[Next](modernize-your-apps-with-monitoring-and-telemetry.md)</span></span>