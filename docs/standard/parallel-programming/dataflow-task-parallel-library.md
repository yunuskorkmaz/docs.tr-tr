---
title: Veri Akışı (Görev Paralel Kitaplığı)
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- Task Parallel Library, dataflows
- TPL dataflow library
ms.assetid: 643575d0-d26d-4c35-8de7-a9c403e97dd6
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 5581f825a23104ff005f3557de26420ee45b5c27
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 05/04/2018
---
# <a name="dataflow-task-parallel-library"></a>Veri Akışı (Görev Paralel Kitaplığı)
<a name="top"></a> Görev paralel kitaplığı (TPL) eşzamanlılık özellikli uygulamalar'ların sağlamlığını artırmak için veri akışı bileşenleri sağlar. Bu veri akışı bileşenleri topluca denir *TPL veri akışı Kitaplığı*. Bu veri akışı modeli, büyük parçalı veri akışı ve ardışık düzen oluşturma görevleri için işlem içi ileti geçirme sağlayarak aktör temelli programlamayı teşvik eder. Veri akışı bileşenleri türleri ve TPL zamanlama altyapısı oluşturmak ve zaman uyumsuz programlama için C#, Visual Basic ve F # dili desteği ile tümleştirebilirsiniz. Bu veri akışı bileşenleri, birbirleriyle zaman uyumsuz olarak iletişim kurması gereken birden fazla işleminiz varsa veya verileri elde ettikçe işlemek istiyorsanız kullanışlıdır. Örneğin, web kamerasından gelen görüntü verilerini işleyen bir uygulamayı düşünün. Veri akışı modelini kullanarak, uygulama görüntü karelerini kullanılabilir oldukça işleyebilir. Uygulama görüntüsü çerçeveler geliştirir, örneğin, hafif düzeltme veya kırmızı göz azaltma gerçekleştirerek oluşturabileceğiniz bir *ardışık düzen* veri akışı bileşenleri. Ardışık düzenin her aşaması, görüntüyü dönüştürmek için TPL tarafından sağlanan işlevsellik gibi daha büyük parçalı paralellik işlevlerini kullanabilir.  
  
 Bu belge, TPL Veri Akışı Kitaplığı'nın ana hatlarını sunmaktadır. Programlama modelini, önceden tanımlı veri akışı bloğu türlerini ve veri akışı bloklarının uygulamanızın özel gereksinimlerini karşılaması için nasıl yapılandırılabileceğini açıklar.  

[!INCLUDE [tpl-install-instructions](../../../includes/tpl-install-instructions.md)]
  
 Bu belgede aşağıdaki bölümler yer alır:  
  
-   [Programlama modeli](#model)  
  
-   [Önceden tanımlanmış veri akışı bloğu türleri](#predefined_types)  
  
-   [Veri akışı bloğu davranışını yapılandırma](#behavior)  
  
-   [Özel veri akışı blokları](#custom)  
  
<a name="model"></a>   
## <a name="programming-model"></a>Programlama Modeli  
 TPL Veri Akışı Kitaplığı, ileti geçirmenin yanı sıra yüksek veri hacmine ve düşük gecikmeye sahip CPU yoğun ve I/O yoğun uygulamalarını paralelleştirmek için bir temel sağlar. Ayrıca, verilerin arabelleğe nasıl alınacağı ve sistemde nasıl hareket edeceği konusunda doğrudan denetim olanağı sağlar. Veri akışı programlama modelini daha iyi anlamak için, diskten zaman uyumsuz olarak görüntü yükleyen ve bu görüntülerin bileşimini oluşturan bir uygulamayı düşünün. Geleneksel programlama modelleri, görevleri koordine etmek ve paylaşılan verilere erişmek için genellikle kilitler gibi eşitleme nesneleri ve geri çağrılar kullanmanızı gerektirir. Veri akışı programlama modelini kullanarak, görüntüleri diskten okundukça işleyen veri akışı nesneleri oluşturabilirsiniz. Veri akışı modelinde, verinin kullanılabilir olduğunda nasıl işleneceğini ve varsa veriler arsındaki bağımlılıkları siz belirtirsiniz. Veriler arasındaki bağımlılıkları çalışma zamanı yönettiği için, paylaşılan verilere erişimi eşitleme gereksinimini genellikle önleyebilirsiniz. Ek olarak, çalışma programları işi verilerinin zaman uyumsuz gelişine göre belirlendiği için, veri akışı temel iş parçacıklarını etkin olarak yöneterek uygulamanın hassaslığını ve veri hacmini artırabilir. Bir Windows Forms uygulaması'nda Görüntü işleme uygulamak için veri akışı programlama modelini kullanan bir örnek için bkz: [izlenecek yol: veri akışı kullanarak bir Windows Forms uygulamasında](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).  
  
### <a name="sources-and-targets"></a>Kaynaklar ve Hedefler  
 TPL veri akışı kitaplığı oluşan *veri akışı blokları*, veri olduğu, arabellek ve işlem veri yapıları. TPL veri akışı blokları üç tür tanımlar: *kaynak blokları*, *hedef blokları*, ve *yayılması blokları*. Bir kaynak blok, veriler için kaynak görevi görür ve okunabilir. Bir hedef blok, veriler için alıcı görevi görür ve yazılabilir. Bir yayıcı blok, hem kaynak blok hem de hedef blok olarak görev görür ve hem okunabilir, hem de yazılabilir. TPL, kaynakları temsil temek için <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601?displayProperty=nameWithType> arabirimini, hedefleri temsil etmek için <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601?displayProperty=nameWithType> arabirimini ve yayıcıları temsil etmek için <xref:System.Threading.Tasks.Dataflow.IPropagatorBlock%602?displayProperty=nameWithType> arabirimini tanımlar. <xref:System.Threading.Tasks.Dataflow.IPropagatorBlock%602>, hem <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601> hem de <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601> arabirimlerinden devralır.  
  
 TPL Veri Akışı Kitaplığı <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601>, <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601> ve <xref:System.Threading.Tasks.Dataflow.IPropagatorBlock%602> arabirimlerini uygulayan önceden tanımlı birkaç veri akışı bloğu türü sağlar. Bu veri akışı bloğu türleri bölümünde bu belgede açıklanan [önceden tanımlanmış veri akışı blok türü](#predefined_types).  
  
### <a name="connecting-blocks"></a>Blokları Bağlama  
 Forma veri akışı blokları bağlanabilir *ardışık düzen*, veri akışı blokları ve doğrusal dizilerini olduğu veya *ağlar*, veri akışı blokları grafiklerini olduğu. Ardışık düzen, bir ağ türüdür. Bir ardışık düzen veya ağda, kaynaklar, veriler kullanılabilir oldukça zaman uyumsuz olarak hedeflere yayarlar. <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.LinkTo%2A?displayProperty=nameWithType> yöntemi, bir kaynak veri akışı bloğunu hedef bloğa bağlar. Bir kaynak sıfır veya daha fazla hedefe bağlanabilir; hedeflere sıfır veya daha fazla kaynaktan bağlanılabilir. Bir ardışık düzen veya ağda eşzamanlı olarak veri akışı bloğu ekleme ve kaldırma işlemleri yapabilirsiniz. Önceden tanımlı veri akışı bloğu türleri bağlama ve bağlantıyı kaldırma işlemlerinin iş parçacığı güvenliğini tüm boyutlarıyla işler.  
  
 Temel işlem hattı oluşturmak için veri akışı blokları bağlanan örnek için bkz: [izlenecek yol: bir veri akışı ardışık düzenleri oluşturma](../../../docs/standard/parallel-programming/walkthrough-creating-a-dataflow-pipeline.md). Daha karmaşık bir ağ oluşturmak için veri akışı blokları bağlanan örnek için bkz: [izlenecek yol: veri akışı kullanarak bir Windows Forms uygulamasında](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md). Kaynak hedef bir ileti sunar sonra bir kaynaktan bir hedef bağlantıyı keser bir örnek için bkz: [nasıl yapılır: veri akışı bloklarının bağlantısını](../../../docs/standard/parallel-programming/how-to-unlink-dataflow-blocks.md).  
  
#### <a name="filtering"></a>Filtreleme  
 Bir kaynağı hedefe bağlamak için <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.LinkTo%2A?displayProperty=nameWithType> yöntemini çağırdığınızda, hedef bloğun bir iletiyi değerine göre kabul edeceğini veya reddedeceğini belirleyen bir temsilci sağlayabilirsiniz. Bu filtreleme mekanizması, bir veri akışı bloğunun yalnızca belirli değerleri almasını sağlamak için kullanışlı bir yoldur. Çoğu önceden tanımlı veri akışı bloğu türünde, eğer bir kaynak blok birden çok hedef bloğa bağlı ise, bir hedef blok iletiyi reddettiğinde kaynak o iletiyi sonraki hedefe sunar. Kaynağın hedeflere iletileri hangi sırayla sunacağı kaynak tarafından tanımlanır ve kaynağın türüne göre farklılık gösterebilir. Çoğu kaynak blok türü, bir hedef iletiyi kabul ettiğinde o iletiyi sunmayı bırakır. Bazı hedefler iletiyi reddetse her iletiyi tüm hedeflere sunan <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> sınıfı, bu kural için bir istisnadır. Yalnızca belirli iletileri işlemek için filtreleme kullanan bir örnek için bkz: [izlenecek yol: veri akışı kullanarak bir Windows Forms uygulamasında](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).  
  
> [!IMPORTANT]
>  Önceden tanımlı veri akışı bloklarının her biri iletilerin alındıkları sırayla gönderilmesini sağladığından, kaynak bloğun sonraki iletiyi işleyebilmesi için kaynak bloktaki her ileti okunmalıdır. Bu nedenle, birden çok hedefi tek bir kaynağa bağlamak için filtreleme kullandığınızda her iletiyi en az bir hedef bloğun aldığından emin olun. Aksi halde, uygulamanız kilitlenebilir.  
  
### <a name="message-passing"></a>İleti Geçirme  
 Veri akışı programlama modeli kavramı, ilgili *ileti geçirme*, bağımsız bir program bileşenlerinin başka bir işlemle iletileri göndererek iletişim kurduğu. Uygulama bileşenleri arasında ileti yayılması için bir yol çağırmaktır <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Post%2A> ve <xref:System.Threading.Tasks.Dataflow.DataflowBlock.SendAsync%2A?displayProperty=nameWithType> hedef veri akışı blokları posta iletileri göndermek için yöntemleri (<xref:System.Threading.Tasks.Dataflow.DataflowBlock.Post%2A> zaman uyumlu olarak; çalışır <xref:System.Threading.Tasks.Dataflow.DataflowBlock.SendAsync%2A> zaman uyumsuz olarak çalışır) ve <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Receive%2A>, <xref:System.Threading.Tasks.Dataflow.DataflowBlock.ReceiveAsync%2A>, ve <xref:System.Threading.Tasks.Dataflow.DataflowBlock.TryReceive%2A> kaynak bloklarından iletileri almak için yöntemleri. Giriş verilerini baş düğüme (bir hedef bloğu) gönderip, çıkış verilerini ardışık düzenin terminal düğümünden veya ağın terminal düğümlerinden (bir veya daha fazla kaynak blok) alarak, bu yöntemleri veri akışı ardışık düzenleri veya ağlarla birleştirebilirsiniz. Ayrıca, verilere sahip olan kullanılabilir kaynakların ilkinden okuyup o veri üzerinde işlem yapabilmek için <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Choose%2A> yöntemini de kullanabilirsiniz.  
  
 Kaynak blokları çağırarak hedef blokları veri teklif <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601.OfferMessage%2A?displayProperty=nameWithType> yöntemi. Hedef blok, sunulan bir iletiye üç şekilde cevap verebilir: İletiyi kabul edebilir, iletiyi reddedebilir veya iletiyi erteleyebilir. Hedef iletiyi kabul ettiğinde, <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601.OfferMessage%2A> yöntemi döndürülür<xref:System.Threading.Tasks.Dataflow.DataflowMessageStatus.Accepted>. Hedef iletiyi reddettiğinde, <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601.OfferMessage%2A> yöntemi döndürülür<xref:System.Threading.Tasks.Dataflow.DataflowMessageStatus.Declined>. Hedef, kaynaktan daha fazla ileti almak istemediğinde <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601.OfferMessage%2A> değeri döndürülür<xref:System.Threading.Tasks.Dataflow.DataflowMessageStatus.DecliningPermanently>. Önceden tanımlı kaynak blok türleri bu tür bir dönüş değeri alındığında bağlantılı hedeflere ileti sunmaz ve bu tür hedeflerle otomatik olarak bağlantılarını keserler.  
  
 Bir hedef bloğu iletiyi daha sonra kullanmak üzere ertelerse, <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601.OfferMessage%2A> yöntemi döndürülür<xref:System.Threading.Tasks.Dataflow.DataflowMessageStatus.Postponed>. Bir ileti erteler hedef blok daha sonra çağırabilirsiniz <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.ReserveMessage%2A?displayProperty=nameWithType> yöntemi sunulan ileti ayrılacak deneyin. Bu noktada, ileti ya hala geçerlidir ve hedef blok tarafından kullanılabilir ya da başka bir hedef tarafından alınmıştır. Hedef blok ileti artık ihtiyaç veya iletiyi daha sonra gerektirir, çağıran <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.ConsumeMessage%2A?displayProperty=nameWithType> veya <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.ReleaseReservation%2A> yöntemi, sırasıyla. İleti ayırma işlemi, genellikle doyumsuz olmayan modda çalışan veri akışı bloğu türleri tarafından kullanılır. Doyumsuz olmayan mod, bu belgenin ilerleyen bölümlerinde açıklanmıştır. Bir hedef blok, ertelenmiş bir iletiyi ayırmak yerine, ertelenmiş iletiyi doğrudan tüketmeyi denemek için <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.ConsumeMessage%2A?displayProperty=nameWithType> yöntemini de kullanabilir.  
  
### <a name="dataflow-block-completion"></a>Veri Akışı Bloğunun Tamamlanması  
 Veri akışı blokları da kavramını destekler *tamamlama*. Tamamlanmış durumdaki bir veri akışı bloğu, daha fazla iş yapmaz. Her veri akışı bloğu ilişkili bir sahip <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> nesnesi olarak bilinen bir *tamamlama görev*, blok tamamlanma durumunu temsil eden. Bir <xref:System.Threading.Tasks.Task> nesnesinin tamamlanmasını bekleyebildiğinizden, tamamlanma görevlerini kullanarak bir veri akışı düğümündeki bir veya daha fazla terminal düğümün bitmesini de bekleyebilirsiniz. <xref:System.Threading.Tasks.Dataflow.IDataflowBlock> arabirimi, veri akışı bloğuna tamamlanması yönünde bir istek olduğunu bildiren <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A> yöntemini ve veri akışı bloğunu ilgilendiren tamamlanma görevini döndüren <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Completion%2A> özelliğini tanımlar. <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601> ve <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601> öğelerinin her ikisi de <xref:System.Threading.Tasks.Dataflow.IDataflowBlock> arabiriminden devralır.  
  
 Bir veri akışı bloğunun hatasız olarak tamamlanıp tamamlanmadığını, bir veya daha fazla hatayla karşılaşıp karşılaşmadığını veya iptal edilip edilmediğini belirlemek için iki yol vardır. İlk yol çağırmaktır <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> tamamlama görevde yöntemi bir `try` - `catch` blok (`Try` - `Catch` Visual Basic'te). Aşağıdaki örnek, giriş değeri sıfırdan daha azsa bir <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> oluşturan bir <xref:System.ArgumentOutOfRangeException> nesnesi oluşturur. Bu örnek tamamlanma görevinde <xref:System.AggregateException> yöntemini çağırınca <xref:System.Threading.Tasks.Task.Wait%2A> oluşturulur. <xref:System.ArgumentOutOfRangeException> öğesine, <xref:System.AggregateException.InnerExceptions%2A> nesnesinin <xref:System.AggregateException> özelliği aracılığıyla erişilir.  
  
 [!code-csharp[TPLDataflow_Overview#10](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#10)]
 [!code-vb[TPLDataflow_Overview#10](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#10)]  
  
 Bu örnekte, özel bir durumunun işlenmediği bir yürütme veri akışı bloğu temsilcisi gösterilmektedir. Bu tür blokların gövdelerindeki özel durumları işlemenizi öneririz. Ancak, bunu yapmanız mümkün değilse, blok iptal edilmiş gibi davranır ve gelen iletileri işlemez.  
  
 Bir veri akışı bloğu açıkça iptal edildiğinde, <xref:System.AggregateException> nesnesi, <xref:System.OperationCanceledException> özelliğinde <xref:System.AggregateException.InnerExceptions%2A> öğesini içerir. Veri akışı iptali hakkında daha fazla bilgi edinmek için, bu belgenin sonraki bölümlerinde yer alan İptal Etkinleştirme bölümüne bakın.  
  
 Bir veri akışı bloğunun tamamlanma durumunu belirlemenin ikinci yolu, tamamlanma görevinde bir devamlılık kullanmak ya da C# ve Visual Basic'in zaman uyumsuz dil özelliklerini kullanarak tamamlanma görevini zaman uyumsuz olarak beklemektir. <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType> yöntemine sağladığınız temsilci, öncül görevi temsil eden bir <xref:System.Threading.Tasks.Task> nesnesi alır. <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Completion%2A> özelliğinde, devamlılık için atanan temsilci, tamamlanma görevinin kendisini alır. Aşağıdaki örnek, genel veri akışı işleminin durumunu yazdıran bir tamamlanma görevi oluşturmak için <xref:System.Threading.Tasks.Task.ContinueWith%2A> yöntemini de kullanması dışında, öncekine benzemektedir.  
  
 [!code-csharp[TPLDataflow_Overview#11](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#11)]
 [!code-vb[TPLDataflow_Overview#11](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#11)]  
  
 Bir veri akışı bloğunun tamamlanma durumu hakkında ek bilgi edinmek için devamlılık görevinin gövdesinde <xref:System.Threading.Tasks.Task.IsCanceled%2A> gibi özellikleri de kullanabilirsiniz. Devamlılık görevlerini ve nasıl iptal ve hata işleme için ilişkili oldukları hakkında daha fazla bilgi için bkz: [göre devamlılık görevlerini kullanarak görevleri zincirleme](../../../docs/standard/parallel-programming/chaining-tasks-by-using-continuation-tasks.md), [görev iptali](../../../docs/standard/parallel-programming/task-cancellation.md), [özel durumu İşleme](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md), ve [NIB: nasıl yapılır: görevler tarafından oluşturulan özel durumları işleme](https://msdn.microsoft.com/library/d6c47ec8-9de9-4880-beb3-ff19ae51565d).  
  
 [[üstüne gidin](#top)]  
  
<a name="predefined_types"></a>   
## <a name="predefined-dataflow-block-types"></a>Önceden Tanımlı Veri Akışı Bloğu Türleri  
 TPL Veri Akışı Kitaplığı, birkaç önceden tanımlı veri akışı bloğu türü sağlar. Bu tür üç kategoriye ayrılır: *blokları arabelleğe alma*, *yürütme blokları*, ve *blokları gruplandırma*. Aşağıdaki bölümlerde, bu kategorileri oluşturan blok türleri açıklanmaktadır.  
  
### <a name="buffering-blocks"></a>Arabellek Blokları  
 Arabellek blokları, veri tüketicilerinin kullanılmak üzere veri tutar. TPL Veri Akışı Kitaplığı üç arabellek bloğu türü sağlar: <xref:System.Threading.Tasks.Dataflow.BufferBlock%601?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601?displayProperty=nameWithType> ve <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601?displayProperty=nameWithType>.  
  
#### <a name="bufferblockt"></a>BufferBlock(T)  
 <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> sınıfı, genel amaçlı bir zaman uyumsuz ileti yapısını temsil eder. Bu sınıf, iletilerin birden çok kaynak tarafından yazılabilen veya birden çok hedef tarafından okunabilen bir ilk giren ilk çıkar (FIFO) sırasını tutar. Bir hedef bir <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> nesnesinden ileti aldığında, o ileti, ileti sırasından kaldırılır. Bu nedenle, bir <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> nesnesi birden çok hedefe sahip olabilse de her iletiyi yalnızca bir hedef alır. <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> sınıfı, başka bir bileşene birden çok ileti geçirmek istediğinizde ve bu bileşenin her iletiyi alması gerektiğinde kullanışlıdır.  
  
 Aşağıdaki temel örnek, bir<xref:System.Int32> nesnesine birkaç <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> değeri gönderir ve o değerleri bu nesneden geri okur.  
  
 [!code-csharp[TPLDataflow_Overview#1](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#1)]
 [!code-vb[TPLDataflow_Overview#1](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#1)]  
  
 İletileri yazmak ve gelen iletileri okumak nasıl gösteren tam bir örnek için bir <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> nesne için bkz: [nasıl yapılır: iletiler yazma ve okuma iletileri bir veri akışı bloğu](../../../docs/standard/parallel-programming/how-to-write-messages-to-and-read-messages-from-a-dataflow-block.md).  
  
#### <a name="broadcastblockt"></a>BroadcastBlock(T)  
 <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> sınıfı, başka bir bileşene birden çok ileti geçirmeniz ancak bu bileşenin yalnızca en son değeri okuması gerektiğinde kullanışlıdır. Bu sınıf, bir iletiyi birden çok bileşene yayınlamak istediğinizde de kullanışlıdır.  
  
 Aşağıdaki temel örnek, bir <xref:System.Double> nesnesine bir <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> değeri gönderir ve değeri o nesneden birkaç kez geri okur. <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> nesnelerindeki değerler okunduktan sonra kaldırılmadığından, her seferinde aynı değer okunabilir.  
  
 [!code-csharp[TPLDataflow_Overview#2](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#2)]
 [!code-vb[TPLDataflow_Overview#2](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#2)]  
  
 Nasıl kullanılacağını gösteren tam bir örnek için <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> bir ileti birden çok hedef bloklarına yayınlamak için bkz: [nasıl yapılır: veri akışı bloğunda Görev Zamanlayıcısı belirtme](../../../docs/standard/parallel-programming/how-to-specify-a-task-scheduler-in-a-dataflow-block.md).  
  
#### <a name="writeonceblockt"></a>WriteOnceBlock(T)  
 <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> sınıfı, <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> nesnesine yalnızca bir kez yazılabilmesi dışında <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> sınıfına benzer. Düşünebilirsiniz <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> C# benzer olarak [readonly](~/docs/csharp/language-reference/keywords/readonly.md) ([ReadOnly](~/docs/visual-basic/language-reference/modifiers/readonly.md) Visual Basic'te) hariç anahtar sözcüğü bir <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> yerine değerinde aldıktan sonra nesne değişmez olur oluşturma. <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> sınıfı gibi, hedef de bir <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> nesnesinden ileti aldığında, o ileti nesneden kaldırılmaz. Bu nedenle, birden çok hedef iletinin bir kopyasını alır. <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> sınıfı, birden çok iletinin yalnızca ilkini yaymak istediğinizde kullanışlıdır.  
  
 Aşağıdaki temel örnek, bir <xref:System.String> nesnesine birden çok <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> değeri gönderir ve nesneden değeri geri okur. Bir <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> nesnesine yalnızca bir kez yazılabildiğinden, <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> nesnesi bir ileti aldıktan sonra, onun iletinin ardından gelen iletileri atar.  
  
 [!code-csharp[TPLDataflow_Overview#3](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#3)]
 [!code-vb[TPLDataflow_Overview#3](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#3)]  
  
 Nasıl kullanılacağını gösteren tam bir örnek için <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> bittikten ilk işlemi değerini almak için bkz: [nasıl yapılır: veri akışı bloklarının bağlantısını](../../../docs/standard/parallel-programming/how-to-unlink-dataflow-blocks.md).  
  
### <a name="execution-blocks"></a>Yürütme Blokları  
 Yürütme blokları, alınan her veri parçası için kullanıcı tarafından sağlanan bir temsilciyi çağırır. TPL Veri Akışı Kitaplığı, üç yürütme bloğu türü sağlar: <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602?displayProperty=nameWithType> ve <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602?displayProperty=nameWithType>.  
  
#### <a name="actionblockt"></a>ActionBlock(T)  
 <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> sınıfı, veri aldığında bir temsilci çağıran bir hedef bloktur. Bir <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> nesnesini, veri kullanılabilir olduğunda zaman uyumsuz olarak çalışan bir temsilci gibi düşünün. Bir <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> nesnesine sağladığınız temsilcinin türü, <xref:System.Action> veya `System.Func\<TInput, Task>` olabilir. Bir <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> nesnesini <xref:System.Action> ile kullandığınızda, her giriş öğesinin işlenmesi temsilci döndüğünde tamamlanmış sayılır. Bir <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> nesnesini `System.Func\<TInput, Task>` ile kullandığınızda, her giriş öğesinin işlenmesi ancak döndürülen <xref:System.Threading.Tasks.Task> nesnesi tamamlandığında tamamlanmış sayılır. Bu iki mekanizmayı kullanarak, <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> sınıfını her giriş öğesinin hem zaman uyumlu hem de zaman uyumsuz işlenmesi için kullanabilirsiniz.  
  
 Aşağıdaki temel örnek, bir <xref:System.Int32> nesnesine birden çok <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> değeri gönderir. <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> nesnesi, bu değerleri konsola yazdırır. Ardından, bu örnek, bloğu tamamlanmış duruma ayarlar ve tüm veri akışı görevlerinin bitmesini bekler.  
  
 [!code-csharp[TPLDataflow_Overview#4](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#4)]
 [!code-vb[TPLDataflow_Overview#4](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#4)]  
  
 Temsilciler ile kullanımını göstermektedir tam örnekleri için <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> sınıfı için bkz: [nasıl yapılır: gerçekleştirmek eylem, bir veri akışı blok aldığı verileri](../../../docs/standard/parallel-programming/how-to-perform-action-when-a-dataflow-block-receives-data.md).  
  
#### <a name="transformblocktinput-toutput"></a>TransformBlock(TInput, TOutput)  
 <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> sınıfı, hem bir kaynak hem de bir hedef olarak davranması dışında <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> sınıfına benzer. Bir <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> nesnesine geçirdiğiniz temsilci `TOutput` türünde bir değer döndürür. Bir <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> nesnesine sağladığınız temsilcinin türü, `System.Func<TInput, TOutput>` veya `System.Func<TInput, Task>` olabilir. Bir <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> nesnesini `System.Func\<TInput, TOutput>` ile kullandığınızda, her giriş öğesinin işlenmesi temsilci döndüğünde tamamlanmış sayılır. <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> ile kullanılan bir `System.Func<TInput, Task<TOutput>>` nesnesini kullandığınızda, her giriş öğesinin işlenmesi ancak döndürülen <xref:System.Threading.Tasks.Task> nesnesi tamamlandığında tamamlanmış sayılır. <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> sınıfında olduğu gibi, bu iki mekanizmayı kullanarak <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> sınıfını her giriş öğesinin hem zaman uyumlu hem de zaman uyumsuz işlenmesi için kullanabilirsiniz.  
  
 Aşağıdaki temel örnek, giriş değerinin kare kökünü hesaplayan bir <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> nesnesi oluşturur. <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> nesnesi, giriş olarak <xref:System.Int32> değerlerini alır ve çıktı olarak <xref:System.Double> değerlerini üretir.  
  
 [!code-csharp[TPLDataflow_Overview#5](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#5)]
 [!code-vb[TPLDataflow_Overview#5](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#5)]  
  
 Kullanan tüm örnekleri için <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> bir Windows Forms uygulaması'nda Görüntü işlemeyi gerçekleştiren bir ağda veri akışı bloklarının, bkz: [izlenecek yol: veri akışı kullanarak bir Windows Forms uygulamasında](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).  
  
#### <a name="transformmanyblocktinput-toutput"></a>TransformManyBlock(TInput, TOutput)  
 <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> sınıfı, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> sınıfına benzer, ancak <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> sınıfı her giriş değeri için tek bir çıktı değeri üretmek yerine her giriş değeri için sıfır veya daha fazla çıktı değeri üretir. Bir <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> nesnesine sağladığınız temsilcinin türü `System.Func<TInput, IEnumerable<TOutput>>` veya `type System.Func<TInput, Task<IEnumerable<TOutput>>>` olabilir. Bir <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> nesnesini `System.Func<TInput, IEnumerable<TOutput>>` ile kullandığınızda, her giriş öğesinin işlenmesi temsilci döndüğünde tamamlanmış sayılır. Bir <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> nesnesini `System.Func<TInput, Task<IEnumerable<TOutput>>>` ile kullandığınızda, her giriş öğesinin işlenmesi ancak döndürülen `System.Threading.Tasks.Task<IEnumerable<TOutput>>` nesnesi tamamlandığında tamamlanmış sayılır.  
  
 Aşağıdaki temel örnek, dizeleri karakter sıralarına ayıran bir <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> nesnesi oluşturur. <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> nesnesi, giriş olarak <xref:System.String> değerlerini alır ve çıktı olarak <xref:System.Char> değerlerini üretir.  
  
 [!code-csharp[TPLDataflow_Overview#6](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#6)]
 [!code-vb[TPLDataflow_Overview#6](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#6)]  
  
 Kullanan tüm örnekleri için <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> veri akışı ardışık düzeninde her giriş için birden çok bağımsız çıkış üretmek için bkz: [izlenecek yol: bir veri akışı ardışık düzenleri oluşturma](../../../docs/standard/parallel-programming/walkthrough-creating-a-dataflow-pipeline.md).  
  
#### <a name="degree-of-parallelism"></a>Paralellik Derecesi  
 Her <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> ve <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> nesnesi, blok onları işlemeye hazır olana kadar giriş iletilerini arabelleğe alır. Varsayılan olarak, bu sınıflar iletileri alındıkları sırada, teker teker işler. <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> ve <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> nesnelerinin aynı anda birden çok ileti işlemesini mümkün kılmak için paralellik derecesini de belirtebilirsiniz. Eş zamanlı yürütme hakkında daha fazla bilgi edinmek için, bu belgenin ilerleyen bölümlerindeki Paralellik Derecesini Belirtme bölümüne bakın. Aynı anda birden fazla iletiyi işlemek için bir yürütme veri akışı bloğu etkinleştirmek için paralellik derecesini ayarlar bir örnek için bkz: [nasıl yapılır: veri akışı bloğunda paralellik derecesi belirtin](../../../docs/standard/parallel-programming/how-to-specify-the-degree-of-parallelism-in-a-dataflow-block.md).  
  
#### <a name="summary-of-delegate-types"></a>Temsilci Türlerinin Özeti  
 Aşağıdaki tabloda <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> ve <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> nesnelerine sağlayabileceğiniz temsilci türleri özetlenmektedir. Bu tabloda, temsilci türünün zaman uyumlu mu yoksa zaman uyumsuz mu çalıştığı da belirtilir.  
  
|Tür|Zaman Uyumlu Temsilci Türü|Zaman Uyumsuz Temsilci Türü|  
|----------|-------------------------------|--------------------------------|  
|<xref:System.Threading.Tasks.Dataflow.ActionBlock%601>|`System.Action`|`System.Func<TInput, Task>`|  
|<xref:System.Threading.Tasks.Dataflow.TransformBlock%602>|`System.Func<TInput, TOutput>`|`System.Func<TInput, Task<TOutput>>`|  
|<xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602>|`System.Func<TInput, IEnumerable<TOutput>>`|`System.Func<TInput, Task<IEnumerable<TOutput>>>`|  
  
 Yürütme bloğu türleriyle çalışırken lambda ifadeleri de kullanabilirsiniz. Lambda ifadesi bir yürütme bloğu ile kullanmak nasıl oluşturulduğunu gösteren örnek için bkz: [nasıl yapılır: gerçekleştirmek eylem, bir veri akışı blok aldığı verileri](../../../docs/standard/parallel-programming/how-to-perform-action-when-a-dataflow-block-receives-data.md).  
  
### <a name="grouping-blocks"></a>Gruplandırma Blokları  
 Gruplandırma blokları, bir veya birden fazla kaynaktaki verileri çeşitli kısıtlamalar altında birleştirir. TPL Veri Akışı Kitaplığı, üç birleştirme bloğu türü sağlar: <xref:System.Threading.Tasks.Dataflow.BatchBlock%601>, <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> ve <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602>.  
  
#### <a name="batchblockt"></a>BatchBlock(T)  
 <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> sınıfı, toplu iş olarak bilinen giriş veri kümelerini birleştirerek çıktı veri dizileri oluşturur. Bir <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> nesnesi oluşturduğunuzda her toplu işin boyutunu siz belirtirsiniz. <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> nesnesi belirtilen sayıda giriş öğesi aldığında, zaman uyumsuz olarak bu öğeleri içeren bir dizi yayar. Eğer bir <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> nesnesi tamamlanmış duruma ayarlanmış olmasına rağmen toplu iş oluşturmak için yeterli öğeye sahip değilse, kalan giriş öğelerini içeren son bir dizi yayınlar.  
  
 <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> Sınıfı ya da çalışır *doyumsuz* veya *doyumsuz olmayan* modu. Varsayılan olan doyumsuz modda, bir <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> nesnesi sunulan her iletiyi kabul eder ve belirtilen sayıda öğeyi kabul ettikten sonra bir dizi yayınlar. Doyumsuz olmayan modda, bir <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> öğesi, yeterli sayıda kaynak tarafından bir toplu iş oluşturacak kadar ileti sunulana kadar tüm iletileri erteler. Doyumsuz mod genellikle doyumsuz olmayan moddan daha iyi çalışır, çünkü daha az işlem ek yükü gerektirir. Ancak, birden çok kaynaktan yapılan tüketimi atomik bir düzeyde koordine etmeniz gerektiğinde, doyumsuz olmayan modu kullanabilirsiniz. Doyumsuz olmayan modu belirtmek için <xref:System.Threading.Tasks.Dataflow.GroupingDataflowBlockOptions.Greedy%2A> oluşturucusundaki `False` parametresinin `dataflowBlockOptions` özelliğini <xref:System.Threading.Tasks.Dataflow.BatchBlock%601.%23ctor%2A> olarak ayarlayın.  
  
 Aşağıdaki temel örnek, bir toplu işte on öğe tutan bir <xref:System.Int32> nesnesine birden çok <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> değeri gönderir. <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> nesnesindeki tüm değerlerin yayınlandığından emin olmak için, bu örnek <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A> yöntemini çağırır. <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A> yöntemi, <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> nesnesinin tamamlanmış duruma ayarlar ve bu yüzden, <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> nesnesi kalan öğeleri son bir toplu iş olarak yayınlar.  
  
 [!code-csharp[TPLDataflow_Overview#7](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#7)]
 [!code-vb[TPLDataflow_Overview#7](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#7)]  
  
 Kullanan tam bir örnek için <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> veritabanı ekleme işlemleri verimliliğini artırmak için bkz: [izlenecek yol: kullanarak BatchBlock ve Batchedjoinblock'u verimliliğini artırmak için](../../../docs/standard/parallel-programming/walkthrough-using-batchblock-and-batchedjoinblock-to-improve-efficiency.md).  
  
#### <a name="joinblockt1-t2-"></a>JoinBlock(T1, T2, ...)  
 <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> ve <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> sınıfları, giriş öğelerini toplar ve bu öğeleri içeren <xref:System.Tuple%602?displayProperty=nameWithType> veya <xref:System.Tuple%603?displayProperty=nameWithType> nesnelerini yayınlar. <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> ve <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> sınıfları, <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601> öğesinden devralmaz. Bunun yerine, <xref:System.Threading.Tasks.Dataflow.JoinBlock%602.Target1%2A> öğesini uygulayan <xref:System.Threading.Tasks.Dataflow.JoinBlock%602.Target2%2A>, <xref:System.Threading.Tasks.Dataflow.JoinBlock%603.Target3%2A> ve <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601> özelliklerini sağlarlar.  
  
 <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> gibi, <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> ve <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> öğeleri de doyumsuz veya doyumsuz olmayan modda çalışırlar. Varsayılan olan doyumsuz modda, bir <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> veya <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> nesnesi, sunulan tüm iletileri kabul eder ve hedeflerinden her biri en az bir ileti aldıktan sonra bir kayıt düzeni yayınlar. Doyumsuz olmayan modda, bir <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> veya <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> nesnesi tüm hedeflere kayıt düzeni oluşturmak için gereken veriler sunulana kadar tüm iletileri erteler. Bu noktada, blok, kaynaklardan gereken tüm öğeleri atomik olarak almak için iki aşamalı bir kaydetme protokolü uygular. Bu erteleme, o esnada başka bir varlığın veriyi tüketmesini mümkün kılarak tüm sistemin ilerlemesini sağlar.  
  
 Aşağıdaki temel örnek, bir <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> nesnesinin bir değeri hesaplamak için birden çok veriye ihtiyaç duyduğu bir durumu gösterir. Bu örnek, bir aritmetik işlemi gerçekleştirmek için iki <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> değeri ve bir <xref:System.Int32> değeri gerektiren bir <xref:System.Char> nesnesi oluşturur.  
  
 [!code-csharp[TPLDataflow_Overview#8](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#8)]
 [!code-vb[TPLDataflow_Overview#8](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#8)]  
  
 Kullanan tam bir örnek için <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> işlevinizde bir kaynak paylaşmak için doyumsuz olmayan modu bkz [nasıl yapılır: Okuma veri kaynaklarına gelen birden çok kullanımı Joinblock'u](../../../docs/standard/parallel-programming/how-to-use-joinblock-to-read-data-from-multiple-sources.md).  
  
#### <a name="batchedjoinblockt1-t2-"></a>BatchedJoinBlock(T1, T2, ...)  
 <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> ve <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%603> sınıfları, giriş öğelerini toplu bir halde toplar ve bu öğeleri içeren `System.Tuple(IList(T1), IList(T2))` veya `System.Tuple(IList(T1), IList(T2), IList(T3))` nesneleri yayınlar. <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> öğesini <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> ve <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> öğelerinin birleşimi olarak düşünebilirsiniz. Bir <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> nesnesi oluşturduğunuzda her toplu işin boyutunu belirtin. Ayrıca, <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602.Target1%2A> öğesini uygulayan <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602.Target2%2A> ve <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601> özelliklerini de sağlar. Tüm hedeflerden belirtilen sayıda giriş öğesi alındığında, <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> nesnesi zaman uyumsuz olarak bu öğeleri içeren bir `System.Tuple(IList(T1), IList(T2))` nesnesi yayar.  
  
 Aşağıdaki temel örnek, sonuçları, <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602>  değerlerini ve birer <xref:System.Int32> nesnesi olanları tutan bir <xref:System.Exception> nesnesi oluşturur. Bu örnek birden çok işlem gerçekleştirir ve sonuçları <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602.Target1%2A> nesnesinin <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602.Target2%2A> özelliğine, hataları ise <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> özelliğine yazar. Başarılı ve başarısız işlemlerin sayısı önceden bilinmediği için, <xref:System.Collections.Generic.IList%601> nesneleri her hedefin sıfır veya daha fazla değer alabilmesini sağlar.  
  
 [!code-csharp[TPLDataflow_Overview#9](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#9)]
 [!code-vb[TPLDataflow_Overview#9](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#9)]  
  
 Kullanan tam bir örnek için <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> sonuçları ve programı bir veritabanından okurken oluşan özel durumları yakalamak için bkz: [izlenecek yol: kullanarak BatchBlock ve Batchedjoinblock'u verimliliğini artırmak için](../../../docs/standard/parallel-programming/walkthrough-using-batchblock-and-batchedjoinblock-to-improve-efficiency.md).  
  
 [[üstüne gidin](#top)]  
  
<a name="behavior"></a>   
## <a name="configuring-dataflow--block-behavior"></a>Veri Akışı Bloğu Davranışını Yapılandırma  
 Veri akışı bloğu türlerinin oluşturucusuna bir <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions?displayProperty=nameWithType> sağlayarak ek seçenekleri etkinleştirebilirsiniz. Bu seçenekler, arkaplandaki görevi yöneten zamanlayıcı ve paralellik derecesi gibi davranışları denetler. <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions>, belirli veri akışı bloğu türlerine özel davranışları belirtmek için devralınmış özelliklere de sahiptir. Aşağıdaki tabloda, her veri akışı bloğu türüyle hangi seçenek türünün ilişkili olduğunu özetlenmektedir.  
  
|Veri Akışı Bloğu Türü|<xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions> Türü|  
|-------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|  
|<xref:System.Threading.Tasks.Dataflow.BufferBlock%601>|<xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions>|  
|<xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601>|<xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions>|  
|<xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601>|<xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions>|  
|<xref:System.Threading.Tasks.Dataflow.ActionBlock%601>|<xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions>|  
|<xref:System.Threading.Tasks.Dataflow.TransformBlock%602>|<xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions>|  
|<xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602>|<xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions>|  
|<xref:System.Threading.Tasks.Dataflow.BatchBlock%601>|<xref:System.Threading.Tasks.Dataflow.GroupingDataflowBlockOptions>|  
|<xref:System.Threading.Tasks.Dataflow.JoinBlock%602>|<xref:System.Threading.Tasks.Dataflow.GroupingDataflowBlockOptions>|  
|<xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602>|<xref:System.Threading.Tasks.Dataflow.GroupingDataflowBlockOptions>|  
  
 Sonraki bölümlerde, <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions?displayProperty=nameWithType> ve <xref:System.Threading.Tasks.Dataflow.GroupingDataflowBlockOptions?displayProperty=nameWithType> sınıfları aracılığıyla kullanılabilen önemli veri akışı bloğu seçenekleri türleri hakkında ek bilgiler sağlar.  
  
### <a name="specifying-the-task-scheduler"></a>Görev Zamanlayıcısı'ı Belirtme  
 Her önceden tanımlı veri akışı bloğu, veriyi bir hedefe yayma, bir kaynaktan veri alma ve veri kullanılabilir oldukça kullanıcı tanımlı temsilcileri çalıştırma gibi işlemleri gerçekleştirmek için TPL görev zamanlama mekanizmasını kullanır. <xref:System.Threading.Tasks.TaskScheduler>, iş parçacıklarının görevlerini sıralayan görev zamanlayıcısını temsil eden bir soyut sınıftır. Varsayılan görev zamanlayıcısı, <xref:System.Threading.Tasks.TaskScheduler.Default%2A>, işleri sıralamak ve yürütmek için <xref:System.Threading.ThreadPool> sınıfını kullanır. Bir veri akışı bloğu nesnesi oluştururken <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.TaskScheduler%2A> özelliğini ayarlayarak varsayılan görev zamanlayıcısını geçersiz kılabilirsiniz.  
  
 Görev zamanlayıcısı birden çok veri akışı bloğunu yönettiğinde, aralarında ilkeler uygulayabilir. Örneğin, birden çok veri akışı bloğunun her biri aynı <xref:System.Threading.Tasks.ConcurrentExclusiveSchedulerPair> nesnesinin özel zamanlayıcısını hedef alacak şekilde yapılandırılırsa, bu bloklarda çalışan tüm işler seri hale getirilir. Benzer şekilde, bu bloklar aynı <xref:System.Threading.Tasks.ConcurrentExclusiveSchedulerPair> nesnesinin eşzamanlı zamanlayıcısını hedef alacak şekilde, bu zamanlayıcı da en fazla eşzamanlılık düzeyine sahip olacak şekilde yapılandırılırsa, bu bloklardaki tüm işler o eşzamanlı işlem sayısıyla sınırlandırılır. Kullanan bir örnek <xref:System.Threading.Tasks.ConcurrentExclusiveSchedulerPair> paralel olarak oluşur, ancak yazma işlemleri yalnızca diğer tüm işlemleri ortaya bkz okuma işlemlerini etkinleştirmek için sınıf [nasıl yapılır: veri akışı bloğunda Görev Zamanlayıcısı belirtme](../../../docs/standard/parallel-programming/how-to-specify-a-task-scheduler-in-a-dataflow-block.md). Tpl'de görev zamanlayıcılar hakkında daha fazla bilgi için bkz: <xref:System.Threading.Tasks.TaskScheduler> sınıfı konu.  
  
### <a name="specifying-the-degree-of-parallelism"></a>Paralellik Derecesini Belirtme  
 Varsayılan olarak, TPL Veri Akışı Kitaplığının sağladığı üç yürütme bloğu türü olan <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> ve <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602>, iletileri tek tek işler. Ayrıca, bu veri akışı blokları iletileri alındıkları sırada işler. Bu veri akışı bloklarının iletileri eşzamanlı olarak işlemesini mümkün kılmak için, veri akışı bloğu nesnesini oluştururken <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions.MaxDegreeOfParallelism%2A?displayProperty=nameWithType> özelliğini ayarlayın.  
  
 Varsayılan <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions.MaxDegreeOfParallelism%2A> değeri 1'dir ve tüm veri akışı boklarının aynı anda tek bir ileti işlemesini sağlar. Bu özelliği 1'den daha büyük bir değere ayarlayarak veri akışı bloğunun birden çok iletiyi eşzamanlı olarak işlemesini sağlayabilirsiniz. Bu özelliği <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.Unbounded?displayProperty=nameWithType> olarak ayarlamak, temelde yatan görev zamanlayıcısının en büyük eşzamanlılık derecesini yönetmesini sağlar.  
  
> [!IMPORTANT]
>  1'den daha büyük bir en büyük paralellik derecesi belirttiğinizde, birden çok ileti aynı anda işlenir ve bu nedenle, iletiler alındıkları sırada işlenemeyebilir. Ancak, iletiler bloktan çıktıklarında doğru olarak sıralanırlar.  
  
 <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions.MaxDegreeOfParallelism%2A> özelliği en büyük paralellik derecesini temsil ettiğinden, veri akışı bloğu belirttiğinizden daha düşük derecede paralellikle çalışabilir. Veri akışı bloğu işlevsel gereksinimlerini karşılamak için veya yeterli kullanılabilir sistem kaynağı olmaması nedeniyle daha düşük bir paralellik derecesi kullanabilir Bir veri akışı bloğu asla belirttiğinizden daha fazla paralellik seçmez.  
  
 <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions.MaxDegreeOfParallelism%2A> özelliğinin değeri, her veri akışı bloğu nesnesi için o nesneye özeldir. Örneğin, dört veri akışı bloğu nesnesinin her biri en büyük paralellik derecesi için 1 belirtirse, dört veri akışı bloğu nesnesinin hepsi paralel çalışma potansiyeline sahiptir.  
  
 Maksimum paralellik paralel olarak gerçekleşecek şekilde uzun işlemlerini etkinleştirmek derecesi ayarlar bir örnek için bkz: [nasıl yapılır: veri akışı bloğunda paralellik derecesi belirtin](../../../docs/standard/parallel-programming/how-to-specify-the-degree-of-parallelism-in-a-dataflow-block.md).  
  
### <a name="specifying-the-number-of-messages-per-task"></a>Görev Başına İleti Sayısını Belirtme  
 Önceden tanımlı veri akışı bloğu türleri, görevleri kullanarak birden çok giriş öğesini işler. Bu veriyi işlemek için gereken görev nesnesi sayısını az sayıda tutmaya yardımcı olur ve bu sayede, uygulamaların daha verimli çalışmasını sağlanır. Ancak, bir veri akışı bloğu kümesindeki görevler veri işlerken, başka veri akışı bloklarındaki görevlerin iletileri sıraya alarak işlemci zamanı için beklemesi gerekebilir. Veri akışı görevleri arasında daha iyi eşitlik sağlamak için, <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.MaxMessagesPerTask%2A> özelliğini ayarlayın. <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.MaxMessagesPerTask%2A> özelliği varsayılan değer olan <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.Unbounded?displayProperty=nameWithType> değerine ayarlandığında, bir veri akışı bloğu tarafından kullanılan görev, mevcut iletilerin hepsini işler. <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.MaxMessagesPerTask%2A> özelliği <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.Unbounded> dışında bir değere ayarlandığında, veri akışı bloğu <xref:System.Threading.Tasks.Task> nesnesi başına en fazla o sayı kadar ileti işler. <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.MaxMessagesPerTask%2A> özelliğini ayarlamak görevler arası eşitliği artırsa da, sistemin gerektiğinden fazla görev oluşturmasına sebep olup performansı azaltabilir.  
  
### <a name="enabling-cancellation"></a>İptal Etkinleştirme  
 TPL, görevlerin karşılıklı olarak iptal işlemini koordine etmelerine olanak sağlayan bir mekanizma sunar. Veri akışı bloklarının bu iptal mekanizmasına katılımını etkinleştirmek için <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.CancellationToken%2A> özelliğini ayarlayın. Bu <xref:System.Threading.CancellationToken> nesnesi iptal edilmiş duruma ayarlandığında, bu belirteci izleyen tüm veri akışı blokları geçerli öğelerini yürütmeyi bitirir ama sonraki öğeleri işlemeye başlamaz. Bu veri akışı blokları, ayrıca, arabelleğe alınmış tüm iletileri temizler, kaynak ve hedef bloklara olan bağlantılarını bırakır ve iptal edilmiş duruma geçer. <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Completion%2A> özelliği iptal edilmiş duruma geçerek, işlem sırasında bir özel durum oluşmadığı sürece, <xref:System.Threading.Tasks.Task.Status%2A> özelliğinin <xref:System.Threading.Tasks.TaskStatus.Canceled> olarak ayarlanmasını sağlar. Böyle bir durum oluştuysa, <xref:System.Threading.Tasks.Task.Status%2A> özelliği <xref:System.Threading.Tasks.TaskStatus.Faulted> olarak ayarlanır.  
  
 Bir Windows Forms uygulamasında iptal kullanmayı gösteren bir örnek için bkz: [nasıl yapılır: veri akışı bloğunu iptal](../../../docs/standard/parallel-programming/how-to-cancel-a-dataflow-block.md). Tpl'de iptal hakkında daha fazla bilgi için bkz: [görev iptali](../../../docs/standard/parallel-programming/task-cancellation.md).  
  
### <a name="specifying-greedy-versus-non-greedy-behavior"></a>Doyumsuz veya Doyumsuz Olmayan Davranış Belirtme  
 Birkaç gruplandırma veri akışı blok türü ya da çalışabilir *doyumsuz* veya *doyumsuz olmayan* modu. Varsayılan olarak, önceden tanımlı veri akışı bloğu türleri doyumsuz modda çalışır.  
  
 <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> gibi birleştirme bloğu türleri için, doyumsuz mod, blok tarafından verilerin kendilerine karşılık gelen birleştirilecek veriler mevcut olmasa bile hemen kabul edildiği anlamına gelir. Doyumsuz olmayan mod ise, bloğun her hedefinde birleştirme işlemini tamamlayacak bir ileti olana kadar gelen tüm iletileri ertelemesi anlamına gelir. Ertelenen iletilerden herhangi biri artık kullanılabilir değilse, birleştirme bloğu ertelenen tüm iletileri bırakır ve işlemi yeniden başlatır. <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> sınıfı için doyumsuz ve doyumsuz olmayan davranış benzerdir, ancak doyumsuz olmayan modda bir <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> nesnesi, ayrı kaynaklardan bir toplu işi tamamlayacak sayıda ileti gelene kadar tüm gelen iletileri erteler.  
  
 Bir veri akışı bloğunda doyumsuz olmayan modu ayarlamak için, <xref:System.Threading.Tasks.Dataflow.GroupingDataflowBlockOptions.Greedy%2A> özelliğini `False` olarak ayarlayın. Doyumsuz olmayan mod bir veri kaynağını daha verimli bir şekilde paylaşmak birden fazla birleştirme blokları etkinleştirmek için nasıl kullanılacağını gösteren bir örnek için bkz: [nasıl yapılır: Okuma veri kaynaklarına gelen birden çok Joinblock'u kullanma](../../../docs/standard/parallel-programming/how-to-use-joinblock-to-read-data-from-multiple-sources.md).  
  
 [[üstüne gidin](#top)]  
  
<a name="custom"></a>   
## <a name="custom-dataflow-blocks"></a>Özel Veri Akışı Blokları  
 TPL Veri Akışı Kitaplığı pek çok önceden tanımlı blok türü sunsa da özel davranışları olan ek blok türleri oluşturabilirsiniz. Mevcut blok türlerinin davranışlarını kapsayan karmaşık bir blok oluşturmak için doğrudan <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601> veya <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601> arabirimini uygulayın ya da <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Encapsulate%2A> yöntemini kullanın. Özel veri akışı bloğu işlevselliği uygulamak nasıl Göster örnekler için bkz: [izlenecek yol: bir özel veri akışı blok türü oluşturma](../../../docs/standard/parallel-programming/walkthrough-creating-a-custom-dataflow-block-type.md).  
  
 [[üstüne gidin](#top)]  
  
## <a name="related-topics"></a>İlgili Konular  
  
|Başlık|Açıklama|  
|-----------|-----------------|  
|[Nasıl yapılır: Veri Akışı Bloğuna İletiler Yazma ve Veri Akışı Bloğundan İletiler Okuma](../../../docs/standard/parallel-programming/how-to-write-messages-to-and-read-messages-from-a-dataflow-block.md)|Bir <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> nesnesinde iletilerin nasıl yazılacağını ve okunacağını gösterir.|  
|[Nasıl yapılır: Üretici-Tüketici Veri Akışı Düzeni Uygulama](../../../docs/standard/parallel-programming/how-to-implement-a-producer-consumer-dataflow-pattern.md)|Üreticinin bir veri akışı bloğuna ileti gönderdiği ve tüketicinin o bloktan iletileri okuduğu şekilde bir üretici - tüketici modeli uygulamak için veri akışı modelinin nasıl kullanılacağını açıklar.|  
|[Nasıl yapılır: Veri Akışı Bloğu Veri Aldığında İşlem Gerçekleştirme](../../../docs/standard/parallel-programming/how-to-perform-action-when-a-dataflow-block-receives-data.md)|Yürütme veri akışı bloğu türleri <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> ve <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> için nasıl temsilci sağlanabileceğini açıklar.|  
|[İzlenecek Yol: Veri Akışı İşlem Hattı Oluşturma](../../../docs/standard/parallel-programming/walkthrough-creating-a-dataflow-pipeline.md)|İnternet'ten metin indiren ve o metin üzerinde çeşitli işlemler gerçekleştiren bir veri akışı ardışık düzeninin nasıl oluşturulduğunu açıklar.|  
|[Nasıl yapılır: Veri Akışı Bloklarının Bağlantısını Kaldırma](../../../docs/standard/parallel-programming/how-to-unlink-dataflow-blocks.md)|Nasıl kullanılacağı ortaya <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.LinkTo%2A> kaynak hedef alınacak bir ileti sunar sonra hedef blok kaynağından bağlantısını kesmek için yöntem.|  
|[İzlenecek yol: Windows Forms Uygulaması'nda Veri Akışı Kullanma](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md)|Bir Windows Forms uygulamasında görüntü işleme gerçekleştiren bir veri akışı bloğu ağının nasıl oluşturulduğunu gösterir.|  
|[Nasıl yapılır: Veri Akışı Bloğunu İptal Etme](../../../docs/standard/parallel-programming/how-to-cancel-a-dataflow-block.md)|Bir Windows Forms uygulamasında iptal işleminin nasıl kullanıldığını gösterir.|  
|[Nasıl yapılır: Birden Fazla Kaynaktan Okumak için JoinBlock'u Kullanma](../../../docs/standard/parallel-programming/how-to-use-joinblock-to-read-data-from-multiple-sources.md)|Birden çok kaynaktan veri kullanılabilir olduğunda bir işlemi gerçekleştirmek içn <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> sınıfının nasıl kullanıldığını, ve birden çok birleştirme bloğunun bir veri kaynağını daha etkin olarak kullanabilmesini sağlamak için doyumsuz olmayan modun nasıl kullanıldığını açıklar.|  
|[Nasıl yapılır: Veri Akışı Bloğunda Paralellik Derecesini Belirtme](../../../docs/standard/parallel-programming/how-to-specify-the-degree-of-parallelism-in-a-dataflow-block.md)|Bir yürütme veri akışı bloğunun aynı anda birden çok letiyi işlemesi için <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions.MaxDegreeOfParallelism%2A> özelliğinin nasıl ayarlandığını açıklar.|  
|[Nasıl yapılır: Veri Akışı Bloğunda Görev Zamanlayıcı Belirtme](../../../docs/standard/parallel-programming/how-to-specify-a-task-scheduler-in-a-dataflow-block.md)|Uygulamanızda veri akışı kullandığınızda belirli bir görev zamanlayıcının nasıl ilişkilendirildiğini gösterir.|  
|[İzlenecek yol: Verimliliği Artırmak için BatchBlock ve BatchedJoinBlock'u Kullanma](../../../docs/standard/parallel-programming/walkthrough-using-batchblock-and-batchedjoinblock-to-improve-efficiency.md)|Veritabanı ekleme işlemlerinin verimini artırmak için <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> sınıfının; uygulama veritabanından okurken hem sonuçları hem de oluşan özel durumları yakalamak içinse <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> sınıfının nasıl kullanıldığını açıklar.|  
|[İzlenecek Yol: Özel bir Veri Akışı Blok Türü Oluşturma](../../../docs/standard/parallel-programming/walkthrough-creating-a-custom-dataflow-block-type.md)|Özel davranış uygulayan bir veri akışı bloğu türünü oluşturmanın iki yolunu gösterir.|  
|[Görev Paralel Kitaplığı (TPL)](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md)|[!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] uygulamalarında paralel ve eşzamanlı programlamayı basitleştiren bir kitaplık olan TPL'yi tanıtır.|
